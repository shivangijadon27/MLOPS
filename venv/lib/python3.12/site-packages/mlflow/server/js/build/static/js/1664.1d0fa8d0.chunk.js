"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[1664],{1422:function(e,n,t){t.d(n,{H:function(){return r}});var i=t(39595),o=t(61060),a=t(25117);const r=()=>{const e=(0,i.jE)();return(0,o.n)({mutationFn:e=>a.t.createModelDefinition(e),onSuccess:()=>{e.invalidateQueries(["gateway_model_definitions"])}})}},1664:function(e,n,t){t.d(n,{p:function(){return _},V:function(){return b}});var i=t(68248),o=t(46709),a=t(27757),r=t(82716),s=t(79081),d=t(98332),l=t(7655),c=t(40724),u=t(884),m=t(27151),p=t(35583),g=t(96872),h=t(93422),f=t(73716),v=t(75329),y=t(73408);var x={name:"1wjtvq0",styles:"flex-grow:1;min-width:0"};const w=({title:e,titleWidth:n=200,children:t,hideDivider:o=!1,className:r})=>{const{theme:s}=(0,a.u)();return(0,y.FD)("div",{className:r,css:(0,i.AH)({display:"flex",gap:32,paddingTop:s.spacing.lg,paddingBottom:s.spacing.lg,borderBottom:o?"none":`1px solid ${s.colors.borderDecorative}`,"@media (max-width: 1023px)":{flexDirection:"column",gap:s.spacing.md}},""),children:[(0,y.Y)("div",{css:(0,i.AH)({flexShrink:0,width:n,"@media (max-width: 1023px)":{width:"100%"}},""),children:(0,y.Y)("span",{css:(0,i.AH)({fontWeight:s.typography.typographyBoldFontWeight,fontSize:s.typography.fontSizeLg},""),children:e})}),(0,y.Y)("div",{css:x,children:t})]})};var Y=t(6459),S=t(6420);var A={name:"9e0cr4",styles:"flex-grow:1;max-width:900px;min-width:0;@media (max-width: 1023px){max-width:100%;}"},M={name:"1w2agvp",styles:"flex-shrink:0;width:360px;position:sticky;top:0;align-self:flex-start;@media (max-width: 1023px){width:100%;position:static;}"};const b=({mode:e,isSubmitting:n,error:t,errorMessage:x,resetErrors:S,selectedModel:b,isFormComplete:T,hasChanges:I=!0,onSubmit:k,onCancel:_,onNameBlur:D,componentIdPrefix:H="mlflow.gateway.endpoint",embedded:$=!1})=>{const{theme:z}=(0,a.u)(),P=(0,l.A)(),N=(0,u.xW)(),B=N.watch("provider"),L=N.watch("modelName"),W=N.watch("secretMode"),q=N.watch("existingSecretId"),j=N.watch("newSecret"),{existingSecrets:E,isLoadingSecrets:R,authModes:O,defaultAuthMode:V,isLoadingProviderConfig:U}=(0,f.t)({provider:B}),G=(0,o.useMemo)(()=>({mode:W,existingSecretId:q,newSecret:j}),[W,q,j]),Q=(0,o.useCallback)(e=>{e.mode!==W&&N.setValue("secretMode",e.mode),e.existingSecretId!==q&&N.setValue("existingSecretId",e.existingSecretId),e.newSecret!==j&&N.setValue("newSecret",e.newSecret)},[N,W,q,j]),K="edit"===e?!T||!I:!T,X=T?"edit"!==e||I?void 0:P.formatMessage({id:"eANdPU",defaultMessage:"No changes to save"}):P.formatMessage({id:"2vjNq9",defaultMessage:"Please complete all required fields"});return(0,y.FD)(y.FK,{children:[t&&(0,y.Y)("div",{css:(0,i.AH)({padding:$?0:`0 ${z.spacing.md}px`},""),children:(0,y.Y)(r.Alert,{componentId:`${H}.error`,closable:!1,message:x,type:"error",css:(0,i.AH)({marginBottom:z.spacing.md},"")})}),(0,y.FD)("div",{css:(0,i.AH)({flex:1,display:"flex",gap:z.spacing.md,padding:$?0:`0 ${z.spacing.md}px`,overflow:"auto","@media (max-width: 1023px)":{flexDirection:"column"}},""),children:[(0,y.FD)("div",{css:A,children:[(0,y.Y)(w,{titleWidth:200,title:P.formatMessage({id:"GbEHyg",defaultMessage:"Name"}),css:$?{paddingTop:0}:void 0,children:(0,y.Y)(u.xI,{control:N.control,name:"name",rules:{required:"Name is required"},render:({field:e,fieldState:n})=>(0,y.FD)("div",{children:[(0,y.Y)(d.f,{id:`${H}.name`,componentId:`${H}.name`,...e,onChange:n=>{e.onChange(n),N.clearErrors("name"),S()},onBlur:()=>{e.onBlur(),D()},placeholder:P.formatMessage({id:"AanBxl",defaultMessage:"my-endpoint"}),validationState:n.error?"error":void 0}),n.error&&(0,y.Y)(r.FormUI.Message,{type:"error",message:n.error.message})]})})}),"create"===e&&(0,y.Y)(w,{titleWidth:200,title:P.formatMessage({id:"yoD1c7",defaultMessage:"Usage Tracking"}),children:(0,y.Y)(u.xI,{control:N.control,name:"usageTracking",render:({field:e})=>(0,y.Y)(g.O,{value:e.value,onChange:e.onChange,componentIdPrefix:"mlflow.gateway.create-endpoint.usage-tracking"})})}),(0,y.Y)(w,{titleWidth:200,title:P.formatMessage({id:"olpQcl",defaultMessage:"Model"}),hideDivider:!0,children:(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:z.spacing.md},""),children:[(0,y.Y)(u.xI,{control:N.control,name:"provider",rules:{required:"Provider is required"},render:({field:e,fieldState:n})=>{var t;return(0,y.Y)(m.U,{value:e.value,onChange:n=>{e.onChange(n),N.setValue("modelName",""),N.setValue("existingSecretId",""),N.setValue("secretMode","new"),N.setValue("newSecret",{name:"",authMode:"",secretFields:{},configFields:{}})},error:null===(t=n.error)||void 0===t?void 0:t.message,componentIdPrefix:`${H}.provider`})}}),(0,y.Y)(u.xI,{control:N.control,name:"modelName",rules:{required:"Model is required"},render:({field:e,fieldState:n})=>{var t;return(0,y.Y)(p.o,{provider:B,value:e.value,onChange:e.onChange,error:null===(t=n.error)||void 0===t?void 0:t.message,componentIdPrefix:`${H}.model`})}}),B&&(0,y.FD)("div",{css:(0,i.AH)({marginTop:z.spacing.sm},""),children:[(0,y.Y)(a.T.Text,{bold:!0,css:(0,i.AH)({display:"block",marginBottom:z.spacing.sm},""),children:(0,y.Y)(c.A,{id:"PRwILA",defaultMessage:"Connections"})}),(0,y.Y)(h.$,{value:G,onChange:Q,provider:B,existingSecrets:E,isLoadingSecrets:R,authModes:O,defaultAuthMode:V,isLoadingProviderConfig:U,componentIdPrefix:`${H}.api-key`})]})]})})]}),(0,y.Y)("div",{css:M,children:(0,y.Y)(Y.v,{title:P.formatMessage({id:"mi7FdJ",defaultMessage:"Summary"}),children:(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:z.spacing.md},""),children:[(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:z.spacing.xs},""),children:[(0,y.Y)(a.T.Text,{bold:!0,color:"secondary",children:(0,y.Y)(c.A,{id:"a3G5A7",defaultMessage:"Provider"})}),B?(0,y.Y)(a.T.Text,{children:(0,v.aU)(B)}):(0,y.Y)(a.T.Text,{color:"secondary",children:(0,y.Y)(c.A,{id:"QnZkGt",defaultMessage:"Not configured"})})]}),(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:z.spacing.xs},""),children:[(0,y.Y)(a.T.Text,{bold:!0,color:"secondary",children:(0,y.Y)(c.A,{id:"7pkOrA",defaultMessage:"Model"})}),L?(0,y.Y)(C,{model:b,modelName:L}):(0,y.Y)(a.T.Text,{color:"secondary",children:(0,y.Y)(c.A,{id:"QnZkGt",defaultMessage:"Not configured"})})]}),(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:z.spacing.xs},""),children:[(0,y.Y)(a.T.Text,{bold:!0,color:"secondary",children:(0,y.Y)(c.A,{id:"gqFQc3",defaultMessage:"API Key"})}),(0,y.Y)(F,{secretMode:W,newSecretName:null===j||void 0===j?void 0:j.name,existingSecretId:q,existingSecrets:E})]})]})})})]}),(0,y.FD)("div",{css:(0,i.AH)({display:"flex",justifyContent:"flex-end",gap:z.spacing.sm,padding:$?`${z.spacing.md}px 0 0 0`:z.spacing.md,borderTop:`1px solid ${z.colors.border}`,flexShrink:0},""),children:[(0,y.Y)(a.B,{componentId:`${H}.cancel`,onClick:_,children:(0,y.Y)(c.A,{id:"qz9XeG",defaultMessage:"Cancel"})}),(0,y.Y)(s.T,{componentId:`${H}.submit-tooltip`,content:X,children:(0,y.Y)(a.B,{componentId:`${H}.submit`,type:"primary",onClick:N.handleSubmit(k),loading:n,disabled:K,children:"create"===e?(0,y.Y)(c.A,{id:"c4METn",defaultMessage:"Create"}):(0,y.Y)(c.A,{id:"NVDxng",defaultMessage:"Save changes"})})})]})]})},C=({model:e,modelName:n})=>{const{theme:t}=(0,a.u)(),o=(0,l.A)(),r=[];null!==e&&void 0!==e&&e.supports_function_calling&&r.push("Tools"),null!==e&&void 0!==e&&e.supports_reasoning&&r.push("Reasoning");const s=(0,S._y)(null===e||void 0===e?void 0:e.max_input_tokens),d=(0,S.BD)(null===e||void 0===e?void 0:e.input_cost_per_token),c=(0,S.BD)(null===e||void 0===e?void 0:e.output_cost_per_token);return(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:t.spacing.xs,minWidth:0,maxWidth:"100%"},""),children:[(0,y.Y)(a.T.Text,{bold:!0,css:(0,i.AH)({fontSize:t.typography.fontSizeSm,wordBreak:"break-all",overflowWrap:"anywhere"},""),children:n}),r.length>0&&(0,y.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:t.typography.fontSizeSm,marginLeft:t.spacing.sm},""),children:r.join(", ")}),e&&(s||d||c)&&(0,y.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:2,marginLeft:t.spacing.sm,fontSize:t.typography.fontSizeSm,color:t.colors.textSecondary},""),children:[s&&(0,y.Y)("span",{children:o.formatMessage({id:"HFavpn",defaultMessage:"Max input: {tokens}"},{tokens:s})}),(d||c)&&(0,y.Y)("span",{children:o.formatMessage({id:"WFEeyZ",defaultMessage:"Cost: {input} in / {output} out"},{input:null!==d&&void 0!==d?d:"-",output:null!==c&&void 0!==c?c:"-"})})]})]})},F=({secretMode:e,newSecretName:n,existingSecretId:t,existingSecrets:i})=>{var o;const r="new"===e?n:null===i||void 0===i||null===(o=i.find(e=>e.secret_id===t))||void 0===o?void 0:o.secret_name;return r?(0,y.Y)(a.T.Text,{children:r}):(0,y.Y)(a.T.Text,{color:"secondary",children:(0,y.Y)(c.A,{id:"QnZkGt",defaultMessage:"Not configured"})})};var T=t(71952),I=t(85344);var k={name:"7lphdr",styles:"width:100% !important"};const _=({open:e,onClose:n,onSuccess:t})=>{const i=(0,l.A)(),{form:o,isLoading:a,error:r,resetErrors:d,selectedModel:c,isFormComplete:m,handleSubmit:p,handleCancel:g,handleNameBlur:h}=(0,T.F)({onSuccess:e=>{o.reset(),null===t||void 0===t||t(e),n()},onCancel:()=>{o.reset(),d(),n()}});return(0,y.Y)(s.d,{componentId:"mlflow.gateway.create-endpoint-modal",title:i.formatMessage({id:"S50iFK",defaultMessage:"Create endpoint"}),visible:e,onCancel:g,footer:null,size:"wide",css:k,children:(0,y.Y)(u.Op,{...o,children:(0,y.Y)(b,{mode:"create",isSubmitting:a,error:r,errorMessage:(0,I.m)(r),resetErrors:d,selectedModel:c,isFormComplete:m,onSubmit:p,onCancel:g,onNameBlur:h,componentIdPrefix:"mlflow.gateway.create-endpoint-modal",embedded:!0})})})}},6420:function(e,n,t){t.d(n,{BD:function(){return o},_y:function(){return i},aN:function(){return s}});const i=e=>null===e||void 0===e?null:e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString(),o=e=>{if(null===e||void 0===e)return null;if(0===e)return"Free";const n=1e6*e;return n<.01?`$${n.toFixed(4)}/1M`:`$${n.toFixed(2)}/1M`},a=e=>{const n=e.match(/(\d{4})(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])(?!\d)/);if(n){const[,e,t,i]=n;return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(i,10))}const t=e.match(/(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])/);if(t){const[,e,n,i]=t;return new Date(parseInt(e,10),parseInt(n,10)-1,parseInt(i,10))}const i=e.match(/-(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])(?:-|$)/);if(i){const[,e,n]=i,t=(new Date).getFullYear();return new Date(t,parseInt(e,10)-1,parseInt(n,10))}return null},r=e=>{const n=e.replace(/-\d{4}-\d{2}-\d{2}$/,"").replace(/-\d{8}$/,""),t=n.match(/(?:^|[/-])o(\d+)(?:-|$)/);if(t)return parseInt(t[1],10);const i=n.match(/-(\d+)\.(\d+)/);if(i)return parseFloat(`${i[1]}.${i[2]}`);const o=n.match(/-(\d)(\d)-/);if(o)return parseFloat(`${o[1]}.${o[2]}`);const a=n.match(/(\d+)-(\d{1,2})$/);if(a)return parseFloat(`${a[1]}.${a[2]}`);const r=n.match(/(\d+)-(\d{1,2})-[a-z]/i);if(r)return parseFloat(`${r[1]}.${r[2]}`);const s=n.match(/-(\d)o?(?:-|$)/);return s?parseInt(s[1],10):0},s=e=>[...e].sort((e,n)=>{const t=r(e.model),i=r(n.model);if(t!==i)return i-t;const o=a(e.model),s=a(n.model);return o&&s?s.getTime()-o.getTime():o&&!s?-1:!o&&s?1:n.model.localeCompare(e.model)})},6459:function(e,n,t){t.d(n,{v:function(){return r}});var i=t(68248),o=t(27757),a=t(73408);const r=({title:e,children:n})=>{const{theme:t}=(0,o.u)();return(0,a.FD)("div",{css:(0,i.AH)({border:`1px solid ${t.colors.borderDecorative}`,borderRadius:t.general.borderRadiusBase,padding:t.spacing.md},""),children:[(0,a.Y)(o.T.Title,{level:3,css:(0,i.AH)({marginBottom:t.spacing.md},""),children:e}),n]})}},8264:function(e,n,t){t.d(n,{o:function(){return r}});var i=t(49708),o=t(25117);const a=({queryKey:e})=>{const[,{provider:n}]=e;return o.t.listModels(n)},r=({provider:e}={})=>{var n,t;const o=(0,i.I)(["gateway_models",{provider:e}],{queryFn:a,retry:!1,enabled:void 0!==e});return{data:null===(n=o.data)||void 0===n?void 0:n.models,error:null!==(t=o.error)&&void 0!==t?t:void 0,isLoading:o.isLoading,refetch:o.refetch}}},35583:function(e,n,t){t.d(n,{o:function(){return D}});var i=t(68248),o=t(46709),a=t(27757),r=t(82716),s=t(66916),d=t(7655),l=t(40724),c=t(79081),u=t(8264),m=t(6420),p=t(73408);var g={name:"1nl7725",styles:"display:flex;flex-direction:column;align-items:flex-end;gap:2px"};const h=({inputCost:e,outputCost:n})=>{const{theme:t}=(0,a.u)(),o=e=>{if(void 0===e)return"-";const n=1e6*e;return n<.01?`$${n.toFixed(4)}`:`$${n.toFixed(2)}`};return(0,p.FD)("div",{css:g,children:[(0,p.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:t.typography.fontSizeSm},""),children:o(e)}),(0,p.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:t.typography.fontSizeSm},""),children:o(n)})]})};var f={name:"zl1inp",styles:"display:flex;justify-content:center"},v={name:"ti75j2",styles:"margin:0"},y={name:"ovk77c",styles:"min-width:0"},x={name:"2qga7i",styles:"text-align:right"},w={name:"2qga7i",styles:"text-align:right"};const Y=({model:e,isSelected:n,onSelect:t})=>{const{theme:o}=(0,a.u)(),s=(0,d.A)(),l=(0,m._y)(e.max_input_tokens);return(0,p.FD)("div",{onClick:()=>t(e.model),css:(0,i.AH)({display:"grid",gridTemplateColumns:"40px 1fr 110px 100px",gap:o.spacing.sm,padding:`${o.spacing.sm}px ${o.spacing.md}px`,cursor:"pointer",backgroundColor:n?o.colors.actionTertiaryBackgroundPress:"transparent","&:hover":{backgroundColor:n?o.colors.actionTertiaryBackgroundPress:o.colors.actionTertiaryBackgroundHover},borderBottom:`1px solid ${o.colors.borderDecorative}`,"&:last-child":{borderBottom:"none"},alignItems:"center"},""),children:[(0,p.Y)("div",{css:f,children:(0,p.Y)(r.Radio,{value:e.model,css:v})}),(0,p.FD)("div",{css:y,children:[(0,p.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:o.spacing.xs},""),children:[(0,p.Y)(a.T.Text,{bold:!0,children:e.model}),e.deprecation_date&&(0,p.Y)(c.T,{componentId:"mlflow.gateway.model-selector-modal.deprecation-tooltip",content:s.formatMessage({id:"lo4NN3",defaultMessage:"This model will be deprecated on {date}"},{date:e.deprecation_date}),children:(0,p.Y)(r.WarningFillIcon,{css:(0,i.AH)({fontSize:o.typography.fontSizeSm,color:o.colors.textValidationWarning},"")})})]}),(0,p.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:o.typography.fontSizeSm,display:"block"},""),children:[e.supports_function_calling&&"Tools",e.supports_reasoning&&"Reasoning",e.supports_prompt_caching&&"Caching",e.supports_response_schema&&"Structured"].filter(Boolean).join(", ")||"\xa0"})]}),(0,p.Y)("div",{css:x,children:(0,p.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:o.typography.fontSizeSm},""),children:l||"-"})}),(0,p.Y)("div",{css:w,children:(0,p.Y)(h,{inputCost:e.input_cost_per_token,outputCost:e.output_cost_per_token})})]})};var S={name:"1ks9uvr",styles:"display:flex;justify-content:space-between;align-items:center;width:100%"},A={name:"1ff36h2",styles:"flex-grow:1"},M={name:"2qga7i",styles:"text-align:right"},b={name:"muj0kx",styles:"text-align:right;display:flex;flex-direction:column;align-items:flex-end"},C={name:"1kxd8xu",styles:"max-height:400px;overflow-y:auto"},F={name:"1d3w5wq",styles:"width:100%"},T={name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"},I={name:"opde7s",styles:"color:inherit"},k={name:"1djxupe",styles:"width:14px;height:14px"};const _=({isOpen:e,onClose:n,onSelect:t,provider:g})=>{const{theme:h}=(0,a.u)(),f=(0,d.A)(),[v,y]=(0,o.useState)(null),[x,w]=(0,o.useState)(""),[_,D]=(0,o.useState)({search:"",capabilities:{tools:!1,reasoning:!1,promptCaching:!1,structuredOutput:!1}}),[H,$]=(0,o.useState)(!1),{data:z,isLoading:P}=(0,u.o)({provider:g||void 0}),N=x.trim().length>0,B=Object.values(_.capabilities).some(Boolean),L=Object.values(_.capabilities).filter(Boolean).length,W=(0,o.useMemo)(()=>{if(!z)return[];const e=new Date;e.setHours(0,0,0,0);const n=z.filter(n=>{if(n.deprecation_date){if(new Date(n.deprecation_date)<e)return!1}return!(_.search&&!n.model.toLowerCase().includes(_.search.toLowerCase()))&&(!(_.capabilities.tools&&!n.supports_function_calling)&&(!(_.capabilities.reasoning&&!n.supports_reasoning)&&(!(_.capabilities.promptCaching&&!n.supports_prompt_caching)&&!(_.capabilities.structuredOutput&&!n.supports_response_schema))))});return(0,m.aN)(n)},[z,_]),q=(0,o.useMemo)(()=>null===z||void 0===z?void 0:z.find(e=>e.model===v),[z,v]),j=(0,o.useCallback)(()=>{y(null),w(""),D({search:"",capabilities:{tools:!1,reasoning:!1,promptCaching:!1,structuredOutput:!1}}),n()},[n]),E=(0,o.useCallback)(e=>{e.stopPropagation(),D(e=>({...e,capabilities:{tools:!1,reasoning:!1,promptCaching:!1,structuredOutput:!1}}))},[]),R=(0,o.useCallback)(e=>{w(e),e.trim()&&y(null)},[]),O=(0,o.useCallback)(e=>{y(e),w("")},[]),V=(0,o.useCallback)(()=>{N?(t({model:x.trim(),provider:g,supports_function_calling:!1}),j()):q&&(t(q),j())},[N,x,q,g,t,j]),U=N?!x.trim():!q;return(0,p.Y)(c.d,{componentId:"mlflow.gateway.model-selector-modal",title:f.formatMessage({id:"qNCHNh",defaultMessage:"Select model"}),visible:e,onCancel:j,size:"wide",footer:(0,p.FD)("div",{css:S,children:[(0,p.Y)("div",{children:(null===q||void 0===q?void 0:q.deprecation_date)&&(0,p.FD)(a.T.Text,{color:"warning",css:(0,i.AH)({display:"flex",alignItems:"center",gap:h.spacing.xs},""),children:[(0,p.Y)(r.WarningFillIcon,{}),(0,p.Y)(l.A,{id:"yFl8nB",defaultMessage:"This model will be deprecated on {date}",values:{date:q.deprecation_date}})]})}),(0,p.FD)("div",{css:(0,i.AH)({display:"flex",gap:h.spacing.sm},""),children:[(0,p.Y)(a.B,{componentId:"mlflow.gateway.model-selector-modal.cancel",onClick:j,children:f.formatMessage({id:"qz9XeG",defaultMessage:"Cancel"})}),(0,p.Y)(a.B,{componentId:"mlflow.gateway.model-selector-modal.confirm",type:"primary",disabled:U,onClick:V,children:f.formatMessage({id:"UI3HSV",defaultMessage:"Select"})})]})]}),children:(0,p.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:h.spacing.md},""),children:[(0,p.FD)("div",{css:(0,i.AH)({display:"flex",gap:h.spacing.sm,alignItems:"center"},""),children:[(0,p.Y)(s.I,{componentId:"mlflow.gateway.model-selector-modal.search",placeholder:f.formatMessage({id:"2RgAyy",defaultMessage:"Search"}),prefix:(0,p.Y)(s.S,{}),value:_.search,onChange:e=>D(n=>({...n,search:e.target.value})),css:A}),(0,p.FD)(a.aw.Root,{componentId:"mlflow.gateway.model-selector-modal.filter-popover",open:H,onOpenChange:$,children:[(0,p.Y)(a.aw.Trigger,{asChild:!0,children:(0,p.Y)(a.B,{componentId:"mlflow.gateway.model-selector-modal.filter-button",endIcon:(0,p.Y)(r.ChevronDownIcon,{}),css:(0,i.AH)({border:B?`1px solid ${h.colors.actionDefaultBorderFocus} !important`:"",backgroundColor:B?`${h.colors.actionDefaultBackgroundHover} !important`:""},""),children:(0,p.FD)("div",{css:(0,i.AH)({display:"flex",gap:h.spacing.sm,alignItems:"center"},""),children:[(0,p.Y)(r.FilterIcon,{}),f.formatMessage({id:"mitP3X",defaultMessage:"Capability{count}"},{count:B?` (${L})`:""}),B&&(0,p.Y)(s.X,{css:(0,i.AH)({fontSize:12,cursor:"pointer",color:h.colors.grey400,"&:hover":{color:h.colors.grey600}},""),onClick:E})]})})}),(0,p.Y)(a.aw.Content,{align:"end",css:(0,i.AH)({padding:h.spacing.md,minWidth:200},""),children:(0,p.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:h.spacing.sm},""),children:[(0,p.Y)("div",{css:(0,i.AH)({fontWeight:h.typography.typographyBoldFontWeight,marginBottom:h.spacing.xs},""),children:(0,p.Y)(l.A,{id:"sj0gOQ",defaultMessage:"Capabilities"})}),(0,p.Y)(r.Checkbox,{componentId:"mlflow.gateway.model-selector-modal.filter.tools",isChecked:_.capabilities.tools,onChange:()=>D(e=>({...e,capabilities:{...e.capabilities,tools:!e.capabilities.tools}})),children:(0,p.Y)(l.A,{id:"JaanQY",defaultMessage:"Tools"})}),(0,p.Y)(r.Checkbox,{componentId:"mlflow.gateway.model-selector-modal.filter.reasoning",isChecked:_.capabilities.reasoning,onChange:()=>D(e=>({...e,capabilities:{...e.capabilities,reasoning:!e.capabilities.reasoning}})),children:(0,p.Y)(l.A,{id:"YLMjFk",defaultMessage:"Reasoning"})}),(0,p.Y)(r.Checkbox,{componentId:"mlflow.gateway.model-selector-modal.filter.promptCaching",isChecked:_.capabilities.promptCaching,onChange:()=>D(e=>({...e,capabilities:{...e.capabilities,promptCaching:!e.capabilities.promptCaching}})),children:(0,p.Y)(l.A,{id:"xyQFjH",defaultMessage:"Prompt Caching"})}),(0,p.Y)(r.Checkbox,{componentId:"mlflow.gateway.model-selector-modal.filter.structuredOutput",isChecked:_.capabilities.structuredOutput,onChange:()=>D(e=>({...e,capabilities:{...e.capabilities,structuredOutput:!e.capabilities.structuredOutput}})),children:(0,p.Y)(l.A,{id:"oMP6X7",defaultMessage:"Structured Output"})})]})})]})]}),P?(0,p.Y)("div",{css:(0,i.AH)({display:"flex",justifyContent:"center",padding:h.spacing.lg},""),children:(0,p.Y)(a.S,{size:"large"})}):(0,p.FD)("div",{css:(0,i.AH)({border:`1px solid ${h.colors.borderDecorative}`,borderRadius:h.general.borderRadiusBase,overflow:"hidden",opacity:N?.5:1,pointerEvents:N?"none":"auto",transition:"opacity 0.2s ease"},""),children:[(0,p.FD)("div",{css:(0,i.AH)({display:"grid",gridTemplateColumns:"40px 1fr 110px 100px",gap:h.spacing.sm,padding:`${h.spacing.sm}px ${h.spacing.md}px`,backgroundColor:h.colors.backgroundSecondary,borderBottom:`1px solid ${h.colors.borderDecorative}`,fontWeight:h.typography.typographyBoldFontWeight,fontSize:h.typography.fontSizeSm,color:h.colors.textSecondary},""),children:[(0,p.Y)("div",{}),(0,p.Y)("div",{children:(0,p.Y)(l.A,{id:"C8Jj/L",defaultMessage:"Name"})}),(0,p.Y)("div",{css:M,children:(0,p.Y)(l.A,{id:"ew8ReB",defaultMessage:"Max Input Tokens"})}),(0,p.FD)("div",{css:b,children:[(0,p.Y)("span",{children:(0,p.Y)(l.A,{id:"ZBZBrn",defaultMessage:"Input /1M"})}),(0,p.Y)("span",{children:(0,p.Y)(l.A,{id:"58/xE7",defaultMessage:"Output /1M"})})]})]}),(0,p.Y)("div",{css:C,children:0===W.length?(0,p.Y)("div",{css:(0,i.AH)({padding:h.spacing.lg,textAlign:"center"},""),children:(0,p.Y)(a.T.Text,{color:"secondary",children:f.formatMessage({id:"M/SGM4",defaultMessage:"No models match your filters"})})}):(0,p.Y)(r.Radio.Group,{name:"model-selector",componentId:"mlflow.gateway.model-selector-modal.radio-group",value:v||"",onChange:e=>O(e.target.value),css:F,children:W.map(e=>(0,p.Y)(Y,{model:e,isSelected:v===e.model,onSelect:O},e.model))})})]}),(0,p.FD)("div",{css:T,children:[(0,p.Y)(a.T.Text,{color:"secondary",size:"sm",children:f.formatMessage({id:"tyUmNa",defaultMessage:"{count, plural, one {# model} other {# models}} available"},{count:W.length})}),v&&(0,p.FD)("div",{onClick:()=>y(null),css:(0,i.AH)({display:"flex",alignItems:"center",gap:h.spacing.xs,cursor:"pointer",color:h.colors.textSecondary,"&:hover":{color:h.colors.textPrimary}},""),children:[(0,p.Y)(a.T.Text,{size:"sm",css:I,children:(0,p.Y)(l.A,{id:"PX5Nlz",defaultMessage:"Clear selection"})}),(0,p.Y)(s.X,{css:k})]})]}),(0,p.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:h.spacing.md,marginTop:h.spacing.sm},""),children:[(0,p.Y)("div",{css:(0,i.AH)({flex:1,height:1,backgroundColor:h.colors.borderDecorative},"")}),(0,p.Y)(a.T.Text,{color:"secondary",size:"sm",children:(0,p.Y)(l.A,{id:"0+djpP",defaultMessage:"or"})}),(0,p.Y)("div",{css:(0,i.AH)({flex:1,height:1,backgroundColor:h.colors.borderDecorative},"")})]}),(0,p.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:h.spacing.xs,opacity:v?.5:1,transition:"opacity 0.2s ease"},""),children:[(0,p.Y)(a.T.Text,{bold:!0,children:(0,p.Y)(l.A,{id:"w4bpXQ",defaultMessage:"Use a custom model name"})}),(0,p.Y)(s.I,{componentId:"mlflow.gateway.model-selector-modal.custom-model",placeholder:f.formatMessage({id:"+WPAn1",defaultMessage:"Enter model name..."}),value:x,onChange:e=>R(e.target.value),disabled:!!v}),(0,p.Y)(a.T.Text,{color:"secondary",size:"sm",children:(0,p.Y)(l.A,{id:"3n8Eue",defaultMessage:"Enter a model name not listed above. Capabilities may not be detected."})})]})]})})},D=({provider:e,value:n,onChange:t,disabled:c,error:m,componentIdPrefix:g="mlflow.gateway.model-select"})=>{const{theme:h}=(0,a.u)(),f=(0,d.A)(),[v,y]=(0,o.useState)(!1),{data:x}=(0,u.o)({provider:e||void 0}),w=(0,o.useMemo)(()=>null===x||void 0===x?void 0:x.find(e=>e.model===n),[x,n]),Y=(0,o.useCallback)(()=>{!c&&e&&y(!0)},[c,e]),S=(0,o.useCallback)(e=>{t(e.model)},[t]),A=(0,o.useCallback)(()=>{y(!1)},[]);return(0,p.FD)("div",{children:[(0,p.Y)(r.FormUI.Label,{htmlFor:g,children:(0,p.Y)(l.A,{id:"sptgX6",defaultMessage:"Model"})}),(0,p.Y)(s.I,{id:g,componentId:g,placeholder:e?f.formatMessage({id:"C5WOXw",defaultMessage:"Click to select a model"}):f.formatMessage({id:"rRaThb",defaultMessage:"Select a provider first"}),readOnly:!0,disabled:c||!e,onClick:Y,value:n||"",validationState:m?"error":void 0,prefix:n?(0,p.Y)(r.ModelsIcon,{}):void 0,css:(0,i.AH)({cursor:c||!e?"not-allowed":"pointer","& input":{cursor:c||!e?"not-allowed":"pointer"}},"")}),m&&(0,p.Y)(r.FormUI.Message,{type:"error",message:m}),w&&(0,p.Y)(H,{model:w}),(0,p.Y)(_,{isOpen:v,onClose:A,onSelect:S,provider:e})]})},H=(0,o.memo)(function({model:e}){const{theme:n}=(0,a.u)(),t=(0,o.useMemo)(()=>{const n=[];return e.supports_function_calling&&n.push("Tools"),e.supports_reasoning&&n.push("Reasoning"),e.supports_prompt_caching&&n.push("Caching"),n},[e.supports_function_calling,e.supports_reasoning,e.supports_prompt_caching]);return 0===t.length?null:(0,p.Y)("div",{css:(0,i.AH)({marginTop:n.spacing.xs,display:"flex",alignItems:"center",gap:n.spacing.xs,flexWrap:"wrap"},""),children:t.map(e=>(0,p.Y)(r.Tag,{componentId:`mlflow.gateway.model-select.capability.${e.toLowerCase()}`,children:e},e))})})},71952:function(e,n,t){t.d(n,{F:function(){return g}});var i=t(884),o=t(46709),a=t(39595),r=t(61060),s=t(25117);const d=()=>{const e=(0,a.jE)();return(0,r.n)({mutationFn:e=>s.t.createEndpoint(e),onSuccess:()=>{e.invalidateQueries(["gateway_endpoints"])}})};var l=t(44341),c=t(1422),u=t(8264),m=t(30431),p=t(87032);function g({onSuccess:e,onCancel:n}={}){const t=(0,i.mN)({defaultValues:{name:"",provider:"",modelName:"",secretMode:"new",existingSecretId:"",newSecret:{name:"",authMode:"",secretFields:{},configFields:{}},usageTracking:!0,experimentId:""}}),{mutateAsync:a,error:r,isLoading:s,reset:g}=d(),{mutateAsync:h,error:f,isLoading:v,reset:y}=(0,l.w)(),{mutateAsync:x,error:w,isLoading:Y,reset:S}=(0,c.H)(),A=(0,o.useCallback)(()=>{g(),y(),S()},[g,y,S]),M=s||v||Y,b=r||f||w,C=t.watch("provider"),F=t.watch("modelName"),T=t.watch("secretMode"),I=t.watch("existingSecretId"),k=t.watch("newSecret.name"),_=t.watch("newSecret.secretFields"),D=(0,o.useRef)(C);(0,o.useEffect)(()=>{const e=D.current;D.current=C,e&&C&&e!==C&&(t.setValue("modelName",""),t.setValue("secretMode","new"),t.setValue("existingSecretId",""),t.setValue("newSecret",{name:"",authMode:"",secretFields:{},configFields:{}}),A())},[C,t,A]);const{data:H}=(0,u.o)({provider:C||void 0}),$=null===H||void 0===H?void 0:H.find(e=>e.model===F),{data:z}=(0,m.c)(),P=Object.values(_||{}).some(e=>!!e);return{form:t,isLoading:M,error:b,resetErrors:A,existingEndpoints:z,selectedModel:$,isFormComplete:!!C&&!!F&&("existing"===T?!!I:!!k&&P),handleSubmit:async n=>{try{let t=n.existingSecretId;if("new"===n.secretMode){const e={...n.newSecret.configFields};n.newSecret.authMode&&(e.auth_mode=n.newSecret.authMode);t=(await h({secret_name:n.newSecret.name,secret_value:n.newSecret.secretFields,provider:n.provider,auth_config:Object.keys(e).length>0?e:void 0})).secret.secret_id}const i=(await x({name:`${n.name||"endpoint"}-${n.modelName}`,secret_id:t,provider:n.provider,model_name:n.modelName})).model_definition.model_definition_id,o=await a({name:n.name||void 0,model_configs:[{model_definition_id:i,linkage_type:"PRIMARY",weight:1}],usage_tracking:n.usageTracking});null===e||void 0===e||e(o.endpoint)}catch{}},handleCancel:()=>{null===n||void 0===n||n()},handleNameBlur:()=>{const e=t.getValues("name");if(e){if(!(0,p.j8)(e))return void t.setError("name",{type:"manual",message:"Name can only contain letters, numbers, underscores, hyphens, and dots. Spaces and special characters are not allowed."});null!==z&&void 0!==z&&z.some(n=>n.name===e)&&t.setError("name",{type:"manual",message:"An endpoint with this name already exists"})}}}}},73716:function(e,n,t){t.d(n,{t:function(){return r}});var i=t(46709),o=t(87078),a=t(45472);function r({provider:e}){const{data:n,isLoading:t}=(0,o.d)(),r=(0,i.useMemo)(()=>n&&e?n.filter(n=>n.provider===e):[],[n,e]),{data:s,isLoading:d}=(0,a.D)({provider:e}),l=(0,i.useMemo)(()=>{var e;return null!==(e=null===s||void 0===s?void 0:s.auth_modes)&&void 0!==e?e:[]},[null===s||void 0===s?void 0:s.auth_modes]),c=null===s||void 0===s?void 0:s.default_mode,u=(0,i.useCallback)(e=>{var n;if(l.length){if(e){const n=l.find(n=>n.mode===e);if(n)return n}return null!==(n=l.find(e=>e.mode===c))&&void 0!==n?n:l[0]}},[l,c]);return{existingSecrets:r,isLoadingSecrets:t,authModes:l,defaultAuthMode:c,selectedAuthMode:u(c),isLoadingProviderConfig:d,hasExistingSecrets:r.length>0}}},85344:function(e,n,t){t.d(n,{m:function(){return a}});const i=e=>{const n=e.toLowerCase();return n.includes("unique constraint failed")||n.includes("duplicate key value violates unique constraint")||n.includes("duplicate entry")||n.includes("violation of unique key constraint")||n.includes("uniqueviolation")||n.includes("integrityerror")||n.includes("already exists")},o=e=>{const n=e.toLowerCase();return n.includes("secrets.secret_name")||n.includes("secret_name")||n.includes("secret with name")},a=(e,n={})=>{if(null===e||void 0===e||!e.message)return null;const{entityType:t,action:a="creating"}=n,r=e.message;if(i(r))return(e=>{const n=e.toLowerCase();return n.includes("endpoints.name")||n.includes("endpoint_name")})(r)?"An endpoint with this name already exists. Please choose a different name.":o(r)?"secret"===t?"A secret with this name already exists. Please choose a different name or use an existing secret.":"An API key with this name already exists. Please choose a different name or use an existing API key.":"A record with this value already exists. Please use a unique value.";if(r.length>200){return`An error occurred while ${"updating"===a?"updating":"deleting"===a?"deleting":"creating"} the ${"secret"===t?"secret":"endpoint"===t?"endpoint":"resource"}. Please try again.`}return r}},87032:function(e,n,t){t.d(n,{Bm:function(){return a},Ui:function(){return r},W_:function(){return l},cj:function(){return s},j8:function(){return c},lx:function(){return o},t0:function(){return d}});const i="gateway:/";let o=function(e){return e.GATEWAY="gateway",e.OTHER="other",e}({});const a=e=>!e||e.startsWith(i)?o.GATEWAY:o.OTHER,r=e=>{if(null!==e&&void 0!==e&&e.startsWith(i))return e.replace(i,"")},s=e=>`${i}${e}`,d=e=>Boolean(e&&!e.startsWith(i)),l=e=>{var n;const t=null===(n=e.model_mappings)||void 0===n?void 0:n[0];if(null!==t&&void 0!==t&&t.model_definition)return{id:t.endpoint_id,provider:t.model_definition.provider,modelName:t.model_definition.model_name}},c=e=>/^[a-zA-Z0-9_\-.]+$/.test(e)},93422:function(e,n,t){t.d(n,{$:function(){return w}});var i=t(68248),o=t(46709),a=t(27757),r=t(82716),s=t(7655),d=t(40724),l=t(98332),c=t(87856),u=t(87078),m=t(75329);function p(e){var n;return e&&null!==(n=e.auth_config)&&void 0!==n?n:null}var g=t(64226),h=t(22138),f=t(73408);const v=({secret:e})=>{const{theme:n}=(0,a.u)(),t=(0,o.useMemo)(()=>{var n;return e&&null!==(n=e.auth_config)&&void 0!==n?n:null},[e]);if(!t)return null;const r=Object.entries(t).filter(([e])=>"auth_mode"!==e);return 0===r.length?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"w2WWoM",defaultMessage:"Config:"})}),(0,f.Y)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:n.spacing.xs/2},""),children:r.map(([e,t])=>(0,f.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:n.spacing.xs},""),children:[(0,f.FD)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:n.typography.fontSizeSm},""),children:[(0,m.u3)(e),":"]}),(0,f.Y)(a.T.Text,{css:(0,i.AH)({fontFamily:"monospace",fontSize:n.typography.fontSizeSm},""),children:String(t)})]},e))})]})};var y={name:"1d3w5wq",styles:"width:100%"};const x=({provider:e,value:n,onChange:t,disabled:s,error:l})=>{var c;const{theme:x}=(0,a.u)(),{data:w,isLoading:Y}=(0,u.d)({provider:e}),S=(0,o.useMemo)(()=>e?null===w||void 0===w?void 0:w.filter(n=>n.provider===e):w,[e,w]),A=(0,o.useMemo)(()=>n?null===S||void 0===S?void 0:S.find(e=>e.secret_id===n):void 0,[n,S]);return Y?(0,f.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:x.spacing.sm},""),children:[(0,f.Y)(a.S,{size:"small"}),(0,f.Y)(d.A,{id:"zgpnjD",defaultMessage:"Loading API keys..."})]}):(0,f.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:x.spacing.sm,width:"100%"},""),children:[(0,f.FD)("div",{children:[(0,f.Y)(r.FormUI.Label,{htmlFor:"mlflow.gateway.create-endpoint.secret-select",children:(0,f.Y)(d.A,{id:"cNkqxA",defaultMessage:"API key"})}),(0,f.Y)(r.SimpleSelect,{id:"mlflow.gateway.create-endpoint.secret-select",componentId:"mlflow.gateway.create-endpoint.secret-select",value:n,onChange:({target:e})=>t(e.value),disabled:s||!(null!==S&&void 0!==S&&S.length),placeholder:null!==S&&void 0!==S&&S.length?"Select an API key":"No API keys available for this provider",validationState:l?"error":void 0,contentProps:{matchTriggerWidth:!0,maxHeight:300},css:y,children:null===S||void 0===S?void 0:S.map(e=>(0,f.Y)(r.SimpleSelectOption,{value:e.secret_id,children:e.secret_name},e.secret_id))}),l&&(0,f.Y)(r.FormUI.Message,{type:"error",message:l})]}),A&&(0,f.FD)("div",{css:(0,i.AH)({backgroundColor:x.colors.backgroundSecondary,borderRadius:x.general.borderRadiusBase,padding:x.spacing.md,display:"flex",flexDirection:"column"},""),children:[(0,f.Y)(a.T.Text,{bold:!0,size:"sm",color:"secondary",children:(0,f.Y)(d.A,{id:"KwJRcV",defaultMessage:"API key details"})}),(0,f.FD)("div",{css:(0,i.AH)({display:"grid",gridTemplateColumns:"auto 1fr",gap:`${x.spacing.xs}px ${x.spacing.md}px`,fontSize:x.typography.fontSizeSm,marginTop:x.spacing.md},""),children:[(null===(c=p(A))||void 0===c?void 0:c.auth_mode)&&(0,f.FD)(f.FK,{children:[(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"6I8pKa",defaultMessage:"Auth Type:"})}),(0,f.Y)(a.T.Text,{children:(0,m.Qs)(String(p(A).auth_mode))})]}),(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"rvRhzv",defaultMessage:"Masked Key:"})}),(0,f.Y)(h.R,{maskedValue:A.masked_values}),(0,f.Y)(v,{secret:A}),(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"X1nbeT",defaultMessage:"Last Updated:"})}),(0,f.Y)(a.T.Text,{children:(0,f.Y)(g.f,{date:new Date(A.last_updated_at)})}),(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"evVfYj",defaultMessage:"Created:"})}),(0,f.Y)(a.T.Text,{children:(0,f.Y)(g.f,{date:new Date(A.created_at)})}),A.created_by&&(0,f.FD)(f.FK,{children:[(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"hpAK1G",defaultMessage:"Created by:"})}),(0,f.Y)(a.T.Text,{children:A.created_by})]})]})]})]})};function w({value:e,onChange:n,provider:t,existingSecrets:l,isLoadingSecrets:c,authModes:u,defaultAuthMode:m,isLoadingProviderConfig:p,errors:g,disabled:h,componentIdPrefix:v="mlflow.gateway.api-key-config"}){const{theme:y}=(0,a.u)(),{formatMessage:w}=(0,s.A)(),S=l.length>0,A=u.length>1,M=(0,o.useMemo)(()=>{var n;if(u.length){if(e.newSecret.authMode){const n=u.find(n=>n.mode===e.newSecret.authMode);if(n)return n}return null!==(n=u.find(e=>e.mode===m))&&void 0!==n?n:u[0]}},[u,e.newSecret.authMode,m]);(0,o.useEffect)(()=>{"new"===e.mode&&!e.newSecret.authMode&&M&&n({...e,newSecret:{...e.newSecret,authMode:M.mode}})},[e,M,n]);const b=(0,o.useCallback)(t=>{n({...e,mode:t})},[n,e]),C=(0,o.useCallback)(t=>{n({...e,existingSecretId:t})},[n,e]),F=(0,o.useCallback)(t=>{n({...e,newSecret:t})},[n,e]),T=(0,o.useCallback)(n=>{F({...e.newSecret,name:n})},[F,e.newSecret]),I=(0,o.useCallback)(n=>{F({...e.newSecret,authMode:n,secretFields:{},configFields:{}})},[F,e.newSecret]),k=(0,o.useCallback)((n,t)=>{F({...e.newSecret,secretFields:{...e.newSecret.secretFields,[n]:t}})},[F,e.newSecret]),_=(0,o.useCallback)((n,t)=>{F({...e.newSecret,configFields:{...e.newSecret.configFields,[n]:t}})},[F,e.newSecret]);return t?p?(0,f.Y)("div",{css:(0,i.AH)({display:"flex",justifyContent:"center",padding:y.spacing.md},""),children:(0,f.Y)(a.S,{size:"small"})}):(0,f.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:y.spacing.md},""),children:[(0,f.FD)(r.Radio.Group,{componentId:`${v}.mode`,name:`${v}.mode`,value:e.mode,onChange:e=>b(e.target.value),layout:"horizontal",disabled:h,children:[(0,f.Y)(r.Radio,{value:"new",children:(0,f.Y)(d.A,{id:"2pSaCv",defaultMessage:"Create new API key"})}),(0,f.Y)(r.Radio,{value:"existing",disabled:!S,children:(0,f.Y)(d.A,{id:"/NF6sl",defaultMessage:"Use existing API key"})})]}),!S&&(0,f.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:y.typography.fontSizeSm},""),children:(0,f.Y)(d.A,{id:"EBJq8A",defaultMessage:"No existing API keys for this provider."})}),"existing"===e.mode?(0,f.Y)(x,{provider:t,value:e.existingSecretId,onChange:C,disabled:h,error:null===g||void 0===g?void 0:g.existingSecretId}):(0,f.Y)(Y,{value:e.newSecret,provider:t,selectedAuthMode:M,authModes:u,hasMultipleAuthModes:A,defaultAuthMode:m,errors:null===g||void 0===g?void 0:g.newSecret,disabled:h,componentIdPrefix:v,onNameChange:T,onAuthModeChange:I,onSecretFieldChange:k,onConfigFieldChange:_})]}):(0,f.Y)(a.T.Text,{color:"secondary",children:(0,f.Y)(d.A,{id:"wx0s66",defaultMessage:"Select a provider and model to configure API key"})})}function Y({value:e,provider:n,selectedAuthMode:t,authModes:u,hasMultipleAuthModes:p,defaultAuthMode:g,errors:h,disabled:v,componentIdPrefix:y,onNameChange:x,onAuthModeChange:w,onSecretFieldChange:Y,onConfigFieldChange:S}){const{theme:A}=(0,a.u)(),{formatMessage:M}=(0,s.A)(),b=(0,o.useMemo)(()=>{var e,i;const o=[...(null!==(e=null===t||void 0===t?void 0:t.secret_fields)&&void 0!==e?e:[]).map(e=>({...e,fieldType:"secret"})),...(null!==(i=null===t||void 0===t?void 0:t.config_fields)&&void 0!==i?i:[]).map(e=>({...e,fieldType:"config"}))];return(0,m.Sm)(o,n)},[null===t||void 0===t?void 0:t.secret_fields,null===t||void 0===t?void 0:t.config_fields,n]);return(0,f.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:A.spacing.md},""),children:[(0,f.FD)("div",{children:[(0,f.FD)(r.FormUI.Label,{htmlFor:`${y}.name`,children:[(0,f.Y)(d.A,{id:"4CNVbz",defaultMessage:"API key name"}),(0,f.Y)("span",{css:(0,i.AH)({color:A.colors.textValidationDanger},""),children:" *"})]}),(0,f.Y)(l.f,{id:`${y}.name`,componentId:`${y}.name`,value:e.name,onChange:e=>x(e.target.value),placeholder:M({id:"tatySQ",defaultMessage:"my-api-key"}),validationState:null!==h&&void 0!==h&&h.name?"error":void 0,disabled:v}),null!==h&&void 0!==h&&h.name?(0,f.Y)(r.FormUI.Message,{type:"error",message:h.name}):(0,f.Y)(r.FormUI.Hint,{children:(0,f.Y)(d.A,{id:"7AbOaV",defaultMessage:"A unique name to identify this API key for reuse across endpoints"})})]}),p&&(0,f.FD)("div",{children:[(0,f.Y)(r.FormUI.Label,{children:(0,f.Y)(d.A,{id:"JwhonN",defaultMessage:"Authentication method"})}),(0,f.Y)(r.Radio.Group,{name:`${y}.auth-mode`,componentId:`${y}.auth-mode`,value:e.authMode||g,onChange:e=>w(e.target.value),disabled:v,children:(0,f.Y)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:A.spacing.sm},""),children:u.map(e=>(0,f.Y)(r.Radio,{value:e.mode,children:(0,f.FD)("div",{children:[(0,f.Y)("div",{css:(0,i.AH)({fontWeight:A.typography.typographyBoldFontWeight},""),children:e.display_name}),e.description&&(0,f.Y)("div",{css:(0,i.AH)({color:A.colors.textSecondary,fontSize:A.typography.fontSizeSm},""),children:e.description})]})},e.mode))})})]}),b.map(n=>{var t,o,a,s,d,u;return(0,f.FD)("div",{children:[(0,f.FD)(r.FormUI.Label,{htmlFor:`${y}.${n.fieldType}.${n.name}`,children:[(0,m.u3)(n.name),n.required&&(0,f.Y)("span",{css:(0,i.AH)({color:A.colors.textValidationDanger},""),children:" *"})]}),"secret"===n.fieldType?(0,f.Y)(c.L,{id:`${y}.secret.${n.name}`,componentId:`${y}.secret.${n.name}`,value:null!==(t=e.secretFields[n.name])&&void 0!==t?t:"",onChange:e=>Y(n.name,e.target.value),placeholder:n.description,validationState:null!==h&&void 0!==h&&null!==(o=h.secretFields)&&void 0!==o&&o[n.name]?"error":void 0,disabled:v}):(0,f.Y)(l.f,{id:`${y}.config.${n.name}`,componentId:`${y}.config.${n.name}`,value:null!==(a=e.configFields[n.name])&&void 0!==a?a:"",onChange:e=>S(n.name,e.target.value),placeholder:n.description,validationState:null!==h&&void 0!==h&&null!==(s=h.configFields)&&void 0!==s&&s[n.name]?"error":void 0,disabled:v}),"secret"===n.fieldType&&(null===h||void 0===h||null===(d=h.secretFields)||void 0===d?void 0:d[n.name])&&(0,f.Y)(r.FormUI.Message,{type:"error",message:h.secretFields[n.name]}),"config"===n.fieldType&&(null===h||void 0===h||null===(u=h.configFields)||void 0===u?void 0:u[n.name])&&(0,f.Y)(r.FormUI.Message,{type:"error",message:h.configFields[n.name]})]},n.name)})]})}},96872:function(e,n,t){t.d(n,{O:function(){return d}});var i=t(68248),o=t(82716),a=t(27757),r=t(40724),s=t(73408);const d=({value:e,onChange:n,componentIdPrefix:t="mlflow.gateway.edit-endpoint.usage-tracking"})=>{const{theme:d}=(0,a.u)();return(0,s.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:d.spacing.md},""),children:[(0,s.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:d.spacing.sm},""),children:[(0,s.Y)(o.Switch,{componentId:`${t}.toggle`,checked:e,onChange:e=>n(e),"aria-label":"Enable usage tracking"}),(0,s.Y)(a.T.Text,{children:(0,s.Y)(r.A,{id:"+CHJSV",defaultMessage:"Enable usage tracking"})})]}),(0,s.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:d.typography.fontSizeSm},""),children:(0,s.Y)(r.A,{id:"knEhQp",defaultMessage:"When enabled, all requests to this endpoint will be logged as traces. This allows you to monitor usage, debug issues, and analyze performance."})})]})}}}]);