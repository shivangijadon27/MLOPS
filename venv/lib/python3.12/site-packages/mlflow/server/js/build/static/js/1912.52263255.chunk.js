"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[1912],{7306:function(e,t,s){s.d(t,{_:function(){return g},n:function(){return u}});var n=s(82716),r=s(27757),o=s(79081),a=s(46709),i=s(77680),l=s(7655),d=s(40724),c=s(24523),h=s(73408);var m={name:"mfyowb",styles:"border:0;background:none;padding:0;line-height:0;cursor:pointer"};const g=({exampleEntityName:e="my_model_name"})=>{const{formatMessage:t}=(0,l.A)(),s=(0,i.zR)({id:"wMG8+P",defaultMessage:"To search by tags or by names and tags, use a simplified version{newline}of the SQL {whereBold} clause."}),n=t(s,{newline:" ",whereBold:"WHERE"});return(0,h.FD)(r.aw.Root,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_46",children:[(0,h.Y)(r.aw.Trigger,{"aria-label":n,css:m,children:(0,h.Y)(o.I,{})}),(0,h.FD)(r.aw.Content,{align:"start",children:[(0,h.FD)("div",{children:[(0,h.Y)(d.A,{...s,values:{newline:(0,h.Y)("br",{}),whereBold:(0,h.Y)("b",{children:"WHERE"})}})," ",(0,h.Y)(d.A,{id:"3bagxW",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,h.Y)(r.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_61",href:c.Lm+"#syntax",openInNewTab:!0,children:e})}}),(0,h.Y)("br",{}),(0,h.Y)("br",{}),(0,h.Y)(d.A,{id:"U3btBc",defaultMessage:"Examples:"}),(0,h.Y)("br",{}),'\u2022 tags.my_key = "my_value"',(0,h.Y)("br",{}),'\u2022 name ILIKE "%',e,'%" AND tags.my_key = "my_value"']}),(0,h.Y)(r.aw.Arrow,{})]})]})},u=({searchFilter:e,onSearchFilterChange:t,isFiltered:s})=>{const o=(0,l.A)(),[i,c]=(0,a.useState)(e);(0,a.useEffect)(()=>{c(e)},[e]);return(0,h.FD)(n.TableFilterLayout,{children:[(0,h.Y)(n.TableFilterInput,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_118",placeholder:o.formatMessage({id:"I2UqCo",defaultMessage:"Search registered models"}),onSubmit:()=>{t(i)},onClear:()=>{c(""),t("")},onChange:e=>c(e.target.value),"data-testid":"model-search-input",suffix:(0,h.Y)(g,{}),value:i,showSearchButton:!0}),s&&(0,h.Y)(r.B,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_152",type:"tertiary",onClick:()=>{t("")},"data-testid":"models-list-filters-reset",children:(0,h.Y)(d.A,{id:"n/l2ft",defaultMessage:"Reset filters"})})]})}},29452:function(e,t,s){s.d(t,{B:function(){return i}});var n=s(46709),r=s(79081),o=s(11522),a=s(73408);class i extends n.Component{constructor(...e){super(...e),this.state={isSubmitting:!1},this.formRef=n.createRef(),this.onSubmit=async()=>{this.setState({isSubmitting:!0});try{const e=await this.formRef.current.validateFields();await this.props.handleSubmit(e),this.resetAndClearModalForm(),this.onRequestCloseHandler()}catch(e){this.handleSubmitFailure(e)}},this.resetAndClearModalForm=()=>{this.setState({isSubmitting:!1}),this.formRef.current.resetFields()},this.handleSubmitFailure=e=>{this.setState({isSubmitting:!1}),o.A.logErrorAndNotifyUser(e)},this.onRequestCloseHandler=()=>{this.resetAndClearModalForm(),this.props.onClose()},this.handleCancel=()=>{var e,t;this.onRequestCloseHandler(),null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}}render(){const{isSubmitting:e}=this.state,{okText:t,cancelText:s,isOpen:o,footer:i,children:l}=this.props,d=n.Children.map(l,e=>n.isValidElement(e)?n.cloneElement(e,{innerRef:this.formRef}):e);return(0,a.Y)(r.d,{"data-testid":"mlflow-input-modal",className:this.props.className,title:this.props.title,width:540,visible:o,onOk:this.onSubmit,okText:t,cancelText:s,confirmLoading:e,onCancel:this.handleCancel,footer:i,centered:!0,children:d})}}},58355:function(e,t,s){s.d(t,{A:function(){return n}});class n{static getStoreForComponent(e,t){return new r([e,t].join("-"),"localStorage")}static getSessionScopedStoreForComponent(e,t){return new r([e,t].join("-"),"sessionStorage")}}n.version="1.1";class r{constructor(e,t){this.scope=void 0,this.storageObj=void 0,this.scope=e,this.storageObj="localStorage"===t?window.localStorage:window.sessionStorage}loadComponentState(){const e=this.getItem(r.reactComponentStateKey);return e?JSON.parse(e):{}}saveComponentState(e){const t="function"===typeof e.toJSON?e.toJSON():e;this.setItem(r.reactComponentStateKey,JSON.stringify(t))}withScopePrefix(e){return["MLflowLocalStorage",n.version,this.scope,e].join("-")}setItem(e,t){this.storageObj.setItem(this.withScopePrefix(e),t)}getItem(e){return this.storageObj.getItem(this.withScopePrefix(e))}}r.reactComponentStateKey="ReactComponentState"},60312:function(e,t,s){s.d(t,{m:function(){return a}});var n=s(82716),r=s(73408);var o={name:"13udsys",styles:"height:100%"};const a=({children:e,className:t})=>(0,r.Y)(n.PageWrapper,{css:o,className:t,children:e})},64080:function(e,t,s){s.d(t,{J:function(){return o},N:function(){return a}});var n=s(12803),r=s(43748);const o=e=>(t,s,r)=>{s?e().includes(s)?r(`Experiment "${s}" already exists.`):n.x.getExperimentByName({experiment_name:s}).then(e=>r(`Experiment "${s}" already exists in deleted state.\n                                 You can restore the experiment, or permanently delete the\n                                 experiment from the .trash folder (under tracking server's\n                                 root folder) in order to use this experiment name again.`)).catch(e=>r(void 0)):r(void 0)},a=(e,t,s)=>{t?r.x.getRegisteredModel({name:t}).then(()=>s(`Model "${t}" already exists.`)).catch(e=>s(void 0)):s(void 0)}},71912:function(e,t,s){s.r(t),s.d(t,{ModelListPageWrapper:function(){return ve},default:function(){return _e}});var n=s(55570),r=s(91113),o=s(46709),a=s(68248),i=s(11522),l=s(673),d=s(24523),c=s(27757),h=s(82716),m=s(29452),g=s(66916),u=s(40724),p=s(84173),f=s(73408);const S="modelName";class y extends o.Component{render(){const e=y.getLearnMoreLinkUrl();return(0,f.FD)(h.LegacyForm,{ref:this.props.innerRef,layout:"vertical","data-testid":"create-model-form-modal",children:[(0,f.Y)(h.LegacyForm.Item,{name:S,label:this.props.intl.formatMessage({id:"9mAGv0",defaultMessage:"Model name"}),rules:[{required:!0,message:this.props.intl.formatMessage({id:"7nAMnb",defaultMessage:"Please input a name for the new model."})},{validator:this.props.validator}],children:(0,f.Y)(g.I,{componentId:"codegen_mlflow_app_src_model-registry_components_createmodelform.tsx_62",autoFocus:!0})}),(0,f.FD)("p",{className:"create-modal-explanatory-text",children:[(0,f.Y)(u.A,{id:"+wQBvn",defaultMessage:"After creation, you can register logged models as new versions.\xa0"}),(0,f.Y)(u.A,{id:"iZm6YQ",defaultMessage:"<link>Learn more</link>",values:{link:t=>(0,f.Y)("a",{href:e,target:"_blank",children:t})}}),"."]})]})}}y.getLearnMoreLinkUrl=()=>d.qT;const v=(0,p.Ay)(y);var _=s(56530),M=s(99213),x=s(43233),b=s(27206),C=s(76118),Y=s(64080),I=s(2560);class w extends o.Component{constructor(...e){super(...e),this.createRegisteredModelRequestId=(0,x.yk)(),this.handleCreateRegisteredModel=async e=>{const t=await this.props.createRegisteredModelApi(e[S],this.createRegisteredModelRequestId),s=t.value&&t.value.registered_model;s&&setTimeout(()=>this.props.navigate(b.fM.getModelPageRoute(s.name)))},this.debouncedModelNameValidator=(0,C.debounce)(Y.N,400),this.handleOnCancel=()=>{this.props.navigateBackOnCancel&&this.props.navigate(b.fM.modelListPageRoute)}}render(){const{modalVisible:e,hideModal:t}=this.props;return(0,f.Y)(m.B,{title:this.props.intl.formatMessage({id:"mIk1MU",defaultMessage:"Create Model"}),okText:this.props.intl.formatMessage({id:"MatV9u",defaultMessage:"Create"}),cancelText:this.props.intl.formatMessage({id:"SCYMXw",defaultMessage:"Cancel"}),isOpen:e,handleSubmit:this.handleCreateRegisteredModel,onClose:t,onCancel:this.handleOnCancel,children:(0,f.Y)(v,{visible:e,validator:this.debouncedModelNameValidator})})}}const A={createRegisteredModelApi:M.eF},k=(0,I.h)((0,_.Ng)(void 0,A)((0,p.Ay)(w))),P=(0,n.X)(r.A.mlflowServices.MODEL_REGISTRY,k);function R({buttonType:e="primary",buttonText:t=(0,f.Y)(u.A,{id:"ZwAzmu",defaultMessage:"Create Model"})}){const[s,n]=(0,o.useState)(!1);return(0,f.FD)("div",{css:T.wrapper,children:[(0,f.Y)(c.B,{componentId:"codegen_mlflow_app_src_model-registry_components_CreateModelButton.tsx_28",className:"create-model-btn",css:T.getButtonSize(e),type:e,onClick:()=>{n(!0)},"data-testid":"create-model-button",icon:"primary"===e?(0,f.Y)(h.PlusIcon,{}):void 0,children:t}),(0,f.Y)(P,{modalVisible:s,hideModal:()=>{n(!1)}})]})}const T={getButtonSize:e=>"primary"===e?{height:"40px",width:"fit-content"}:{padding:"0px"},wrapper:{display:"inline"}};var N=s(58355),F=s(10536),B=s(79081),D=s(31655),L=s(7306),E=s(76256),O=s(90061),K=s(43617),V=s(7655),H=s(91105),G=s(181);const U=()=>(0,f.Y)(f.FK,{children:"\u2014"});var W={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"};const z=({tags:e})=>{const{theme:t}=(0,c.u)(),[s,n]=(0,o.useState)(!1),r=null===e||void 0===e?void 0:e.filter(e=>!e.key.startsWith(G.nt)),i=null===r||void 0===r?void 0:r.slice(0,s?void 0:3);if(null===r||void 0===r||!r.length)return(0,f.Y)(U,{});const l=(0,f.Y)("em",{children:(0,f.Y)(u.A,{id:"2I27Yy",defaultMessage:"(empty)"})});return(0,f.FD)("div",{children:[i.map(e=>(0,f.Y)(B.T,{componentId:"mlflow.model-registry.model-list.model-tag.tooltip",content:(0,f.FD)(f.FK,{children:[e.key,": ",e.value||l]}),side:"left",children:(0,f.FD)("span",{css:W,"data-testid":"models-table-tag-entry",children:[(0,f.Y)(c.T.Text,{bold:!0,children:e.key}),": ",e.value||l]},e.key)},e.key)),e.length>3&&(0,f.Y)(c.B,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modeltablecellrenderers.tsx_65",css:(0,a.AH)({marginTop:t.spacing.sm},""),size:"small",onClick:()=>n(!s),icon:s?(0,f.Y)(h.ChevronDoubleUpIcon,{}):(0,f.Y)(h.ChevronDoubleDownIcon,{}),"data-testid":"models-table-show-more-tags",children:s?(0,f.Y)(u.A,{id:"nddV+2",defaultMessage:"Show less"}):(0,f.Y)(u.A,{id:"cJo1zH",defaultMessage:"{value} more",values:{value:r.length-3}})})]})},j=({versionNumber:e,name:t})=>e?(0,f.Y)(u.A,{id:"U+Jzcv",defaultMessage:"<link>Version {versionNumber}</link>",values:{versionNumber:e,link:s=>(0,f.Y)(H.N_,{to:b.fM.getModelVersionPageRoute(t,e),children:s})}}):(0,f.Y)(U,{});var q=s(93083);const J=(0,s(77680).zR)({id:"M1dwxx",defaultMessage:"Version {version}"});var Q={name:"1u2bo0v",styles:"margin-right:0;cursor:pointer"},$={name:"1u2bo0v",styles:"margin-right:0;cursor:pointer"};const Z=({model:e})=>{const{aliases:t}=e,{theme:s}=(0,c.u)();if(null===t||void 0===t||!t.length)return null;const n=(0,C.sortBy)(t,({version:e})=>parseInt(e,10)||0).reverse(),r=(0,C.first)(n);if(!r)return null;const o=n.filter(e=>e!==r);return(0,f.FD)("div",{children:[(0,f.FD)(H.N_,{to:b.fM.getModelVersionPageRoute(e.name,r.version),children:[(0,f.Y)(q.Z,{value:r.alias,css:Q}),": ",(0,f.Y)(u.A,{...J,values:{version:r.version}})]}),o.length>0&&(0,f.FD)(h.DropdownMenu.Root,{modal:!1,children:[(0,f.Y)(h.DropdownMenu.Trigger,{asChild:!0,children:(0,f.FD)(c.B,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelstablealiasedversionscell.tsx_47",size:"small",css:(0,a.AH)({borderRadius:12,marginLeft:s.spacing.xs},""),children:["+",t.length-1]})}),(0,f.Y)(h.DropdownMenu.Content,{align:"start",children:o.map(({alias:t,version:n})=>(0,f.Y)(h.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_model-registry_components_aliases_modelstablealiasedversionscell.tsx_57",children:(0,f.FD)(H.N_,{to:b.fM.getModelVersionPageRoute(e.name,n),children:[(0,f.Y)(q.Z,{value:t,css:$}),":"," ",(0,f.Y)("span",{css:(0,a.AH)({color:s.colors.actionTertiaryTextDefault},""),children:(0,f.Y)(u.A,{...J,values:{version:n}})})]})},t))})]})]})};var X=s(12769),ee=s(77153);const te=(e,t)=>{const s=e&&e.find(e=>e.current_stage===t);return s&&s.version};var se=function(e){return e.NAME="name",e.LATEST_VERSION="latest_versions",e.LAST_MODIFIED="timestamp",e.CREATED_BY="user_id",e.STAGE_STAGING="stage_staging",e.STAGE_PRODUCTION="stage_production",e.TAGS="tags",e.ALIASED_VERSIONS="aliased_versions",e}(se||{}),ne={name:"kbcyu6",styles:"display:flex;align-items:center;justify-content:center;min-height:400px"},re={name:"kbcyu6",styles:"display:flex;align-items:center;justify-content:center;min-height:400px"},oe={name:"kbcyu6",styles:"display:flex;align-items:center;justify-content:center;min-height:400px"};const ae=({modelsData:e,orderByAsc:t,orderByKey:s,onSortChange:n,isLoading:r,error:a,isFiltered:m,pagination:p})=>{const S=(0,V.A)(),{usingNextModelsUI:y}=(0,X.E)(),v=e.map(e=>e),_=(0,o.useMemo)(()=>{const e=[{id:se.NAME,enableSorting:!0,header:S.formatMessage({id:"g17Es2",defaultMessage:"Name"}),accessorKey:"name",cell:({getValue:e})=>(0,f.Y)(H.N_,{to:b.fM.getModelPageRoute(String(e())),children:(0,f.Y)(B.T,{componentId:"mlflow.model-registry.model-list.model-name.tooltip",content:e(),children:(0,f.Y)("span",{children:e()})})}),meta:{styles:{minWidth:200,flex:1}}},{id:se.LATEST_VERSION,enableSorting:!1,header:S.formatMessage({id:"CruI7o",defaultMessage:"Latest version"}),accessorKey:"latest_versions",cell:({getValue:e,row:{original:t}})=>{const{name:s}=t,n=e(),r=Boolean(null===n||void 0===n?void 0:n.length)&&Math.max(...n.map(e=>parseInt(e.version,10))).toString()||"";return(0,f.Y)(j,{name:s,versionNumber:r})},meta:{styles:{maxWidth:120}}}];return y?e.push({id:se.ALIASED_VERSIONS,enableSorting:!1,header:S.formatMessage({id:"WQwCH6",defaultMessage:"Aliased versions"}),cell:({row:{original:e}})=>(0,f.Y)(Z,{model:e}),meta:{styles:{minWidth:150}}}):e.push({id:se.STAGE_STAGING,enableSorting:!1,header:S.formatMessage({id:"08WP3h",defaultMessage:"Staging"}),cell:({row:{original:e}})=>{const{latest_versions:t,name:s}=e,n=te(t,l.e3.STAGING);return(0,f.Y)(j,{name:s,versionNumber:n})},meta:{styles:{maxWidth:120}}},{id:se.STAGE_PRODUCTION,enableSorting:!1,header:S.formatMessage({id:"PGbCZD",defaultMessage:"Production"}),cell:({row:{original:e}})=>{const{latest_versions:t,name:s}=e,n=te(t,l.e3.PRODUCTION);return(0,f.Y)(j,{name:s,versionNumber:n})},meta:{styles:{maxWidth:120}}}),e.push({id:se.CREATED_BY,header:S.formatMessage({id:"WP1pyQ",defaultMessage:"Created by"}),accessorKey:"user_id",enableSorting:!1,cell:({getValue:e,row:{original:t}})=>(0,f.Y)("span",{title:e(),children:e()}),meta:{styles:{flex:1}}},{id:se.LAST_MODIFIED,enableSorting:!0,header:S.formatMessage({id:"Gs+blV",defaultMessage:"Last modified"}),accessorKey:"last_updated_timestamp",cell:({getValue:e})=>(0,f.Y)("span",{children:i.A.formatTimestamp(e(),S)}),meta:{styles:{flex:1,maxWidth:150}}},{id:se.TAGS,header:S.formatMessage({id:"nC54Nf",defaultMessage:"Tags"}),enableSorting:!1,accessorKey:"tags",cell:({getValue:e})=>(0,f.Y)(z,{tags:e()})}),e},[S,y]),M=[{id:s,desc:!t}];d.gw;const x=(0,f.Y)(u.A,{id:"JNS471",defaultMessage:"No results. Try using a different keyword or adjusting your filters."}),C=a?(0,f.Y)("div",{css:ne,children:(0,f.Y)(h.Empty,{image:(0,f.Y)(c.W,{}),description:a instanceof ee.s?a.getMessageField():a.message,title:(0,f.Y)(u.A,{id:"5cac8T",defaultMessage:"Error fetching models"})})}):m?(0,f.Y)("div",{css:re,children:(0,f.Y)(h.Empty,{description:x,image:(0,f.Y)(g.S,{}),"data-testid":"model-list-no-results"})}):(0,f.Y)("div",{css:oe,children:(0,f.Y)(h.Empty,{description:(0,f.Y)(u.A,{id:"OC5Osf",defaultMessage:"Share and manage machine learning models. <link>Learn more</link>",values:{link:e=>(0,f.Y)(c.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellisttable.tsx_learn_more",href:d.qT,openInNewTab:!0,children:e})}}),image:(0,f.Y)(h.ModelsIcon,{}),button:(0,f.Y)(R,{buttonType:"primary",buttonText:(0,f.Y)(u.A,{id:"iPzSgc",defaultMessage:"Create model"})})})}),Y=(0,E.L)("mlflow/server/js/src/model-registry/components/model-list/ModelListTable.tsx",{data:v,columns:_,state:{sorting:M},getCoreRowModel:(0,O.HT)(),getRowId:({id:e})=>e,onSortingChange:e=>{const[t]="function"===typeof e?e(M):e;t&&n({orderByKey:t.id,orderByAsc:!t.desc})}});return(0,f.Y)(f.FK,{children:(0,f.FD)(h.Table,{"data-testid":"model-list-table",pagination:p,scrollable:!0,empty:!r&&0===Y.getRowModel().rows.length||a?C:void 0,children:[(0,f.Y)(h.TableRow,{isHeader:!0,children:Y.getLeafHeaders().map(e=>{var t;return(0,f.Y)(h.TableHeader,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellisttable.tsx_412",ellipsis:!0,sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted()||"none",onToggleSort:()=>{const[t]=M,s=!!(e.column.id===t.id)&&!t.desc;e.column.toggleSorting(s)},css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,children:(0,K.Kv)(e.column.columnDef.header,e.getContext())},e.id)})}),r?(0,f.Y)(h.TableSkeletonRows,{table:Y}):Y.getRowModel().rows.map(e=>(0,f.Y)(h.TableRow,{children:e.getAllCells().map(e=>{var t;return(0,f.Y)(h.TableCell,{ellipsis:!0,css:null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.styles,children:(0,K.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id))]})})};var ie=s(58340),le=s(34791);const de=()=>{const{theme:e}=(0,c.u)();return(0,f.FD)("span",{css:(0,a.AH)({display:"flex",alignItems:"center",gap:e.spacing.sm},""),children:[(0,f.Y)("span",{css:(0,a.AH)({display:"flex",borderRadius:e.borders.borderRadiusSm,backgroundColor:e.colors.backgroundSecondary,padding:e.spacing.sm},""),children:(0,f.Y)(h.ModelsIcon,{})}),(0,f.Y)(u.A,{id:"qMwRy3",defaultMessage:"Registered Models"})]})};var ce={name:"18e72da",styles:"width:100%;align-items:center;display:flex"},he={name:"82a6rk",styles:"flex:1"};class me extends o.Component{constructor(e){super(e),this.handleSearch=(e,t)=>{null===e||void 0===e||e.preventDefault(),this.props.onSearch(t)},this.unifiedTableSortChange=({orderByKey:e,orderByAsc:t})=>{const s={timestamp:"last_updated_timestamp"}[e]||e;this.handleTableChange(void 0,void 0,{field:s,order:t?"undefined":"descend"})},this.handleTableChange=(e,t,s)=>{this.props.onClickSortableColumn(me.getSortFieldName(s.field),s.order)},this.handleClickNext=()=>{this.props.onClickNext()},this.handleClickPrev=()=>{this.props.onClickPrev()},this.handleSetMaxResult=({item:e,key:t,keyPath:s,domEvent:n})=>{this.props.onSetMaxResult(t)},this.state={maxResultsSelection:l.CG}}disableOnboardingHelper(){me.getLocalStore(d.Ge).setItem("showRegistryHelper","false")}static getLocalStore(e){return N.A.getStoreForComponent("ModelListView",e)}componentDidMount(){i.A.updatePageTitle("MLflow Models")}render(){const{models:e,currentPage:t,nextPageToken:s,searchInput:n}=this.props,{loading:r,error:o}=this.props,a=Boolean(n),i=!r&&!o&&!e.length&&!a,l=(0,D.tn)(),d=new URLSearchParams(window.location.search),c=(0,le.V2)(d),m=!i&&(!l||null!==c);return(0,f.FD)(f.FK,{children:[(0,f.Y)(B.S,{shrinks:!1}),(0,f.Y)(F.z,{title:(0,f.Y)(de,{}),spacerSize:"xs",children:m&&(0,f.Y)(R,{})}),(0,f.Y)(B.S,{}),(0,f.Y)(L.n,{searchFilter:this.props.searchInput,onSearchFilterChange:e=>this.handleSearch(null,e),isFiltered:a}),(0,f.Y)(ae,{modelsData:e,onSortChange:this.unifiedTableSortChange,orderByKey:this.props.orderByKey,orderByAsc:this.props.orderByAsc,isLoading:r||!1,error:o,pagination:(0,f.FD)("div",{"data-testid":"model-list-view-pagination",css:ce,children:[(0,f.Y)("div",{css:he,children:(0,D.WX)()&&(0,f.Y)(ie.C,{})}),(0,f.Y)("div",{children:(0,f.Y)(h.CursorPagination,{componentId:"codegen_mlflow_app_src_model-registry_components_modellistview.tsx_305",hasNextPage:Boolean(s),hasPreviousPage:t>1,onNextPage:this.handleClickNext,onPreviousPage:this.handleClickPrev,pageSizeSelect:{onChange:e=>this.handleSetMaxResult({key:e}),default:this.props.maxResultValue,options:[10,25,50,100]}})})]}),isFiltered:a})]})}}me.defaultProps={models:[],searchInput:""},me.getSortFieldName=e=>{switch(e){case"name":return l.Qs;case"last_updated_timestamp":return l.BE;default:return null}},me.getLearnMoreLinkUrl=()=>d.qT,me.getLearnMoreDisplayString=()=>d.N0;const ge=(0,X.p)((0,p.Ay)(me));var ue=s(87821),pe=s(60312);class fe extends o.Component{constructor(e){super(e),this.modelListPageStoreKey="ModelListPageStore",this.defaultPersistedPageTokens={1:null},this.initialSearchRegisteredModelsApiId=(0,x.yk)(),this.searchRegisteredModelsApiId=(0,x.yk)(),this.criticalInitialRequestIds=[this.initialSearchRegisteredModelsApiId],this.pollIntervalId=void 0,this.isEmptyPageResponse=e=>!e||!e.registered_models||!e.next_page_token,this.updatePageState=(e,t={})=>{const s=this.getNextPageTokenFromResponse(t);this.setState(t=>({currentPage:e,pageTokens:{...t.pageTokens,[e+1]:s}}),()=>{this.setPersistedPageTokens(this.state.pageTokens)})},this.handleSearch=e=>{this.resetHistoryState(),this.setState({searchInput:e},()=>{this.loadPage(1,!1)})},this.handleSearchInputChange=e=>{this.setState({searchInput:e})},this.updateUrlWithSearchFilter=(e,t,s,n)=>{const r={};e&&(r.searchInput=e),t&&t!==l.Qs&&(r.orderByKey=t),!1===s&&(r.orderByAsc=s),n&&1!==n&&(r.page=n);const o=(0,H.Oz)(`/models?${i.A.getSearchUrlFromState(r)}`);o!==this.props.location.pathname+this.props.location.search&&this.props.navigate(o)},this.handleMaxResultsChange=e=>{this.setState({maxResultsSelection:parseInt(e,10)},()=>{this.resetHistoryState();const{maxResultsSelection:e}=this.state;this.setMaxResultsInStore(e),this.loadPage(1,!1)})},this.handleClickNext=()=>{const{currentPage:e}=this.state;this.loadPage(e+1,!1)},this.handleClickPrev=()=>{const{currentPage:e}=this.state;this.loadPage(e-1,!1)},this.handleClickSortableColumn=(e,t)=>{const s=t!==l.uB.DESC;this.setState({orderByKey:e,orderByAsc:s},()=>{this.resetHistoryState(),this.loadPage(1,!1)})},this.getMaxResultsSelection=()=>this.state.maxResultsSelection,this.state={orderByKey:l.Qs,orderByAsc:!0,currentPage:1,maxResultsSelection:this.getPersistedMaxResults(),pageTokens:{},loading:!0,error:void 0,searchInput:(0,ue._C)(this.getUrlState())}}getUrlState(){return this.props.location?i.A.getSearchParamsFromUrl(this.props.location.search):{}}componentDidMount(){const e=this.getUrlState(),t=this.getPersistedPageTokens(),s=this.getPersistedMaxResults();this.setState({orderByKey:void 0===e.orderByKey?this.state.orderByKey:e.orderByKey,orderByAsc:void 0===e.orderByAsc?this.state.orderByAsc:"true"===e.orderByAsc,currentPage:void 0!==e.page&&e.page in t?parseInt(e.page,10):this.state.currentPage,maxResultsSelection:s,pageTokens:t},()=>{this.loadModels(!0)})}getPersistedPageTokens(){const e=fe.getLocalStore(this.modelListPageStoreKey);return e&&e.getItem("page_tokens")?JSON.parse(e.getItem("page_tokens")):this.defaultPersistedPageTokens}setPersistedPageTokens(e){const t=fe.getLocalStore(this.modelListPageStoreKey);t&&t.setItem("page_tokens",JSON.stringify(e))}getPersistedMaxResults(){const e=fe.getLocalStore(this.modelListPageStoreKey);return e&&e.getItem("max_results")?parseInt(e.getItem("max_results"),10):l.CG}setMaxResultsInStore(e){fe.getLocalStore(this.modelListPageStoreKey).setItem("max_results",e.toString())}static getLocalStore(e){return N.A.getSessionScopedStoreForComponent("ModelListPage",e)}loadModels(e=!1){this.loadPage(this.state.currentPage,e)}resetHistoryState(){this.setState(e=>({currentPage:1,pageTokens:this.defaultPersistedPageTokens})),this.setPersistedPageTokens(this.defaultPersistedPageTokens)}getNextPageTokenFromResponse(e){const{value:t}=e;return this.isEmptyPageResponse(t)?null:t.next_page_token}loadPage(e,t){const{searchInput:s,pageTokens:n,orderByKey:r,orderByAsc:o}=this.state;this.setState({loading:!0,error:void 0}),this.updateUrlWithSearchFilter(s,r,o,e),this.props.searchRegisteredModelsApi((0,ue.so)({query:s}),this.state.maxResultsSelection,fe.getOrderByExpr(r,o),n[e],t?this.initialSearchRegisteredModelsApiId:this.searchRegisteredModelsApiId).then(t=>{this.updatePageState(e,t)}).catch(e=>{this.setState({currentPage:1,error:e}),this.resetHistoryState()}).finally(()=>{this.setState({loading:!1})})}render(){const{orderByKey:e,orderByAsc:t,currentPage:s,pageTokens:n,searchInput:r}=this.state,{models:o}=this.props;return(0,f.Y)(pe.m,{children:(0,f.Y)(ge,{models:o,loading:this.state.loading,error:this.state.error,searchInput:r,orderByKey:e,orderByAsc:t,currentPage:s,nextPageToken:n[s+1],onSearch:this.handleSearch,onClickNext:this.handleClickNext,onClickPrev:this.handleClickPrev,onClickSortableColumn:this.handleClickSortableColumn,onSetMaxResult:this.handleMaxResultsChange,maxResultValue:this.getMaxResultsSelection()})})}}fe.getOrderByExpr=(e,t)=>e?`${e} ${t?"ASC":"DESC"}`:"";const Se={searchRegisteredModelsApi:M.JK},ye=(0,I.h)((0,_.Ng)(e=>({models:Object.values(e.entities.modelByName)}),Se)(fe)),ve=(0,n.X)(r.A.mlflowServices.MODEL_REGISTRY,()=>(0,f.Y)(ye,{}));var _e=ve},76256:function(e,t,s){s.d(t,{L:function(){return r},S:function(){return o}});var n=s(43617);function r(e,t){return(0,n.N4)(t)}const o=n.N4},87821:function(e,t,s){s.d(t,{_C:function(){return i},pc:function(){return o},so:function(){return a}});var n=s(673),r=s(99213);function o(e){return e?`${n.Qs} ilike ${(0,r.GP)(e,!0)}`:""}function a({query:e=""}={}){const t=[],s=e.includes("tags.")?e:o(e);return s&&t.push(s),t.join(" AND ")}function i(e){return"searchInput"in e?e.searchInput:"nameSearchInput"in e&&"tagSearchInput"in e?o(e.nameSearchInput)+" AND "+e.tagSearchInput:"tagSearchInput"in e?e.tagSearchInput:"nameSearchInput"in e?e.nameSearchInput:""}}}]);