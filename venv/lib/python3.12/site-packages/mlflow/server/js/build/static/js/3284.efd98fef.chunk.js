"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[3284,3664],{7306:function(e,t,r){r.d(t,{_:function(){return p},n:function(){return g}});var a=r(82716),n=r(27757),o=r(79081),s=r(46709),i=r(77680),l=r(7655),d=r(40724),c=r(24523),u=r(73408);var m={name:"mfyowb",styles:"border:0;background:none;padding:0;line-height:0;cursor:pointer"};const p=({exampleEntityName:e="my_model_name"})=>{const{formatMessage:t}=(0,l.A)(),r=(0,i.zR)({id:"wMG8+P",defaultMessage:"To search by tags or by names and tags, use a simplified version{newline}of the SQL {whereBold} clause."}),a=t(r,{newline:" ",whereBold:"WHERE"});return(0,u.FD)(n.aw.Root,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_46",children:[(0,u.Y)(n.aw.Trigger,{"aria-label":a,css:m,children:(0,u.Y)(o.I,{})}),(0,u.FD)(n.aw.Content,{align:"start",children:[(0,u.FD)("div",{children:[(0,u.Y)(d.A,{...r,values:{newline:(0,u.Y)("br",{}),whereBold:(0,u.Y)("b",{children:"WHERE"})}})," ",(0,u.Y)(d.A,{id:"3bagxW",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,u.Y)(n.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_61",href:c.Lm+"#syntax",openInNewTab:!0,children:e})}}),(0,u.Y)("br",{}),(0,u.Y)("br",{}),(0,u.Y)(d.A,{id:"U3btBc",defaultMessage:"Examples:"}),(0,u.Y)("br",{}),'\u2022 tags.my_key = "my_value"',(0,u.Y)("br",{}),'\u2022 name ILIKE "%',e,'%" AND tags.my_key = "my_value"']}),(0,u.Y)(n.aw.Arrow,{})]})]})},g=({searchFilter:e,onSearchFilterChange:t,isFiltered:r})=>{const o=(0,l.A)(),[i,c]=(0,s.useState)(e);(0,s.useEffect)(()=>{c(e)},[e]);return(0,u.FD)(a.TableFilterLayout,{children:[(0,u.Y)(a.TableFilterInput,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_118",placeholder:o.formatMessage({id:"I2UqCo",defaultMessage:"Search registered models"}),onSubmit:()=>{t(i)},onClear:()=>{c(""),t("")},onChange:e=>c(e.target.value),"data-testid":"model-search-input",suffix:(0,u.Y)(p,{}),value:i,showSearchButton:!0}),r&&(0,u.Y)(n.B,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_152",type:"tertiary",onClick:()=>{t("")},"data-testid":"models-list-filters-reset",children:(0,u.Y)(d.A,{id:"n/l2ft",defaultMessage:"Reset filters"})})]})}},8264:function(e,t,r){r.d(t,{o:function(){return s}});var a=r(49708),n=r(25117);const o=({queryKey:e})=>{const[,{provider:t}]=e;return n.t.listModels(t)},s=({provider:e}={})=>{var t,r;const n=(0,a.I)(["gateway_models",{provider:e}],{queryFn:o,retry:!1,enabled:void 0!==e});return{data:null===(t=n.data)||void 0===t?void 0:t.models,error:null!==(r=n.error)&&void 0!==r?r:void 0,isLoading:n.isLoading,refetch:n.refetch}}},22156:function(e,t,r){r.r(t),r.d(t,{default:function(){return Q}});var a=r(68248),n=r(60312),o=r(49708),s=r(46709),i=r(59795);const l=({queryKey:e})=>{const[,{searchFilter:t,pageToken:r,experimentId:a}]=e;return i.M.listRegisteredPrompts(t,r,a)};var d=r(27757),c=r(79081),u=r(82716),m=r(40724),p=r(7306),g=r(73408);const f=({searchFilter:e,onSearchFilterChange:t,componentId:r})=>(0,g.Y)(u.TableFilterLayout,{children:(0,g.Y)(u.TableFilterInput,{placeholder:"Search prompts by name or tags",componentId:r,value:e,onChange:e=>t(e.target.value),suffix:(0,g.Y)(p._,{exampleEntityName:"my-prompt-name"})})});var h=r(76256),v=r(90061),y=r(43617),w=r(7655),b=r(181),x=r(59281);var _={name:"zjik7",styles:"display:flex"},C={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},M={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const k=({row:{original:e},table:{options:{meta:t}}})=>{var r;const a=(0,w.A)(),{onEditTags:n}=t,o=(null===e||void 0===e||null===(r=e.tags)||void 0===r?void 0:r.filter(e=>(0,b.oD)(e.key)))||[],s=o.length>0;return(0,g.FD)("div",{css:_,children:[(0,g.Y)("div",{css:C,children:null===o||void 0===o?void 0:o.map(e=>(0,g.Y)(x.t,{tag:e},e.key))}),(0,g.Y)(d.B,{componentId:"mlflow.prompts.list.tag.add",size:"small",icon:s?(0,g.Y)(u.PencilIcon,{}):void 0,onClick:()=>null===n||void 0===n?void 0:n(e),"aria-label":a.formatMessage({id:"lA8QO2",defaultMessage:"Edit tags"}),children:s?void 0:(0,g.Y)(m.A,{id:"iDpAK8",defaultMessage:"Add tags"}),css:M,type:"tertiary"})]})};var S=r(91105),Y=r(60284);const A=({row:{original:e},getValue:t,table:{options:{meta:r}}})=>{const a=t(),{experimentId:n}=r||{};return e.name?(0,g.Y)(S.N_,{to:Y.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name),n),children:a}):a};var T=r(11522);const E=({row:{original:e},getValue:t})=>{const r=t();return r?(0,g.Y)(d.T.Text,{children:(0,g.Y)(m.A,{id:"sM0MBJ",defaultMessage:"Version {version}",values:{version:r}})}):null};var P=r(76118);var F={name:"kbcyu6",styles:"display:flex;align-items:center;justify-content:center;min-height:400px"},R={name:"kbcyu6",styles:"display:flex;align-items:center;justify-content:center;min-height:400px"},I={name:"1h3rtzg",styles:"align-items:center"};const L=({prompts:e,hasNextPage:t,hasPreviousPage:r,isLoading:n,isFiltered:o,onNextPage:i,onPreviousPage:l,onEditTags:c,experimentId:p,onCreatePrompt:f,paginationComponentId:b,tableHeaderComponentId:x})=>{const{theme:_}=(0,d.u)(),C=(()=>{const e=(0,w.A)();return(0,s.useMemo)(()=>[{header:e.formatMessage({id:"tzA/LZ",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:A},{header:e.formatMessage({id:"bmd4rb",defaultMessage:"Latest version"}),cell:E,accessorFn:({latest_versions:e})=>{var t;return null===(t=(0,P.first)(e))||void 0===t?void 0:t.version},id:"latestVersion"},{header:e.formatMessage({id:"FiKsFK",defaultMessage:"Last modified"}),id:"lastModified",accessorFn:({last_updated_timestamp:t})=>T.A.formatTimestamp(t,e)},{header:e.formatMessage({id:"KMVqUP",defaultMessage:"Tags"}),accessorKey:"tags",id:"tags",cell:k}],[e])})(),M=(0,h.L)("mlflow/server/js/src/experiment-tracking/pages/prompts/components/PromptsListTable.tsx",{data:null!==e&&void 0!==e?e:[],columns:C,getCoreRowModel:(0,v.HT)(),getRowId:(e,t)=>{var r;return null!==(r=e.name)&&void 0!==r?r:t.toString()},meta:{onEditTags:c,experimentId:p}});return(0,g.FD)(u.Table,{scrollable:!0,pagination:(0,g.Y)(u.CursorPagination,{hasNextPage:t,hasPreviousPage:r,onNextPage:i,onPreviousPage:l,componentId:b}),empty:(()=>{const t=!n&&(0,P.isEmpty)(e);return t&&o?(0,g.Y)("div",{css:F,children:(0,g.Y)(u.Empty,{image:(0,g.Y)(u.NoIcon,{}),title:(0,g.Y)(m.A,{id:"hlpNRa",defaultMessage:"No prompts found"}),description:null})}):t?(0,g.Y)("div",{css:R,children:(0,g.Y)(u.Empty,{title:(0,g.Y)(m.A,{id:"Uq6/bl",defaultMessage:"Create prompt"}),description:(0,g.Y)(m.A,{id:"Q7/S7b",defaultMessage:"Create and manage prompts using MLflow. <link>Learn more</link>",values:{link:e=>(0,g.Y)(d.T.Link,{componentId:"mlflow.prompts.list.table.learn_more_link",href:"https://mlflow.org/docs/latest/genai/prompt-registry/",openInNewTab:!0,children:e})}}),button:(0,g.Y)(d.B,{componentId:"mlflow.prompts.list.table.create_prompt","data-testid":"create-prompt-empty-state-button",onClick:f,type:"primary",icon:(0,g.Y)(u.PlusIcon,{}),children:(0,g.Y)(m.A,{id:"jTQyFj",defaultMessage:"Create prompt"})})})}):null})(),children:[(0,g.Y)(u.TableRow,{isHeader:!0,children:M.getLeafHeaders().map(e=>(0,g.Y)(u.TableHeader,{componentId:x,children:(0,y.Kv)(e.column.columnDef.header,e.getContext())},e.id))}),n?(0,g.Y)(u.TableSkeletonRows,{table:M}):M.getRowModel().rows.map(e=>(0,g.Y)(u.TableRow,{css:(0,a.AH)({height:_.general.buttonHeight},""),children:e.getAllCells().map(e=>(0,g.Y)(u.TableCell,{css:I,children:(0,y.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))]})};var U=r(73227),j=r(60527),D=r(55570),O=r(91113),B=r(68079),N=r(27556),V=r(31655),K=r(34791);const H={create:"mlflow.prompts.global.list.create",error:"mlflow.prompts.global.list.error",search:"mlflow.prompts.global.list.search",pagination:"mlflow.prompts.global.list.pagination",tableHeader:"mlflow.prompts.global.list.table.header"},q={create:"mlflow.prompts.experiment.list.create",error:"mlflow.prompts.experiment.list.error",search:"mlflow.prompts.experiment.list.search",pagination:"mlflow.prompts.experiment.list.pagination",tableHeader:"mlflow.prompts.experiment.list.table.header"};var J={name:"1jyk3dc",styles:"overflow:hidden;display:flex;flex-direction:column;flex:1"},W={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},z={name:"1ocjxm6",styles:"display:flex;align-items:flex-start;gap:8px"},$={name:"82a6rk",styles:"flex:1"};var Q=(0,D.X)(O.A.mlflowServices.EXPERIMENTS,({experimentId:e}={})=>{const{theme:t}=(0,d.u)(),[r]=(0,S.ok)(),i=(0,V.tn)(),p=(0,K.V2)(r),[h,v]=(0,s.useState)(""),y=(0,S.Zp)(),w=e?q:H,[b]=(0,N.d7)(h,500),{data:x,error:_,refetch:C,hasNextPage:M,hasPreviousPage:k,isLoading:A,onNextPage:T,onPreviousPage:E}=(({searchFilter:e,experimentId:t}={})=>{var r,a,n,i;const d=(0,s.useRef)([]),[c,u]=(0,s.useState)(void 0),m=(0,o.I)(["prompts_list",{searchFilter:e,pageToken:c,experimentId:t}],{queryFn:l,retry:!1}),p=(0,s.useCallback)(()=>{var e;d.current.push(c),u(null===(e=m.data)||void 0===e?void 0:e.next_page_token)},[null===(r=m.data)||void 0===r?void 0:r.next_page_token,c]),g=(0,s.useCallback)(()=>{const e=d.current.pop();u(e)},[]);return{data:null===(a=m.data)||void 0===a?void 0:a.registered_models,error:null!==(n=m.error)&&void 0!==n?n:void 0,isLoading:m.isLoading,hasNextPage:void 0!==(null===(i=m.data)||void 0===i?void 0:i.next_page_token),hasPreviousPage:Boolean(c),onNextPage:p,onPreviousPage:g,refetch:m.refetch}})({experimentId:e,searchFilter:b}),{EditTagsModal:P,showEditPromptTagsModal:F}=(0,U.i)({onSuccess:C}),{CreatePromptModal:R,openModal:I}=(0,j.z)({mode:j.v.CreatePrompt,experimentId:e,onSuccess:({promptName:t})=>y(Y.Ay.getPromptDetailsPageRoute(t,e))}),D=!(!A&&!_&&!(null!==x&&void 0!==x&&x.length)&&!h)&&(!i||null!==p)&&(0,g.Y)(d.B,{componentId:w.create,"data-testid":"create-prompt-button",type:"primary",onClick:I,children:(0,g.Y)(m.A,{id:"7x6xu8",defaultMessage:"Create prompt"})}),O=e?"div":n.m;return(0,g.FD)(O,{css:J,children:[!e&&(0,g.FD)(g.FK,{children:[(0,g.Y)(c.S,{shrinks:!1}),(0,g.Y)(u.Header,{title:(0,g.FD)("span",{css:(0,a.AH)({display:"flex",alignItems:"center",gap:t.spacing.sm},""),children:[(0,g.Y)("span",{css:(0,a.AH)({display:"flex",borderRadius:t.borders.borderRadiusSm,backgroundColor:t.colors.backgroundSecondary,padding:t.spacing.sm},""),children:(0,g.Y)(u.TextBoxIcon,{})}),(0,g.Y)(m.A,{id:"aLRRam",defaultMessage:"Prompts"})]}),buttons:D}),(0,g.Y)(c.S,{shrinks:!1})]}),(0,g.FD)("div",{css:W,children:[(0,g.FD)("div",{css:z,children:[(0,g.Y)("div",{css:$,children:(0,g.Y)(f,{searchFilter:h,onSearchFilterChange:v,componentId:w.search})}),e&&D]}),(null===_||void 0===_?void 0:_.message)&&(0,g.FD)(g.FK,{children:[(0,g.Y)(u.Alert,{type:"error",message:_.message,componentId:w.error,closable:!1}),(0,g.Y)(c.S,{})]}),(0,g.Y)(L,{prompts:x,error:_,hasNextPage:M,hasPreviousPage:k,isLoading:A,isFiltered:Boolean(h),onNextPage:T,onPreviousPage:E,onEditTags:F,experimentId:e,onCreatePrompt:I,paginationComponentId:w.pagination,tableHeaderComponentId:w.tableHeader})]}),P,R]})},void 0,B.u)},25117:function(e,t,r){r.d(t,{t:function(){return s}});var a=r(36476),n=r(61077);const o=async({reject:e,response:t,err:r})=>{const n=(0,a.a$)(t),o=n instanceof a.Bk?r:n;if(t)try{var s;const e=null===(s=await t.json())||void 0===s?void 0:s.message;e&&(o.message=e)}catch{}e(o)},s={listProviders:()=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/supported-providers",error:o}),listModels:e=>{const t=new URLSearchParams;e&&t.append("provider",e);const r=["ajax-api/3.0/mlflow/gateway/supported-models",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},getProviderConfig:e=>{const t=new URLSearchParams;t.append("provider",e);const r=["ajax-api/3.0/mlflow/gateway/provider-config",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},createSecret:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/secrets/create",method:"POST",body:JSON.stringify(e),error:o}),getSecret:e=>{const t=new URLSearchParams;t.append("secret_id",e);const r=["ajax-api/3.0/mlflow/gateway/secrets/get",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},updateSecret:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/secrets/update",method:"POST",body:JSON.stringify(e),error:o}),deleteSecret:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/secrets/delete",method:"DELETE",body:JSON.stringify({secret_id:e}),error:o}),listSecrets:e=>{const t=new URLSearchParams;e&&t.append("provider",e);const r=["ajax-api/3.0/mlflow/gateway/secrets/list",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},createEndpoint:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/create",method:"POST",body:JSON.stringify(e),error:o}),getEndpoint:e=>{const t=new URLSearchParams;t.append("endpoint_id",e);const r=["ajax-api/3.0/mlflow/gateway/endpoints/get",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},updateEndpoint:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/update",method:"POST",body:JSON.stringify(e),error:o}),deleteEndpoint:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/delete",method:"DELETE",body:JSON.stringify({endpoint_id:e}),error:o}),listEndpoints:e=>{const t=new URLSearchParams;e&&t.append("provider",e);const r=["ajax-api/3.0/mlflow/gateway/endpoints/list",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},createModelDefinition:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/model-definitions/create",method:"POST",body:JSON.stringify(e),error:o}),getModelDefinition:e=>{const t=new URLSearchParams;t.append("model_definition_id",e);const r=["ajax-api/3.0/mlflow/gateway/model-definitions/get",t.toString()].join("?");return(0,n.AC)({relativeUrl:r,error:o})},listModelDefinitions:()=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/model-definitions/list",error:o}),updateModelDefinition:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/model-definitions/update",method:"POST",body:JSON.stringify(e),error:o}),deleteModelDefinition:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/model-definitions/delete",method:"DELETE",body:JSON.stringify({model_definition_id:e}),error:o}),attachModelToEndpoint:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/models/attach",method:"POST",body:JSON.stringify(e),error:o}),detachModelFromEndpoint:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/models/detach",method:"POST",body:JSON.stringify(e),error:o}),createEndpointBinding:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/bindings/create",method:"POST",body:JSON.stringify(e),error:o}),deleteEndpointBinding:e=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/endpoints/bindings/delete",method:"DELETE",body:JSON.stringify({binding_id:e}),error:o}),listEndpointBindings:(e,t,r)=>{const a=new URLSearchParams;e&&a.append("endpoint_id",e),t&&a.append("resource_type",t),r&&a.append("resource_id",r);const s=["ajax-api/3.0/mlflow/gateway/endpoints/bindings/list",a.toString()].join("?");return(0,n.AC)({relativeUrl:s,error:o})},listUsers:()=>(0,n.AC)({relativeUrl:"ajax-api/2.0/mlflow/users/list",error:o}),getSecretsConfig:()=>(0,n.AC)({relativeUrl:"ajax-api/3.0/mlflow/gateway/secrets/config",error:o})}},27042:function(e,t,r){r.d(t,{Q:function(){return _}});var a=r(68248),n=r(76118),o=r(46709),s=r(27757),i=r(79081),l=r(82716),d=r(7655),c=r(40724),u=r(884),m=r(73408);var p={name:"4zleql",styles:"display:block"};function g(e){return t=>function(e,t){const r=(0,d.A)(),{theme:c}=(0,s.u)(),u=e.props.searchValue.toLowerCase();return(0,o.useMemo)(()=>{if(!u)return e;if((0,n.sortedIndexOf)(t,u)>=0)return e;const s=/^[^,.:/=\-\s]+$/.test(u);return o.cloneElement(e,{flattenOptions:[{data:{value:u,disabled:!s,style:{color:s?c.colors.actionTertiaryTextDefault:c.colors.actionDisabledText},children:(0,m.Y)(i.T,{content:s?void 0:r.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),componentId:"mlflow.common.components.tag-select-dropdown.add-new-tag-tooltip",side:"right",children:(0,m.FD)("span",{css:p,children:[(0,m.Y)(l.PlusIcon,{css:(0,a.AH)({marginRight:c.spacing.sm},"")}),r.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:u})]})})},key:u,groupOption:!1},...e.props.flattenOptions]})},[t,e,u,r,c])}(t,e)}var f={name:"1d3w5wq",styles:"width:100%"};function h({allAvailableTags:e,control:t,onKeyChangeCallback:r}){const a=(0,d.A)(),[n,s]=(0,o.useState)(!1),i=(0,o.useRef)(null),{field:c,fieldState:p}=(0,u.as)({control:t,name:"key",rules:{required:{message:a.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,m.Y)(l.LegacySelect,{allowClear:!0,ref:i,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:g(e)},css:f,placeholder:a.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:c.value,defaultValue:c.value,open:n,onDropdownVisibleChange:e=>{s(e)},filterOption:(e,t)=>null===t||void 0===t?void 0:t.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{c.onChange(e),null===r||void 0===r||r(e)},onClear:()=>{c.onChange(void 0),null===r||void 0===r||r(void 0)},validationState:p.error?"error":void 0,children:e.map(e=>(0,m.Y)(l.LegacySelect.Option,{value:e,children:e},e))})}var v=r(59281),y=r(77153);function w(e){return new Map(e.map(e=>[e.key,e]))}var b={name:"82a6rk",styles:"flex:1"},x={name:"82a6rk",styles:"flex:1"};const _=({onSuccess:e,saveTagsHandler:t,allAvailableTags:r,valueRequired:p=!1,title:g})=>{const f=(0,o.useRef)(),[_,C]=(0,o.useState)(""),{theme:k}=(0,s.u)(),[S,Y]=(0,o.useState)(new Map),[A,T]=(0,o.useState)(new Map),[E,P]=(0,o.useState)(!1),F=(0,u.mN)({defaultValues:{key:void 0,value:""}}),R=()=>P(!1),I=(0,o.useCallback)(e=>{f.current=e,Y(w(e.tags||[])),T(w(e.tags||[])),F.reset(),P(!0)},[F]),L=async()=>{f.current&&(C(""),O(!0),t(f.current,Array.from(S.values()),Array.from(A.values())).then(()=>{R(),null===e||void 0===e||e(),O(!1)}).catch(e=>{var t;O(!1),C(e instanceof y.s?null===(t=e.getUserVisibleError())||void 0===t?void 0:t.message:e.message)}))},U=(0,d.A)(),j=F.watch(),[D,O]=(0,o.useState)(!1),B=(0,o.useMemo)(()=>!(0,n.isEqual)((0,n.sortBy)(Array.from(S.values()),"key"),(0,n.sortBy)(Array.from(A.values()),"key")),[S,A]),N=j.key||j.value,V=B&&N;return{EditTagsModal:(0,m.FD)(i.d,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:E,title:null!==g&&void 0!==g?g:(0,m.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:R,footer:(0,m.FD)(s.x,{children:[(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:R,css:(0,a.AH)({marginRight:B?0:k.spacing.sm},""),children:U.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),V?(0,m.Y)(M,{formValues:j,isLoading:D,onSaveTask:L}):(0,m.Y)(i.T,{content:B?void 0:U.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),componentId:"mlflow.common.hooks.useeditkeyvaluetagsmodal.tooltip",children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!B,loading:D,type:"primary",onClick:L,children:U.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,m.FD)("form",{onSubmit:F.handleSubmit(()=>{if(p&&!j.value.trim())return;const e=new Map(A);e.set(j.key,j),T(e),F.reset()}),css:(0,a.AH)({display:"flex",alignItems:"flex-end",gap:k.spacing.md},""),children:[(0,m.FD)("div",{css:(0,a.AH)({minWidth:0,display:"flex",gap:k.spacing.md,flex:1},""),children:[(0,m.FD)("div",{css:b,children:[(0,m.Y)(l.FormUI.Label,{htmlFor:"key",children:U.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,m.Y)(h,{allAvailableTags:r||[],control:F.control,onKeyChangeCallback:e=>{var t;const r=e?A.get(e):void 0;F.setValue("value",null!==(t=null===r||void 0===r?void 0:r.value)&&void 0!==t?t:"")}})]}),(0,m.FD)("div",{css:x,children:[(0,m.Y)(l.FormUI.Label,{htmlFor:"value",children:p?U.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):U.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,m.Y)(l.RHFControlledComponents.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:F.control,"aria-label":p?U.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):U.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:U.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,m.Y)(i.T,{content:U.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),componentId:"mlflow.common.hooks.useeditkeyvaluetagsmodal.add-tag-tooltip",children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":U.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(l.PlusIcon,{})})})]}),_&&(0,m.Y)(l.FormUI.Message,{type:"error",message:_}),(0,m.Y)("div",{css:(0,a.AH)({display:"flex",rowGap:k.spacing.xs,flexWrap:"wrap",marginTop:k.spacing.sm},""),children:Array.from(A.values()).map(e=>(0,m.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(({key:e})=>{T(t=>(t.delete(e),new Map(t)))})(e)},e.key))})]}),showEditTagsModal:I,isLoading:D}};var C={name:"1y0ex1",styles:"max-width:400px"};function M({isLoading:e,formValues:t,onSaveTask:r}){const o=(0,d.A)(),{theme:i}=(0,s.u)(),l=`${`${(0,n.truncate)(t.key,{length:20})||"_"}`}${t.value?`:${(0,n.truncate)(t.value,{length:20})}`:""}`,c=o.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:l});return(0,m.FD)(s.aw.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,m.Y)(s.aw.Trigger,{asChild:!0,children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:e,type:"primary",children:o.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,m.FD)(s.aw.Content,{align:"end","aria-label":c,children:[(0,m.Y)(s.T.Paragraph,{css:C,children:c}),(0,m.Y)(s.aw.Close,{asChild:!0,children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:r,children:o.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,m.Y)(s.aw.Close,{asChild:!0,children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,a.AH)({marginLeft:i.spacing.sm},""),children:o.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,m.Y)(s.aw.Arrow,{})]})]})}},27556:function(e,t,r){r.d(t,{YQ:function(){return n},d7:function(){return s}});var a=r(46709);function n(e,t,r){var n=this,o=(0,a.useRef)(null),s=(0,a.useRef)(0),i=(0,a.useRef)(null),l=(0,a.useRef)([]),d=(0,a.useRef)(),c=(0,a.useRef)(),u=(0,a.useRef)(e),m=(0,a.useRef)(!0);u.current=e;var p="undefined"!=typeof window,g=!t&&0!==t&&p;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var f=!!(r=r||{}).leading,h=!("trailing"in r)||!!r.trailing,v="maxWait"in r,y="debounceOnServer"in r&&!!r.debounceOnServer,w=v?Math.max(+r.maxWait||0,t):null;(0,a.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]);var b=(0,a.useMemo)(function(){var e=function(e){var t=l.current,r=d.current;return l.current=d.current=null,s.current=e,c.current=u.current.apply(r,t)},r=function(e,t){g&&cancelAnimationFrame(i.current),i.current=g?requestAnimationFrame(e):setTimeout(e,t)},a=function(e){if(!m.current)return!1;var r=e-o.current;return!o.current||r>=t||r<0||v&&e-s.current>=w},b=function(t){return i.current=null,h&&l.current?e(t):(l.current=d.current=null,c.current)},x=function e(){var n=Date.now();if(a(n))return b(n);if(m.current){var i=t-(n-o.current),l=v?Math.min(i,w-(n-s.current)):i;r(e,l)}},_=function(){if(p||y){var u=Date.now(),g=a(u);if(l.current=[].slice.call(arguments),d.current=n,o.current=u,g){if(!i.current&&m.current)return s.current=o.current,r(x,t),f?e(o.current):c.current;if(v)return r(x,t),e(o.current)}return i.current||r(x,t),c.current}};return _.cancel=function(){i.current&&(g?cancelAnimationFrame(i.current):clearTimeout(i.current)),s.current=0,l.current=o.current=d.current=i.current=null},_.isPending=function(){return!!i.current},_.flush=function(){return i.current?b(Date.now()):c.current},_},[f,v,t,w,h,g,p,y]);return b}function o(e,t){return e===t}function s(e,t,r){var s=r&&r.equalityFn||o,i=(0,a.useRef)(e),l=(0,a.useState)({})[1],d=n((0,a.useCallback)(function(e){i.current=e,l({})},[l]),t,r),c=(0,a.useRef)(e);return s(c.current,e)||(d(e),c.current=e),[i.current,d]}},56123:function(e,t,r){r.d(t,{e:function(){return s}});var a=r(49708),n=r(25117);const o=()=>n.t.listProviders(),s=()=>{var e,t;const r=(0,a.I)(["gateway_providers"],{queryFn:o,retry:!1});return{data:null===(e=r.data)||void 0===e?void 0:e.providers,error:null!==(t=r.error)&&void 0!==t?t:void 0,isLoading:r.isLoading,refetch:r.refetch}}},59281:function(e,t,r){r.d(t,{t:function(){return h}});var a=r(68248),n=r(82716),o=r(79081),s=r(27757),i=r(46709),l=r(7655),d=r(91701),c=r(73408);const{Paragraph:u}=s.T;var m={name:"zjik7",styles:"display:flex"},p={name:"1ff36h2",styles:"flex-grow:1"};const g=i.memo(e=>{const{theme:t}=(0,s.u)();return(0,c.Y)(o.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(u,{css:p,children:(0,c.Y)("pre",{css:(0,a.AH)({backgroundColor:t.colors.backgroundPrimary,marginTop:t.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,a.AH)({marginTop:t.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(n.CopyIcon,{}),"aria-label":"Copy"})})]})})});function f(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const h=({isClosable:e=!1,onClose:t,tag:r,enableFullViewModal:d=!1,charLimit:u=30,maxWidth:m=300,className:p})=>{const h=(0,l.A)(),[v,y]=(0,i.useState)(!1),{shouldTruncateKey:w,shouldTruncateValue:b}=function(e,t=30){const{key:r,value:a}=e,n=r.length+a.length,o=r.length>a.length,s=o?a.length:r.length;return n<=t?{shouldTruncateKey:!1,shouldTruncateValue:!1}:s>t/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:o,shouldTruncateValue:!o}}(r,u),x=d&&(w||b),_=h.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(n.Tag,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:t,title:r.key,className:p,children:(0,c.Y)(o.T,{content:x?_:"",componentId:"mlflow.common.components.key-value-tag.tooltip",children:(0,c.FD)("span",{css:(0,a.AH)({maxWidth:m,display:"inline-flex"},""),onClick:()=>x?y(!0):void 0,children:[(0,c.Y)(s.T.Text,{bold:!0,title:r.key,css:f(w),children:r.key}),r.value&&(0,c.FD)(s.T.Text,{title:r.value,css:f(b),children:[": ",r.value]})]})})}),(0,c.Y)("div",{children:v&&(0,c.Y)(g,{tagKey:r.key,tagValue:r.value,isKeyValueTagFullViewModalVisible:v,setIsKeyValueTagFullViewModalVisible:y})})]})}},61060:function(e,t,r){r.d(t,{n:function(){return m}});var a=r(46709),n=r(48667),o=r(56606),s=r(78922),i=r(27949),l=r(4200);class d extends l.Q{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),(0,o.f8)(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,s.$)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){i.j.batch(()=>{var t,r,a,n;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(a=(n=this.mutateOptions).onSettled)||a.call(n,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var o,s,i,l;null==(o=(s=this.mutateOptions).onError)||o.call(s,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(i=(l=this.mutateOptions).onSettled)||i.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}var c=r(39595),u=r(56154);function m(e,t,r){const s=(0,o.GR)(e,t,r),l=(0,c.jE)({context:s.context}),[m]=a.useState(()=>new d(l,s));a.useEffect(()=>{m.setOptions(s)},[m,s]);const g=(0,n.r)(a.useCallback(e=>m.subscribe(i.j.batchCalls(e)),[m]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),f=a.useCallback((e,t)=>{m.mutate(e,t).catch(p)},[m]);if(g.error&&(0,u.G)(m.options.useErrorBoundary,[g.error]))throw g.error;return{...g,mutate:f,mutateAsync:g.mutate}}function p(){}},76256:function(e,t,r){r.d(t,{L:function(){return n},S:function(){return o}});var a=r(43617);function n(e,t){return(0,a.N4)(t)}const o=a.N4},89949:function(e,t,r){r.d(t,{tH:function(){return i}});var a=r(46709);function n(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}n({},"ErrorBoundary",()=>i);n({},"ErrorBoundaryContext",()=>o);const o=(0,a.createContext)(null),s={didCatch:!1,error:null};class i extends a.Component{state=s;static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary=(...e)=>{const{error:t}=this.state;null!==t&&(this.props.onReset?.({args:e,reason:"imperative-api"}),this.setState(s))};componentDidCatch(e,t){this.props.onError?.(e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:a}=this.props;r&&null!==t.error&&function(e=[],t=[]){return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,a)&&(this.props.onReset?.({next:a,prev:e.resetKeys,reason:"keys"}),this.setState(s))}render(){const{children:e,fallbackRender:t,FallbackComponent:r,fallback:n}=this.props,{didCatch:s,error:i}=this.state;let l=e;if(s){const e={error:i,resetErrorBoundary:this.resetErrorBoundary};if((0,a.isValidElement)(n))l=n;else if("function"===typeof t)l=t(e);else{if(!r)throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop");l=(0,a.createElement)(r,e)}}return(0,a.createElement)(o.Provider,{value:{didCatch:s,error:i,resetErrorBoundary:this.resetErrorBoundary}},l)}}function l(e){if(null==e||"boolean"!==typeof e.didCatch||"function"!==typeof e.resetErrorBoundary)throw new Error("ErrorBoundaryContext not found");return!0}function d(){const e=(0,a.useContext)(o);l(e);const[t,r]=(0,a.useState)({error:null,hasError:!1}),n=(0,a.useMemo)(()=>({resetBoundary:()=>{e?.resetErrorBoundary(),r({error:null,hasError:!1})},showBoundary:e=>r({error:e,hasError:!0})}),[e?.resetErrorBoundary]);if(t.hasError)throw t.error;return n}n({},"useErrorBoundary",()=>d);function c(e,t){const r=r=>(0,a.createElement)(i,t,(0,a.createElement)(e,r)),n=e.displayName||e.name||"Unknown";return r.displayName=`withErrorBoundary(${n})`,r}n({},"withErrorBoundary",()=>c)}}]);