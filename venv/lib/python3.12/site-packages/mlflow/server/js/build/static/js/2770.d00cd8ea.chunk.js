"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2770],{60312:function(e,n,s){s.d(n,{m:function(){return a}});var i=s(82716),o=s(73408);var t={name:"13udsys",styles:"height:100%"};const a=({children:e,className:n})=>(0,o.Y)(i.PageWrapper,{css:t,className:n,children:e})},72770:function(e,n,s){s.r(n),s.d(n,{default:function(){return $e}});var i=s(68248),o=s(46709),t=s(60312),a=s(27757),l=s(82716),r=s(79081),d=s(40724),c=s(91105),p=s(55570),g=s(91113),u=s(66916),m=s(7655),h=s(30431),f=s(89015);var y=s(93585),v=s(73408);const x=({availableProviders:e,filter:n,onFilterChange:s})=>(0,v.Y)(y.E,{availableProviders:e,filter:n,onFilterChange:s,componentIdPrefix:"mlflow.gateway.endpoints-list"});let b=function(e){return e.NAME="name",e.PROVIDER="provider",e.MODELS="models",e.USED_BY="used_by",e.LAST_MODIFIED="last_modified",e.CREATED="created",e}({});const Y={[b.NAME]:"Name",[b.PROVIDER]:"Provider",[b.MODELS]:"Models",[b.USED_BY]:"Used by",[b.LAST_MODIFIED]:"Last modified",[b.CREATED]:"Created"},w=[b.NAME],A=({visibleColumns:e,onColumnsChange:n})=>{const{theme:s}=(0,a.u)(),o=(0,m.A)(),t=Object.values(b).filter(e=>!w.includes(e));return(0,v.FD)(l.DialogCombobox,{componentId:"mlflow.gateway.endpoints-list.columns-dropdown",label:"Columns",multiSelect:!0,children:[(0,v.Y)(l.DialogComboboxCustomButtonTriggerWrapper,{children:(0,v.Y)(a.B,{componentId:"mlflow.gateway.endpoints-list.columns-button",endIcon:(0,v.Y)(l.ChevronDownIcon,{}),"data-testid":"endpoints-column-selector-button",children:(0,v.FD)("div",{css:(0,i.AH)({display:"flex",gap:s.spacing.sm,alignItems:"center"},""),children:[(0,v.Y)(l.ColumnsIcon,{}),o.formatMessage({id:"Qayyg6",defaultMessage:"Columns"})]})})}),(0,v.Y)(l.DialogComboboxContent,{minWidth:200,children:(0,v.Y)(l.DialogComboboxOptionList,{children:t.map(s=>(0,v.Y)(l.DialogComboboxOptionListCheckboxItem,{value:s,checked:e.includes(s),onChange:()=>(s=>{if(w.includes(s))return;const i=e.includes(s)?e.filter(e=>e!==s):[...e,s];n(i)})(s),children:Y[s]},s))})})]})},D=Object.values(b).filter(e=>e!==b.CREATED);const T=e=>"scorer"===e?"Scorers":e;var I={name:"ti75j2",styles:"margin:0"};const C=({open:e,endpointName:n,bindings:s,onClose:t})=>{const{theme:c,getPrefixedClassName:p}=(0,a.u)(),g=(0,m.A)(),u=(0,o.useCallback)(({isActive:e})=>(0,v.Y)("div",{css:(0,a.i)({width:c.general.heightBase/2,transform:e?"rotate(90deg)":void 0,transition:"transform 0.2s"}),children:(0,v.Y)(a.o,{css:(0,i.AH)({svg:{width:c.general.heightBase/2,height:c.general.heightBase/2}},"")})}),[c]),h=(0,o.useMemo)(()=>{const e=p("collapse"),n=`.${e}-item`,s=`.${e}-header`,i=`.${e}-content-box`;return{border:"none",backgroundColor:"transparent",[`& > ${n}`]:{border:`1px solid ${c.colors.borderDecorative}`,borderRadius:c.general.borderRadiusBase,marginBottom:c.spacing.sm,overflow:"hidden"},[`& > ${n} > ${s}`]:{paddingLeft:c.spacing.sm,paddingTop:c.spacing.sm,paddingBottom:c.spacing.sm,display:"flex",alignItems:"center",backgroundColor:c.colors.backgroundSecondary},[i]:{padding:0}}},[c,p]),f=(0,o.useMemo)(()=>{const e=new Map;return s.forEach(n=>{e.has(n.resource_type)||e.set(n.resource_type,[]),e.get(n.resource_type).push(n)}),e},[s]),y=(0,o.useMemo)(()=>Array.from(f.keys()),[f]);return(0,v.Y)(l.Drawer.Root,{modal:!0,open:e,onOpenChange:e=>{e||t()},children:(0,v.FD)(l.Drawer.Content,{componentId:"mlflow.gateway.endpoint-bindings.drawer",width:480,title:(0,v.Y)(a.T.Title,{level:3,css:I,children:(0,v.Y)(d.A,{id:"YEN2Ll",defaultMessage:"Used by ({count})",values:{count:s.length}})}),children:[(0,v.Y)(r.S,{size:"md"}),0===s.length?(0,v.Y)(l.Empty,{description:(0,v.Y)(d.A,{id:"LxUEVH",defaultMessage:"No resources connected to this endpoint"})}):(0,v.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:c.spacing.md},""),children:[(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(d.A,{id:"r5/6HV",defaultMessage:"Resources using endpoint: {name}",values:{name:n}})}),(0,v.Y)(l.Accordion,{componentId:"mlflow.gateway.endpoint-bindings.accordion",activeKey:y,dangerouslyAppendEmotionCSS:h,dangerouslySetAntdProps:{expandIconPosition:"left",expandIcon:u},children:Array.from(f.entries()).map(([e,n])=>(0,v.Y)(l.Accordion.Panel,{header:(0,v.FD)("span",{css:(0,i.AH)({fontWeight:c.typography.typographyBoldFontWeight},""),children:[T(e)," (",n.length,")"]}),children:(0,v.Y)("div",{css:(0,i.AH)({maxHeight:416,overflowY:"auto"},""),children:n.map(e=>(0,v.FD)("div",{css:(0,i.AH)({padding:c.spacing.sm,borderBottom:`1px solid ${c.colors.borderDecorative}`,"&:last-child":{borderBottom:"none"}},""),children:[(0,v.Y)(a.T.Text,{children:e.display_name||e.resource_id}),(0,v.Y)("div",{css:(0,i.AH)({marginTop:c.spacing.xs/2},""),children:(0,v.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({fontSize:c.typography.fontSizeSm},""),children:(0,v.Y)(d.A,{id:"AFrm2A",defaultMessage:"Created {date}",values:{date:g.formatDate(new Date(e.created_at),{year:"numeric",month:"short",day:"numeric"})}})})})]},`${e.endpoint_id}-${e.resource_type}-${e.resource_id}`))})},e))})]})]})})};var M=s(98332),S=s(39595),_=s(61060),H=s(25117);const k=({open:e,endpoint:n,bindings:s,onClose:o,onSuccess:t})=>{const{theme:l}=(0,a.u)(),{mutateAsync:r}=(()=>{const e=(0,S.jE)();return(0,_.n)({mutationFn:e=>H.t.deleteEndpoint(e),onSuccess:()=>{e.invalidateQueries(["gateway_endpoints"]),e.invalidateQueries(["gateway_bindings"])}})})(),c=s.length>0;if(!n)return null;return(0,v.Y)(M.A,{open:e,onClose:o,onConfirm:async()=>{n&&(await r(n.endpoint_id),null===t||void 0===t||t())},title:"Delete Endpoint",itemName:n.name,itemType:"endpoint",componentIdPrefix:"mlflow.gateway.delete-endpoint-modal",requireConfirmation:c,warningMessage:c?(0,v.Y)(d.A,{id:"VGGGB3",defaultMessage:"This endpoint is currently in use. Deleting it will break connections to the resources listed below."}):void 0,additionalContent:(()=>{if(c)return(0,v.FD)("div",{children:[(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(d.A,{id:"SDClGN",defaultMessage:"Resources using this endpoint ({count})",values:{count:s.length}})}),(0,v.Y)("div",{css:(0,i.AH)({marginTop:l.spacing.xs,maxHeight:120,overflowY:"auto",border:`1px solid ${l.colors.borderDecorative}`,borderRadius:l.general.borderRadiusBase},""),children:s.map(e=>{return(0,v.FD)("div",{css:(0,i.AH)({padding:`${l.spacing.xs}px ${l.spacing.sm}px`,borderBottom:`1px solid ${l.colors.borderDecorative}`,"&:last-child":{borderBottom:"none"}},""),children:[(0,v.Y)(a.T.Text,{css:(0,i.AH)({fontSize:l.typography.fontSizeSm},""),children:e.resource_id}),(0,v.Y)(a.T.Text,{color:"secondary",css:(0,i.AH)({display:"block",fontSize:l.typography.fontSizeSm},""),children:(n=e.resource_type,"scorer"===n?"Scorer":n)})]},`${e.resource_type}-${e.resource_id}`);var n})})]})})()})};var F=s(64226),E=s(29447),L=s(75329);const R=({modelMappings:e})=>{const{theme:n}=(0,a.u)(),[s,t]=(0,o.useState)(!1);if(!e||0===e.length)return(0,v.Y)(a.T.Text,{color:"secondary",children:"-"});const r=e.map(e=>{var n;return null===(n=e.model_definition)||void 0===n?void 0:n.provider}).filter(e=>Boolean(e)),d=[...new Set(r)];if(0===d.length)return(0,v.Y)(a.T.Text,{color:"secondary",children:"-"});const c=d[0],p=d.slice(1).length,g=s?d:[c];return(0,v.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:n.spacing.xs/2},""),children:[g.map(e=>(0,v.Y)(l.Tag,{componentId:"mlflow.gateway.endpoints-list.provider-tag",children:(0,L.aU)(e)},e)),p>0&&(0,v.Y)(a.T.Link,{componentId:"mlflow.gateway.endpoints-list.provider-toggle",onClick:()=>t(!s),css:(0,i.AH)({fontSize:n.typography.fontSizeSm},""),children:s?"Show less":`+${p} more`})]})},B=({modelMappings:e})=>{const{theme:n}=(0,a.u)(),[s,t]=(0,o.useState)(!1);if(!e||0===e.length)return(0,v.Y)(a.T.Text,{color:"secondary",children:"-"});const l=e[0],r=e.slice(1).length,d=s?e:[l];return(0,v.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:n.spacing.xs/2},""),children:[d.map(e=>{var s,o;return(0,v.Y)(a.T.Text,{css:(0,i.AH)({fontSize:n.typography.fontSizeSm},""),children:null!==(s=null===(o=e.model_definition)||void 0===o?void 0:o.model_name)&&void 0!==s?s:"-"},e.mapping_id)}),r>0&&(0,v.Y)(a.T.Link,{componentId:"mlflow.gateway.endpoints-list.models-toggle",onClick:()=>t(!s),css:(0,i.AH)({fontSize:n.typography.fontSizeSm},""),children:s?"Show less":`+${r} more`})]})};var $={name:"opde7s",styles:"color:inherit"};const z=({bindings:e,onViewBindings:n})=>{const{theme:s}=(0,a.u)();return e&&0!==e.length?(0,v.FD)("button",{type:"button",onClick:n,css:(0,i.AH)({display:"flex",alignItems:"center",gap:s.spacing.xs,background:"none",border:"none",padding:0,cursor:"pointer",color:s.colors.actionPrimaryBackgroundDefault,"&:hover":{textDecoration:"underline"}},""),children:[(0,v.Y)(l.LinkIcon,{css:(0,i.AH)({color:s.colors.textSecondary,fontSize:14},"")}),(0,v.FD)(a.T.Text,{css:$,children:[e.length," ",1===e.length?"resource":"resources"]})]}):(0,v.Y)(a.T.Text,{color:"secondary",children:"-"})};var P={name:"1189xqs",styles:"flex:2"},N={name:"82a6rk",styles:"flex:1"},O={name:"1189xqs",styles:"flex:2"},j={name:"82a6rk",styles:"flex:1"},U={name:"82a6rk",styles:"flex:1"},K={name:"82a6rk",styles:"flex:1"},V={name:"1yvnci",styles:"flex:0;min-width:96px;max-width:96px"};const G=({endpoint:e,bindings:n,visibleColumns:s,onViewBindings:o,onDelete:t})=>{var r;const{theme:d}=(0,a.u)(),{formatMessage:p}=(0,m.A)();return(0,v.FD)(l.TableRow,{children:[(0,v.Y)(l.TableCell,{css:P,children:(0,v.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:d.spacing.sm},""),children:[(0,v.Y)(l.ChainIcon,{css:(0,i.AH)({color:d.colors.textSecondary,flexShrink:0},"")}),(0,v.Y)(c.N_,{to:E.Ay.getEndpointDetailsRoute(e.endpoint_id),css:(0,i.AH)({color:d.colors.actionPrimaryBackgroundDefault,textDecoration:"none",fontWeight:d.typography.typographyBoldFontWeight,"&:hover":{textDecoration:"underline"}},""),children:null!==(r=e.name)&&void 0!==r?r:e.endpoint_id})]})}),s.includes(b.PROVIDER)&&(0,v.Y)(l.TableCell,{css:N,children:(0,v.Y)(R,{modelMappings:e.model_mappings})}),s.includes(b.MODELS)&&(0,v.Y)(l.TableCell,{css:O,children:(0,v.Y)(B,{modelMappings:e.model_mappings})}),s.includes(b.USED_BY)&&(0,v.Y)(l.TableCell,{css:j,children:(0,v.Y)(z,{bindings:n,onViewBindings:o})}),s.includes(b.LAST_MODIFIED)&&(0,v.Y)(l.TableCell,{css:U,children:(0,v.Y)(F.f,{date:new Date(e.last_updated_at)})}),s.includes(b.CREATED)&&(0,v.Y)(l.TableCell,{css:K,children:(0,v.Y)(F.f,{date:new Date(e.created_at)})}),(0,v.Y)(l.TableCell,{css:V,children:(0,v.Y)(a.B,{componentId:"mlflow.gateway.endpoints-list.delete-button",type:"primary",icon:(0,v.Y)(l.TrashIcon,{}),"aria-label":p({id:"UNoKOI",defaultMessage:"Delete endpoint"}),onClick:t})})]})};var q={name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"},Q={name:"1hetg88",styles:"max-width:300px"},W={name:"1189xqs",styles:"flex:2"},X={name:"82a6rk",styles:"flex:1"},Z={name:"1189xqs",styles:"flex:2"},J={name:"82a6rk",styles:"flex:1"},ee={name:"82a6rk",styles:"flex:1"},ne={name:"82a6rk",styles:"flex:1"},se={name:"1yvnci",styles:"flex:0;min-width:96px;max-width:96px"};const ie=({onEndpointDeleted:e})=>{var n,s;const{theme:t}=(0,a.u)(),{formatMessage:r}=(0,m.A)(),[c,p]=(0,o.useState)(""),[g,y]=(0,o.useState)({providers:[]}),[Y,w]=(0,o.useState)(D),[T,I]=(0,o.useState)(null),[M,S]=(0,o.useState)(null),{endpoints:_,filteredEndpoints:H,isLoading:F,availableProviders:E,getBindingsForEndpoint:L,refetch:R}=(({searchFilter:e,filter:n})=>{const{data:s,isLoading:i,refetch:t}=(0,h.c)(),{data:a,isLoading:l}=(0,f.K)(),r=(0,o.useMemo)(()=>{const e=new Map;return null===a||void 0===a||a.forEach(n=>{var s;const i=null!==(s=e.get(n.endpoint_id))&&void 0!==s?s:[];e.set(n.endpoint_id,[...i,n])}),e},[a]),d=(0,o.useCallback)(e=>{var n;return null!==(n=r.get(e))&&void 0!==n?n:[]},[r]),c=(0,o.useMemo)(()=>{if(!s)return[];const e=new Set;return s.forEach(n=>{var s;null===(s=n.model_mappings)||void 0===s||s.forEach(n=>{var s;null!==(s=n.model_definition)&&void 0!==s&&s.provider&&e.add(n.model_definition.provider)})}),Array.from(e)},[s]),p=(0,o.useMemo)(()=>{if(!s)return[];let i=s;if(e.trim()){const n=e.toLowerCase();i=i.filter(e=>{var s;return(null!==(s=e.name)&&void 0!==s?s:e.endpoint_id).toLowerCase().includes(n)})}return n.providers.length>0&&(i=i.filter(e=>{var s;return null===(s=e.model_mappings)||void 0===s?void 0:s.some(e=>{var s;return(null===(s=e.model_definition)||void 0===s?void 0:s.provider)&&n.providers.includes(e.model_definition.provider)})})),i},[s,e,n]);return{endpoints:null!==s&&void 0!==s?s:[],filteredEndpoints:p,isLoading:i||l,availableProviders:c,getBindingsForEndpoint:d,refetch:t}})({searchFilter:c,filter:g}),B=c.trim().length>0||g.providers.length>0,$=(0,o.useMemo)(()=>B&&0===H.length?(0,v.Y)(l.Empty,{title:(0,v.Y)(d.A,{id:"0skVwM",defaultMessage:"No endpoints found"}),description:null}):0===_.length?(0,v.Y)("div",{css:q,children:(0,v.Y)(l.Empty,{image:(0,v.Y)(l.CloudModelIcon,{}),title:(0,v.Y)(d.A,{id:"5+bcQe",defaultMessage:"No endpoints created"}),description:(0,v.Y)(d.A,{id:"0trCaF",defaultMessage:'Use the "Create endpoint" button to create a new endpoint'})})}):null,[_,H,B]);return F||!_?(0,v.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",justifyContent:"center",gap:t.spacing.sm,padding:t.spacing.lg,minHeight:200},""),children:[(0,v.Y)(a.S,{size:"small"}),(0,v.Y)(d.A,{id:"97xY+o",defaultMessage:"Loading endpoints..."})]}):(0,v.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:t.spacing.md},""),children:[(0,v.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:t.spacing.sm},""),children:[(0,v.Y)(u.I,{componentId:"mlflow.gateway.endpoints-list.search",prefix:(0,v.Y)(u.S,{}),placeholder:r({id:"4I6V2N",defaultMessage:"Search Endpoints"}),value:c,onChange:e=>p(e.target.value),allowClear:!0,css:Q}),(0,v.Y)(x,{availableProviders:E,filter:g,onFilterChange:y}),(0,v.Y)(A,{visibleColumns:Y,onColumnsChange:w})]}),(0,v.FD)(l.Table,{scrollable:!0,noMinHeight:!0,empty:$,css:(0,i.AH)({borderLeft:`1px solid ${t.colors.border}`,borderRight:`1px solid ${t.colors.border}`,borderTop:`1px solid ${t.colors.border}`,borderBottom:0===H.length?`1px solid ${t.colors.border}`:"none",borderRadius:t.general.borderRadiusBase,overflow:"hidden"},""),children:[(0,v.FD)(l.TableRow,{isHeader:!0,children:[(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.name-header",css:W,children:(0,v.Y)(d.A,{id:"KSgUAW",defaultMessage:"Name"})}),Y.includes(b.PROVIDER)&&(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.provider-header",css:X,children:(0,v.Y)(d.A,{id:"CvNffK",defaultMessage:"Provider"})}),Y.includes(b.MODELS)&&(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.models-header",css:Z,children:(0,v.Y)(d.A,{id:"jcg8zG",defaultMessage:"Models"})}),Y.includes(b.USED_BY)&&(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.bindings-header",css:J,children:(0,v.Y)(d.A,{id:"T3Ew34",defaultMessage:"Used by"})}),Y.includes(b.LAST_MODIFIED)&&(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.modified-header",css:ee,children:(0,v.Y)(d.A,{id:"mBhoMH",defaultMessage:"Last modified"})}),Y.includes(b.CREATED)&&(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.created-header",css:ne,children:(0,v.Y)(d.A,{id:"dNaKCA",defaultMessage:"Created"})}),(0,v.Y)(l.TableHeader,{componentId:"mlflow.gateway.endpoints-list.actions-header",css:se})]}),H.map(e=>(0,v.Y)(G,{endpoint:e,bindings:L(e.endpoint_id),visibleColumns:Y,onViewBindings:()=>{var n;return I({endpointId:e.endpoint_id,endpointName:null!==(n=e.name)&&void 0!==n?n:e.endpoint_id,bindings:L(e.endpoint_id)})},onDelete:()=>(e=>{S(e)})(e)},e.endpoint_id))]}),(0,v.Y)(C,{open:null!==T,endpointName:null!==(n=null===T||void 0===T?void 0:T.endpointName)&&void 0!==n?n:"",bindings:null!==(s=null===T||void 0===T?void 0:T.bindings)&&void 0!==s?s:[],onClose:()=>I(null)}),(0,v.Y)(k,{open:null!==M,endpoint:M,bindings:M?L(M.endpoint_id):[],onClose:()=>S(null),onSuccess:()=>{S(null),R(),null===e||void 0===e||e()}})]})},oe="gateway-side-nav-collapsed",te="gateway-side-nav-full-width",ae=[{tab:"endpoints",label:(0,v.Y)(d.A,{id:"AB6/gE",defaultMessage:"Endpoints"}),icon:(0,v.Y)(l.ChainIcon,{}),to:E.Ay.gatewayPageRoute},{tab:"usage",label:(0,v.Y)(d.A,{id:"oWMviK",defaultMessage:"Usage"}),icon:(0,v.Y)(l.ChartLineIcon,{}),to:E.Ay.usagePageRoute},{tab:"api-keys",label:(0,v.Y)(d.A,{id:"retpTK",defaultMessage:"API Keys"}),icon:(0,v.Y)(l.KeyIcon,{}),to:E.Ay.apiKeysPageRoute}],le=({activeTab:e})=>{const{theme:n}=(0,a.u)();return(0,v.Y)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",paddingTop:n.spacing.sm,paddingRight:n.spacing.sm,borderRight:`1px solid ${n.colors.border}`,boxSizing:"content-box",width:32,[`& .${oe}`]:{display:"flex"},[`& .${te}`]:{display:"none"},[n.responsive.mediaQueries.xl]:{width:160,[`& .${oe}`]:{display:"none"},[`& .${te}`]:{display:"flex"}}},""),children:ae.map(s=>{const o=e===s.tab;return(0,v.Y)(c.N_,{to:s.to,children:(0,v.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:n.spacing.sm,padding:`${n.spacing.xs}px ${n.spacing.sm}px`,borderRadius:n.borders.borderRadiusSm,cursor:"pointer",backgroundColor:o?n.colors.actionDefaultBackgroundHover:void 0,color:o?n.colors.actionDefaultIconHover:n.colors.actionDefaultIconDefault,height:n.typography.lineHeightBase,boxSizing:"content-box",":hover":{backgroundColor:n.colors.actionDefaultBackgroundHover}},""),children:[(0,v.Y)(r.T,{componentId:`mlflow.gateway.side-nav.${s.tab}.tooltip`,content:s.label,side:"right",delayDuration:0,children:(0,v.Y)("span",{className:oe,children:s.icon})}),(0,v.Y)("span",{className:te,children:s.icon}),(0,v.Y)(a.T.Text,{className:te,bold:o,color:"primary",children:s.label})]})},s.tab)})})};var re=s(91701),de=s(19112);const ce='pip install "mlflow[genai]"',pe="mlflow server \\\n  --backend-store-uri sqlite:///mlflow.db \\\n  --host 0.0.0.0 \\\n  --port 5000",ge='# Generate a passphrase once and store it securely\nopenssl rand -base64 32\n\n# Set the environment variable before starting the server\nexport MLFLOW_CRYPTO_KEK_PASSPHRASE="<your-stored-passphrase>"';var ue={name:"1u3mpuz",styles:"font-size:48px"},me={name:"fyowp3",styles:"margin:0;text-align:center"},he={name:"1azakc",styles:"text-align:center"},fe={name:"ti75j2",styles:"margin:0"},ye={name:"pw7jst",styles:"position:relative;width:100%"},ve={name:"ti75j2",styles:"margin:0"},xe={name:"pw7jst",styles:"position:relative;width:100%"},be={name:"ti75j2",styles:"margin:0"},Ye={name:"pw7jst",styles:"position:relative;width:100%"},we={name:"mmdt3g",styles:"font-size:14px"};const Ae=()=>{const{theme:e}=(0,a.u)();return(0,v.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing.lg,maxWidth:800,margin:"0 auto"},""),children:[(0,v.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing.sm,marginBottom:e.spacing.lg},""),children:[(0,v.Y)("div",{css:(0,i.AH)({borderRadius:e.borders.borderRadiusMd,background:e.colors.actionDefaultBackgroundHover,padding:e.spacing.md,color:e.colors.textPrimary},""),children:(0,v.Y)(l.CloudModelIcon,{css:ue})}),(0,v.Y)(a.T.Title,{level:2,css:me,children:(0,v.Y)(d.A,{id:"3h/dM6",defaultMessage:"Set up MLflow AI Gateway"})}),(0,v.Y)(a.T.Text,{color:"secondary",css:he,children:(0,v.Y)(d.A,{id:"+8+eEg",defaultMessage:"Follow these steps to enable the AI Gateway feature for managing AI provider credentials."})})]}),(0,v.FD)("div",{css:(0,i.AH)({width:"100%",display:"flex",flexDirection:"column",gap:e.spacing.lg,border:`1px solid ${e.colors.border}`,borderRadius:e.borders.borderRadiusLg,padding:e.spacing.lg,backgroundColor:e.colors.backgroundPrimary,boxShadow:e.shadows.xs},""),children:[(0,v.FD)("section",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:e.spacing.sm},""),children:[(0,v.Y)(a.T.Title,{level:4,css:fe,children:(0,v.Y)(d.A,{id:"FedDjX",defaultMessage:"1. Install MLflow with GenAI extras on the server"})}),(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(d.A,{id:"6cm996",defaultMessage:"The AI Gateway requires additional dependencies installed on the MLflow tracking server (not client machines):"})}),(0,v.FD)("div",{css:ye,children:[(0,v.Y)(re.i,{componentId:"mlflow.gateway.setup.install.copy",css:(0,i.AH)({zIndex:1,position:"absolute",top:e.spacing.xs,right:e.spacing.xs},""),showLabel:!1,copyText:ce,icon:(0,v.Y)(l.CopyIcon,{})}),(0,v.Y)(de.z7,{language:"text",theme:e.isDarkMode?"duotoneDark":"light",style:{padding:`${e.spacing.sm}px ${e.spacing.md}px`},children:ce})]})]}),(0,v.FD)("section",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:e.spacing.sm},""),children:[(0,v.Y)(a.T.Title,{level:4,css:ve,children:(0,v.Y)(d.A,{id:"ZoEf0Y",defaultMessage:"2. Use a SQL-based tracking store"})}),(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(d.A,{id:"OCpkAU",defaultMessage:"The AI Gateway requires a SQL-based backend store (SQLite, PostgreSQL, MySQL, or MSSQL) to persist credentials securely. Start the MLflow server with a database URI:"})}),(0,v.FD)("div",{css:xe,children:[(0,v.Y)(re.i,{componentId:"mlflow.gateway.setup.server.copy",css:(0,i.AH)({zIndex:1,position:"absolute",top:e.spacing.xs,right:e.spacing.xs},""),showLabel:!1,copyText:pe,icon:(0,v.Y)(l.CopyIcon,{})}),(0,v.Y)(de.z7,{showLineNumbers:!0,language:"text",theme:e.isDarkMode?"duotoneDark":"light",style:{padding:`${e.spacing.sm}px ${e.spacing.md}px`},children:pe})]})]}),(0,v.FD)("section",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:e.spacing.sm},""),children:[(0,v.Y)(a.T.Title,{level:4,css:be,children:(0,v.Y)(d.A,{id:"FVP/7B",defaultMessage:"3. Configure encryption passphrase (production deployments)"})}),(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(d.A,{id:"O+/hDQ",defaultMessage:"For local development, MLflow uses a default passphrase. For production deployments, server administrators must set a secure encryption passphrase on the tracking server before starting it:"})}),(0,v.FD)("div",{css:Ye,children:[(0,v.Y)(re.i,{componentId:"mlflow.gateway.setup.passphrase.copy",css:(0,i.AH)({zIndex:1,position:"absolute",top:e.spacing.xs,right:e.spacing.xs},""),showLabel:!1,copyText:ge,icon:(0,v.Y)(l.CopyIcon,{})}),(0,v.Y)(de.z7,{showLineNumbers:!0,language:"text",theme:e.isDarkMode?"duotoneDark":"light",style:{padding:`${e.spacing.sm}px ${e.spacing.md}px`},children:ge})]}),(0,v.Y)(l.Alert,{type:"warning",componentId:"mlflow.gateway.setup.passphrase.warning",closable:!1,message:(0,v.Y)(d.A,{id:"rDIzM4",defaultMessage:"This passphrase protects encryption keys and should never be shared. {securityNote}",values:{securityNote:(0,v.Y)("strong",{children:(0,v.Y)(d.A,{id:"+4+wQY",defaultMessage:"Store it securely and restrict access to server administrators only."})})}})})]}),(0,v.Y)("section",{children:(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(d.A,{id:"knJfuf",defaultMessage:"Learn more about the AI Gateway in the {gatewayDocs}.",values:{gatewayDocs:(0,v.FD)("a",{href:"https://mlflow.org/docs/latest",target:"_blank",rel:"noopener noreferrer",css:(0,i.AH)({display:"inline-flex",gap:e.spacing.xs,alignItems:"center"},""),children:[(0,v.Y)(d.A,{id:"VqSjYH",defaultMessage:"MLflow documentation"}),(0,v.Y)(a.au,{css:we})]})}})})})]})]})},De=()=>{const{theme:e}=(0,a.u)(),[n,s]=(0,o.useState)(!1);return n?null:(0,v.Y)("div",{css:(0,i.AH)({padding:`0 ${e.spacing.md}px`,paddingTop:e.spacing.md,paddingBottom:e.spacing.md},""),children:(0,v.Y)(l.Alert,{componentId:"mlflow.gateway.default-passphrase-warning",type:"warning",closable:!0,onClose:()=>{s(!0)},message:(0,v.Y)(d.A,{id:"FKoHx5",defaultMessage:"Security Notice: Default Passphrase in Use"}),description:(0,v.Y)(d.A,{id:"kbOsmf",defaultMessage:"The AI Gateway is using the default encryption passphrase. This is acceptable for development or single-user deployments, but for multi-user production environments, you should rotate the passphrase using the CLI command: mlflow crypto rotate-kek"})})})};var Te=s(49708);const Ie={secretsConfig:["gateway_secrets_config"],endpoints:["gateway_endpoints"],bindings:["gateway_bindings"],secrets:["gateway_secrets"],modelDefinitions:["gateway_model_definitions"],providers:["gateway_providers"]};var Ce=s(64755),Me=s(69507),Se=s(31655);const _e=()=>{const{theme:e}=(0,a.u)();return(0,v.FD)("span",{css:(0,i.AH)({display:"flex",alignItems:"center",gap:e.spacing.sm},""),children:[(0,v.Y)("span",{css:(0,i.AH)({display:"flex",borderRadius:e.borders.borderRadiusSm,backgroundColor:e.colors.backgroundSecondary,padding:e.spacing.sm},""),children:(0,v.Y)(l.CloudModelIcon,{})}),(0,v.Y)(d.A,{id:"9tCd/m",defaultMessage:"AI Gateway"})]})};var He={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},ke={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},Fe={name:"1tc6xju",styles:"flex:1;overflow:auto"},Ee={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},Le={name:"1rtaly3",styles:"flex:1;display:flex;overflow:hidden"},Re={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Be={name:"3z2sxu",styles:"display:flex;flex-direction:column;flex:1;overflow:hidden"};var $e=(0,p.X)(g.A.mlflowServices.EXPERIMENTS,()=>{var e,n;const{theme:s}=(0,a.u)(),p=(0,c.zy)(),{data:g,isLoading:u}=(0,Te.I)({queryKey:Ie.secretsConfig,queryFn:()=>H.t.getSecretsConfig(),retry:!1,staleTime:3e4}),m=(0,o.useMemo)(()=>p.pathname.includes("/api-keys")?"api-keys":p.pathname.includes("/usage")?"usage":"endpoints",[p.pathname]),h="/gateway"===p.pathname||"/gateway/"===p.pathname,f=p.pathname.includes("/api-keys"),y=p.pathname.includes("/usage"),x=!h&&!f&&!y;if(u)return(0,v.FD)(t.m,{css:He,children:[(0,v.Y)(r.S,{shrinks:!1}),(0,v.Y)(l.Header,{title:(0,v.Y)(_e,{})}),(0,v.FD)("div",{css:(0,i.AH)({flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:s.spacing.sm},""),children:[(0,v.Y)(a.S,{size:"small"}),(0,v.Y)(d.A,{id:"Rqy/A/",defaultMessage:"Loading..."})]})]});const b=null!==(e=null===g||void 0===g?void 0:g.secrets_available)&&void 0!==e&&e,Y=null!==(n=null===g||void 0===g?void 0:g.using_default_passphrase)&&void 0!==n&&n;if(!b)return(0,v.FD)(t.m,{css:ke,children:[(0,v.Y)(r.S,{shrinks:!1}),(0,v.Y)(l.Header,{title:(0,v.Y)(_e,{})}),(0,v.Y)("div",{css:Fe,children:(0,v.Y)(Ae,{})})]});const w=(0,Se.Z0)();return(0,v.FD)(t.m,{css:Ee,children:[(0,v.Y)(r.S,{shrinks:!1}),(0,v.Y)(l.Header,{title:(0,v.Y)(_e,{})}),Y&&(0,v.Y)(De,{}),(0,v.FD)("div",{css:Le,children:[!w&&(0,v.Y)(le,{activeTab:m}),(0,v.Y)("div",{css:Re,children:x?(0,v.Y)(c.sv,{}):(0,v.FD)(v.FK,{children:[h&&(0,v.FD)("div",{css:Be,children:[(0,v.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:s.spacing.md,borderBottom:`1px solid ${s.colors.borderDecorative}`},""),children:[(0,v.FD)(a.T.Title,{level:3,css:(0,i.AH)({margin:0,display:"flex",alignItems:"center",gap:s.spacing.sm},""),children:[(0,v.Y)(l.ChainIcon,{}),(0,v.Y)(d.A,{id:"RlaLwX",defaultMessage:"Endpoints"})]}),(0,v.Y)(c.N_,{to:E.Ay.createEndpointPageRoute,children:(0,v.Y)(a.B,{componentId:"mlflow.gateway.endpoints.create-button",type:"primary",icon:(0,v.Y)(l.PlusIcon,{}),children:(0,v.Y)(d.A,{id:"6di5qX",defaultMessage:"Create endpoint"})})})]}),(0,v.Y)("div",{css:(0,i.AH)({flex:1,overflow:"auto",padding:s.spacing.md},""),children:(0,v.Y)(ie,{})})]}),f&&(0,v.Y)(Ce.default,{}),y&&(0,v.Y)(Me.default,{})]})})]})]})})}}]);