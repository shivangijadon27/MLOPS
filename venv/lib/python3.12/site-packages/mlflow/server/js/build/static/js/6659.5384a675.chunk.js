"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[6659],{14466:function(e,t,n){n.d(t,{P:function(){return d},m:function(){return a}});var r=n(46709),o=n(82716),i=n(66916),s=n(73408);const a="newName";class l extends r.Component{constructor(...e){super(...e),this.inputToAutoFocus=void 0,this.autoFocusInputRef=e=>{this.inputToAutoFocus=e,e&&e.focus(),e&&e.select()},this.autoFocus=e=>{!1===e.visible&&!0===this.props.visible&&(this.inputToAutoFocus&&this.inputToAutoFocus.focus(),this.inputToAutoFocus&&this.inputToAutoFocus.select())},this.resetFields=e=>{const t=this.props.innerRef;e.name!==this.props.name&&t.current.resetFields([a])}}componentDidUpdate(e){this.autoFocus(e),this.resetFields(e)}render(){return(0,s.Y)(o.LegacyForm,{ref:this.props.innerRef,layout:"vertical",children:(0,s.Y)(o.LegacyForm.Item,{name:a,initialValue:this.props.name,rules:[{required:!0,message:`Please input a new name for the ${this.props.type}.`},{validator:this.props.validator}],label:`New ${this.props.type} name`,children:(0,s.Y)(i.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_modals_renameform.tsx_69",placeholder:`Input a ${this.props.type} name`,ref:this.autoFocusInputRef,"data-testid":"rename-modal-input"})})})}}const d=l},18705:function(e,t,n){n.d(t,{b:function(){return o}});var r=n(81641);const o=e=>{if(e)return(0,r.Mn)(e)&&e.graphQLErrors.length>0?e.graphQLErrors.map(e=>e.message||e.toString()).join(", "):"message"in e?e.message:e.toString()}},24712:function(e,t,n){n.d(t,{S:function(){return Y}});var r=n(68248),o=n(46709),i=n(884),s=n(27757),a=n(79081),l=n(82716),d=n(40724),u=n(97407),c=n(7655),m=n(73408);const g="value",p=({form:e,name:t,initialTags:n})=>{const r=(0,c.A)(),o=(0,u.$W)({name:t,emptyValue:{key:"",value:""},keyProperty:"key",valueProperty:g,form:e,defaultValues:n});return(0,m.FD)(u.Es,{...o,children:[(0,m.FD)(u.qd,{children:[(0,m.Y)(u.C2,{children:(0,m.Y)(d.A,{id:"h2SXjO",defaultMessage:"Key"})}),(0,m.Y)(u.C2,{children:(0,m.Y)(d.A,{id:"6yjymQ",defaultMessage:"Value"})})]}),o.fields.map((e,t)=>(0,m.FD)(u.qd,{children:[(0,m.Y)(u.R0,{index:t,rules:{validate:{unique:e=>{const n=o.getTagsValues();return(null===n||void 0===n?void 0:n.findIndex(t=>t.key===e))===t||r.formatMessage({id:"sLBHQp",defaultMessage:"Key must be unique"})},required:e=>{var n;const i=o.getTagsValues();return!(null!==i&&void 0!==i&&null!==(n=i.at(t))&&void 0!==n&&n[g]&&!e)||r.formatMessage({id:"J45Atg",defaultMessage:"Key is required if value is present"})}}}}),(0,m.Y)(u.tP,{index:t}),(0,m.Y)(u.ki,{index:t,componentId:"endpoint-tags-section.remove-button"})]},e.id))]})};var h=n(33972);const v="key",f="value",y="tags",x={key:"",value:""},Y=({componentIdPrefix:e,title:t,visible:n,initialTags:u,isLoading:c=!1,error:g,onSubmit:Y,onSuccess:M,onClose:_})=>{const w=(0,h.i)(()=>u,[u]),[b,A]=(0,o.useState)(!1),{theme:S}=(0,s.u)(),I=(0,i.mN)({mode:"onChange"}),C=()=>{A(!1),I.reset({[y]:[x]}),null===_||void 0===_||_()},T=(0,m.Y)(d.A,{id:"AGWpnl",defaultMessage:"Add tags"});return{TagAssignmentModal:(0,m.FD)(a.d,{componentId:"codegen_no_dynamic_mlflow_web_js_src_common_hooks_usetagassignmentmodal_82",title:null!==t&&void 0!==t?t:T,visible:null!==n&&void 0!==n?n:b,destroyOnClose:!0,onCancel:C,footer:(0,m.FD)(m.FK,{children:[(0,m.Y)(s.B,{componentId:"codegen_no_dynamic_mlflow_web_js_src_common_hooks_usetagassignmentmodal_91",onClick:C,disabled:c,children:(0,m.Y)(d.A,{id:"awekbG",defaultMessage:"Cancel"})}),(0,m.Y)(s.B,{componentId:"codegen_no_dynamic_mlflow_web_js_src_common_hooks_usetagassignmentmodal_99",type:"primary",onClick:I.handleSubmit(e=>{var t,n;const r=e[y].filter(e=>Boolean(e[v])),o=null!==(t=r.filter(e=>!(null!==u&&void 0!==u&&u.some(t=>t[v]===e[v]&&t[f]===e[f]))))&&void 0!==t?t:[],i=null!==(n=null===u||void 0===u?void 0:u.filter(e=>!r.some(t=>t[v]===e[v])))&&void 0!==n?n:[];Y(o,i).then(()=>{C(),null===M||void 0===M||M()})}),loading:c,disabled:c,children:(0,m.Y)(d.A,{id:"C6ReUY",defaultMessage:"Save"})})]}),children:[g&&(0,m.Y)(l.Alert,{type:"error",message:g,componentId:"codegen_no_dynamic_mlflow_web_js_src_common_hooks_usetagassignmentmodal_115",closable:!1,css:(0,r.AH)({marginBottom:S.spacing.sm},"")}),(0,m.Y)(p,{name:y,form:I,initialTags:w})]}),showTagAssignmentModal:()=>{A(!0)},hideTagAssignmentModal:C}}},29452:function(e,t,n){n.d(t,{B:function(){return a}});var r=n(46709),o=n(79081),i=n(11522),s=n(73408);class a extends r.Component{constructor(...e){super(...e),this.state={isSubmitting:!1},this.formRef=r.createRef(),this.onSubmit=async()=>{this.setState({isSubmitting:!0});try{const e=await this.formRef.current.validateFields();await this.props.handleSubmit(e),this.resetAndClearModalForm(),this.onRequestCloseHandler()}catch(e){this.handleSubmitFailure(e)}},this.resetAndClearModalForm=()=>{this.setState({isSubmitting:!1}),this.formRef.current.resetFields()},this.handleSubmitFailure=e=>{this.setState({isSubmitting:!1}),i.A.logErrorAndNotifyUser(e)},this.onRequestCloseHandler=()=>{this.resetAndClearModalForm(),this.props.onClose()},this.handleCancel=()=>{var e,t;this.onRequestCloseHandler(),null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}}render(){const{isSubmitting:e}=this.state,{okText:t,cancelText:n,isOpen:i,footer:a,children:l}=this.props,d=r.Children.map(l,e=>r.isValidElement(e)?r.cloneElement(e,{innerRef:this.formRef}):e);return(0,s.Y)(o.d,{"data-testid":"mlflow-input-modal",className:this.props.className,title:this.props.title,width:540,visible:i,onOk:this.onSubmit,okText:t,cancelText:n,confirmLoading:e,onCancel:this.handleCancel,footer:a,centered:!0,children:d})}}},30383:function(e,t,n){var r=n(46709),o=n(73408);class i extends r.Component{render(){return(0,o.Y)("div",{children:"Resource not found."})}}t.A=i},54401:function(e,t,n){n.d(t,{L:function(){return s}});n(46709);var r=n(82716),o=n(79081),i=n(73408);function s(e){const{usesFullHeight:t,...n}=e;return(0,i.FD)(r.PageWrapper,{css:t?a.useFullHeightLayout:a.wrapper,children:[(0,i.Y)(o.S,{css:a.fixedSpacer}),t?e.children:(0,i.Y)("div",{...n,css:a.container})]})}s.defaultProps={usesFullHeight:!1};const a={useFullHeightLayout:{height:"100%",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},56944:function(e,t,n){n.r(t),n.d(t,{RunPage:function(){return zt},default:function(){return $t}});var r=n(68248),o=n(82716),i=n(27757),s=n(56530),a=n(59930),l=n.n(a),d=n(46709),u=n(54401),c=n(91105),m=n(11522),g=n(44105),p=n(71206),h=n(43075),v=n(49633),f=n(73408);const y=({runTags:e,experimentId:t,runOutputs:n,artifactUri:o,runUuid:s})=>{const{theme:a}=(0,i.u)(),l=(0,v.Ub)(`(min-width: ${a.responsive.breakpoints.sm}px)`),u=e,c=(0,d.useMemo)(()=>Object.values(u),[u]);return(0,f.Y)("div",{css:(0,r.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:a.spacing.md,position:"relative"},""),children:(0,f.Y)(h.Ay,{runUuid:s,runTags:u,runOutputs:n,useAutoHeight:l,artifactRootUri:o,experimentId:t,entityTags:c})})};var x=n(40724),Y=n(10536),M=n(60284);const _=()=>{const{"*":e}=(0,c.g)();return"model-metrics"===e?g.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?g.N3.SYSTEM_METRIC_CHARTS:"evaluations"===e?g.N3.EVALUATIONS:"traces"===e?g.N3.TRACES:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?g.N3.ARTIFACTS:g.N3.OVERVIEW},w=[g.N3.ARTIFACTS,g.N3.EVALUATIONS],b=({runTags:e})=>{const{experimentId:t,runUuid:n}=(0,c.g)(),r=(0,c.Zp)(),{theme:s}=(0,i.u)(),a=_(),[l,u]=(0,d.useState)(w.includes(a));return(0,f.FD)(o.LegacyTabs,{activeKey:a,onChange:e=>{t&&n&&a!==e&&(u(w.includes(e)),e!==g.N3.OVERVIEW?r(M.Ay.getRunPageTabRoute(t,n,e)):r(M.Ay.getRunPageRoute(t,n)))},tabBarStyle:{margin:l&&"0px"},children:[(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(x.A,{id:"kA+QJr",defaultMessage:"Overview"})},g.N3.OVERVIEW),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(x.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},g.N3.MODEL_METRIC_CHARTS),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(x.A,{id:"hFlaPP",defaultMessage:"System metrics"})},g.N3.SYSTEM_METRIC_CHARTS),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(x.A,{id:"s8a93+",defaultMessage:"Traces"})},g.N3.EVALUATIONS),(0,f.Y)(o.LegacyTabs.TabPane,{tab:(0,f.Y)(x.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},g.N3.ARTIFACTS)]})};var A=n(79081),S=n(76118),I=n(43835),C=n(673),T=(n(27206),n(10165));var R={name:"s5xdrg",styles:"display:flex;align-items:center"},D={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function E({models:e,onRegisterClick:t,experimentId:n,runUuid:s}){const{theme:a}=(0,i.u)(),l=(e,l)=>(0,f.FD)(o.DropdownMenu.Group,{children:[(0,f.Y)(o.DropdownMenu.Label,{children:e}),l.map(e=>{const l=(0,S.first)(e.registeredModelVersionSummaries);if(!l)return(0,f.FD)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50",onClick:()=>t(e),children:[(0,f.Y)("div",{css:(0,r.AH)({marginRight:a.spacing.md},""),children:(0,S.last)(e.path.split("/"))}),(0,f.Y)(o.DropdownMenu.HintColumn,{children:(0,f.Y)(c.N_,{target:"_blank",to:M.Ay.getRunPageTabRoute(n,s,"artifacts/"+e.path),children:(0,f.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(i.au,{}),children:(0,f.Y)(x.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,displayedName:u,version:m,link:g}=l;return(0,f.Y)(c.N_,{target:"_blank",to:g,children:(0,f.FD)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80",children:[(0,f.Y)(o.DropdownMenu.IconWrapper,{css:R,children:"READY"===d?(0,f.Y)(T.h,{}):d?C.UA[d]:null}),(0,f.FD)("span",{css:(0,r.AH)({marginRight:a.spacing.md},""),children:[u,(0,f.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90",css:D,children:["v",m]})]}),(0,f.Y)(o.DropdownMenu.HintColumn,{children:(0,f.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(i.au,{}),children:(0,f.Y)(x.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)})]}),d=e.filter(e=>e.registeredModelVersionSummaries.length>0),u=e.filter(e=>!e.registeredModelVersionSummaries.length);return(0,f.FD)(f.FK,{children:[u.length?l("Unregistered models",u):null,u.length&&d.length?(0,f.Y)(o.DropdownMenu.Separator,{}):null,d.length?l("Registered models",d):null]})}const k=({runUuid:e,experimentId:t,runTags:n,artifactRootUri:s,registeredModelVersionSummaries:a})=>{const{theme:l}=(0,i.u)(),u=(0,d.useMemo)(()=>n?m.A.getLoggedModelsFromTags(n).map(({artifactPath:e})=>e):[],[n]),g=(0,d.useMemo)(()=>(0,S.orderBy)(u.map(e=>({path:e,absolutePath:`${s}/${e}`,registeredModelVersionSummaries:(null===a||void 0===a?void 0:a.filter(({source:t})=>t===`${s}/${e}`))||[]})),e=>{var t;return parseInt((null===(t=e.registeredModelVersionSummaries[0])||void 0===t?void 0:t.version)||"0",10)},"desc"),[u,a,s]),[p,h]=(0,d.useState)(null);if(g.length>1){const n=g.filter(e=>e.registeredModelVersionSummaries.length>0);return(0,f.FD)(f.FK,{children:[p&&(0,f.Y)(I.vR,{runUuid:e,modelPath:p.absolutePath,modelRelativePath:p.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>h(null)}),(0,f.FD)(o.DropdownMenu.Root,{modal:!1,children:[(0,f.Y)(A.T,{componentId:"mlflow.run_details.header.register-model-button.tooltip",side:"bottom",content:(0,f.Y)(x.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:n.length,loggedCount:g.length}}),children:(0,f.Y)(o.DropdownMenu.Trigger,{asChild:!0,children:(0,f.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,f.Y)(o.ChevronDownIcon,{}),children:(0,f.Y)(x.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,f.Y)(o.DropdownMenu.Content,{align:"end",children:(0,f.Y)(E,{models:g,onRegisterClick:h,experimentId:t,runUuid:e})})]})]})}const v=(0,S.first)(g);if(!v)return null;const y=(0,S.first)(v.registeredModelVersionSummaries);return y?(0,f.Y)(c.N_,{to:y.link,target:"_blank",css:(0,r.AH)({marginLeft:l.spacing.sm},""),children:(0,f.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,f.Y)(i.au,{}),type:"link",children:"Model registered"})}):(0,f.Y)(I.vR,{disabled:!1,runUuid:e,modelPath:v.absolutePath,modelRelativePath:v.path,showButton:!0,buttonType:"primary"})},F=()=>(0,f.FD)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.Y)("circle",{cx:"3",cy:"3",r:"2",stroke:"#727272",strokeWidth:"1.5"}),(0,f.Y)("path",{d:"M9 7.25C8.58579 7.25 8.25 7.58579 8.25 8C8.25 8.41421 8.58579 8.75 9 8.75V8V7.25ZM4.5 3V3.75H12V3V2.25H4.5V3ZM12 8V7.25H9V8V8.75H12V8ZM14.5 5.5H13.75C13.75 6.4665 12.9665 7.25 12 7.25V8V8.75C13.7949 8.75 15.25 7.29493 15.25 5.5H14.5ZM12 3V3.75C12.9665 3.75 13.75 4.5335 13.75 5.5H14.5H15.25C15.25 3.70507 13.7949 2.25 12 2.25V3Z",fill:"#727272"}),(0,f.Y)("path",{d:"M6.5 8H4C2.61929 8 1.5 9.11929 1.5 10.5V10.5C1.5 11.8807 2.61929 13 4 13H13.5",stroke:"#727272",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.Y)("path",{d:"M10.5 6.5L9.00077 8C8.96056 8 10.5 9.5 10.5 9.5",stroke:"#727272",strokeWidth:"1.5",strokeLinecap:"round"}),(0,f.Y)("path",{d:"M12.5 11.5C12.5 11.5 14 12.972 14 13C14 13.028 12.5 14.5 12.5 14.5",stroke:"#727272",strokeWidth:"1.5",strokeLinecap:"round"})]});var L=n(91944),U=n(31655);const N=()=>{const{theme:e}=(0,i.u)();return(0,f.Y)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.colors.backgroundSecondary,padding:6,borderRadius:e.spacing.lg},""),children:(0,f.Y)(i.I,{component:F,css:(0,r.AH)({display:"flex",color:e.colors.textSecondary},"")})})};var P={name:"ozd7xs",styles:"flex-shrink:0"};const V=({hasComparedExperimentsBefore:e,comparedExperimentIds:t=[],experiment:n,runDisplayName:o,runTags:s,runParams:a,runUuid:l,runOutputs:u,handleRenameRunClick:m,handleDeleteRunClick:p,artifactRootUri:h,registeredModelVersionSummaries:v,isLoading:y})=>{var _;const{theme:w}=(0,i.u)(),S=(0,L.Fi)(n.tags),I=(0,d.useMemo)(()=>{const e=!!S&&(0,L.qp)(S),t=!(!u||!u.modelOutputs)&&u.modelOutputs.length>0;return e&&!t},[S,u]),C=M.Ay.getExperimentPageTabRoute(null!==(_=n.experimentId)&&void 0!==_?_:"",I?g.fM.EvaluationRuns:g.fM.Runs);const T=[e&&t?(0,f.Y)(c.N_,{to:M.Ay.getCompareExperimentsPageRoute(t),children:(0,f.Y)(x.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:t.length}})}):(0,f.Y)(c.N_,{to:C,"data-testid":"experiment-runs-link",children:n.name})];n.experimentId&&T.push((0,f.Y)(c.N_,{to:C,"data-testid":"experiment-observatory-link-runs",children:I?(0,f.Y)(x.A,{id:"/T979r",defaultMessage:"Evaluations"}):(0,f.Y)(x.A,{id:"Rx8d9z",defaultMessage:"Runs"})}));const R=(0,c.Zp)(),D=(0,d.useCallback)(()=>{var e;const t=M.Ay.getExperimentPageTabRoute(null!==(e=n.experimentId)&&void 0!==e?e:"",g.fM.EvaluationRuns),r=new URLSearchParams({selectedRunUuid:l});R(`${t}?${r.toString()}`)},[R,n.experimentId,l]);return(0,f.FD)("div",{css:P,children:[(0,f.FD)(Y.z,{title:(0,f.FD)("span",{css:(0,r.AH)({display:"inline-flex",alignItems:"center",gap:w.spacing.sm},""),children:[(0,f.Y)(N,{}),(0,f.Y)("span",{"data-testid":"runs-header",children:o})]}),breadcrumbs:T,children:[(0,U.iA)()&&I?(0,f.Y)(A.T,{componentId:"mlflow.run-view.compare-button.tooltip",content:(0,f.Y)(x.A,{id:"Hem4uh",defaultMessage:"Compare this run with other evaluation runs"}),children:(0,f.Y)(i.B,{componentId:"mlflow.run-view.compare-button",onClick:D,children:(0,f.Y)(x.A,{id:"EDWwN/",defaultMessage:"Compare"})})}):null,(()=>{var e;return(0,f.Y)(k,{runUuid:l,experimentId:null!==(e=null===n||void 0===n?void 0:n.experimentId)&&void 0!==e?e:"",runTags:s,artifactRootUri:h,registeredModelVersionSummaries:v})})(),(0,f.Y)(Y.o,{menu:[{id:"overflow-rename-button",onClick:m,itemName:(0,f.Y)(x.A,{id:"fv7vQf",defaultMessage:"Rename"})},...p?[{id:"overflow-delete-button",onClick:p,itemName:(0,f.Y)(x.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]})]}),(0,f.Y)(b,{runTags:s})]})};var H=n(7655),O=n(90142),B=n(31153);const z=({status:e,useSpinner:t=!1,className:n})=>{const{theme:s}=(0,i.u)();return(0,f.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81",css:(0,r.AH)({backgroundColor:"FINISHED"===e?s.isDarkMode?s.colors.green800:s.colors.green100:"KILLED"===e||"FAILED"===e?s.isDarkMode?s.colors.red800:s.colors.red100:"SCHEDULED"===e||"RUNNING"===e?s.isDarkMode?s.colors.blue800:s.colors.blue100:void 0},""),className:n,children:[e&&(0,f.Y)(B.F,{status:e,useSpinner:t})," ",(0,f.Y)(i.T.Text,{css:(0,r.AH)({marginLeft:s.spacing.sm},""),children:"FINISHED"===e?(0,f.Y)(i.T.Text,{color:"success",children:(0,f.Y)(x.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===e?(0,f.Y)(i.T.Text,{color:"error",children:(0,f.Y)(x.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===e?(0,f.Y)(i.T.Text,{color:"error",children:(0,f.Y)(x.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===e?(0,f.Y)(i.T.Text,{color:"info",children:(0,f.Y)(x.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===e?(0,f.Y)(i.T.Text,{color:"info",children:(0,f.Y)(x.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):e})]})},$=({runInfo:e,tags:t})=>{var n;const r=m.A.getUser(e,t);return(0,f.Y)(c.N_,{to:M.Ay.searchRunsByUser(null!==(n=null===e||void 0===e?void 0:e.experimentId)&&void 0!==n?n:"",r),children:r})};var j=n(27461),K=n(76256),q=n(66916),G=n(77680),W=n(55274),J=n(90061),Q=n(43617),Z=n(47207);const{systemMetricsLabel:X,modelMetricsLabel:ee}=(0,G.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),te=e=>({key:t})=>t.toLowerCase().includes(e.toLowerCase()),ne=({metricsList:e,runInfo:t,header:n,table:s})=>{var a,l;const{theme:d}=(0,i.u)(),[{column:u},...m]=s.getLeafHeaders(),p=null===(a=m.find(e=>"value"===e.id))||void 0===a?void 0:a.column,h=e.some(({loggedModels:e})=>!(0,S.isEmpty)(e)),v=null===(l=m.find(e=>"models"===e.id))||void 0===l?void 0:l.column;return e.length?(0,f.FD)(f.FK,{children:[n&&(0,f.Y)(o.TableRow,{children:(0,f.Y)(o.TableCell,{css:(0,r.AH)({flex:1,backgroundColor:d.colors.backgroundSecondary},""),children:(0,f.FD)(i.T.Text,{bold:!0,children:[n," (",e.length,")"]})})}),e.map(({key:e,value:n,loggedModels:i})=>{var s,a;return(0,f.FD)(o.TableRow,{children:[(0,f.Y)(o.TableCell,{style:{flex:u.getCanResize()?u.getSize()/100:void 0},children:(0,f.Y)(c.N_,{to:M.Ay.getRunPageTabRoute(null!==(s=t.experimentId)&&void 0!==s?s:"",null!==(a=t.runUuid)&&void 0!==a?a:"",g.N3.MODEL_METRIC_CHARTS),children:e})}),(0,f.Y)(o.TableCell,{css:(0,r.AH)({flex:null!==p&&void 0!==p&&p.getCanResize()?p.getSize()/100:void 0},""),children:n.toString()}),h&&(0,f.Y)(o.TableCell,{css:(0,r.AH)({flex:null!==v&&void 0!==v&&v.getCanResize()?v.getSize()/100:void 0},""),children:(0,S.isEmpty)(i)?"-":(0,f.Y)(o.Overflow,{children:null===i||void 0===i?void 0:i.map(e=>{var t,n,r,o,i,s;return(0,f.Y)(c.N_,{target:"_blank",rel:"noopener noreferrer",to:M.Ay.getExperimentLoggedModelDetailsPage(null!==(n=null===(r=e.info)||void 0===r?void 0:r.experiment_id)&&void 0!==n?n:"",null!==(o=null===(i=e.info)||void 0===i?void 0:i.model_id)&&void 0!==o?o:""),children:null===(s=e.info)||void 0===s?void 0:s.name},null===(t=e.info)||void 0===t?void 0:t.model_id)})})})]},e)})]}):null};var re={name:"ozd7xs",styles:"flex-shrink:0"};const oe=({latestMetrics:e,runInfo:t,loggedModels:n,expandToParentContainer:s})=>{const{theme:a}=(0,i.u)(),{detailsPageTableStyles:l,detailsPageNoEntriesStyles:u}=(0,Z.z)(),c=(0,H.A)(),[m,g]=(0,d.useState)(""),p=(0,d.useMemo)(()=>{if(!n)return{};const e=(0,S.compact)((0,S.flatMap)(n,e=>{var t,n;return null===(t=e.data)||void 0===t||null===(n=t.metrics)||void 0===n?void 0:n.map(({key:t})=>({key:t,model:e}))})),t=(0,S.groupBy)(e,"key");return(0,S.mapValues)(t,e=>e.map(({model:e})=>e))},[n]),h=(0,d.useMemo)(()=>{const t=(0,S.values)(e);return(0,S.isEmpty)(p)?t:t.map(e=>{var t;return{...e,loggedModels:null!==(t=p[e.key])&&void 0!==t?t:[]}})},[e,p]),v=h.some(({loggedModels:e})=>!(0,S.isEmpty)(e)),y=(0,d.useMemo)(()=>[{id:"models",header:c.formatMessage({id:"mRshzt",defaultMessage:"Models"}),accessorKey:"models",enableResizing:!0}],[c]),Y=(0,d.useMemo)(()=>{const e=[{id:"key",accessorKey:"key",header:()=>(0,f.Y)(x.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,f.Y)(x.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!0}];return v&&e.push(...y),e},[v,y]),M=(0,d.useMemo)(()=>{const e=h.filter(({key:e})=>(0,W.bw)(e)),t=h.filter(({key:e})=>!(0,W.bw)(e));return e.length>0&&t.length>0?[{header:c.formatMessage(X),metrics:e.filter(te(m))},{header:c.formatMessage(ee),metrics:t.filter(te(m))}]:[{header:void 0,metrics:h.filter(te(m))}]},[m,h,c]),_=(0,K.L)("mlflow/server/js/src/experiment-tracking/components/run-page/overview/RunViewMetricsTable.tsx",{data:h,getCoreRowModel:(0,J.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:Y});return(0,f.FD)("div",{css:(0,r.AH)({flex:s?1:"0 0 auto",display:"flex",flexDirection:"column",overflow:"hidden"},""),children:[(0,f.Y)(i.T.Title,{level:4,css:re,children:(0,f.Y)(x.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:h.filter(te(m)).length}})}),(0,f.Y)("div",{css:(0,r.AH)({padding:a.spacing.sm,border:`1px solid ${a.colors.borderDecorative}`,borderRadius:a.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:s?1:"0 0 auto",overflow:"hidden"},""),children:(()=>{if(!h.length)return(0,f.Y)("div",{css:u,children:(0,f.Y)(o.Empty,{description:(0,f.Y)(x.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,S.sum)(M.map(({metrics:e})=>e.length))<1;return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{css:(0,r.AH)({marginBottom:a.spacing.sm},""),children:(0,f.Y)(q.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186",prefix:(0,f.Y)(q.S,{}),placeholder:c.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:m,onChange:e=>g(e.target.value),allowClear:!0})}),(0,f.FD)(o.Table,{scrollable:!0,empty:e?(0,f.Y)("div",{children:(0,f.Y)(o.Empty,{description:(0,f.Y)(x.A,{id:"lT1Joh",defaultMessage:"No metrics match the search filter"})})}):null,css:l,children:[(0,f.Y)(o.TableRow,{isHeader:!0,children:_.getLeafHeaders().map(e=>(0,f.Y)(o.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312",header:e,column:e.column,setColumnSizing:_.setColumnSizing,isResizing:e.column.getIsResizing(),style:{flex:e.column.getCanResize()?e.column.getSize()/100:void 0},children:(0,Q.Kv)(e.column.columnDef.header,e.getContext())},e.id))}),M.map((e,n)=>(0,f.Y)(ne,{metricsList:e.metrics,runInfo:t,header:e.header,table:_},e.header||n))]})]})})()})]})};var ie=n(39606),se=n(48292);var ae=n(5690),le=n(99002);const de=({parentRunUuid:e})=>{const t=(0,s.wA)(),n=(0,s.d4)(({entities:t})=>t.runInfosByUuid[e]),r=(0,le.t)({runUuid:e,disabled:!(0,U.wD)()}),i=(0,d.useMemo)(()=>{var e;return(0,U.wD)()?null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.info:n},[r,n]);return(0,d.useEffect)(()=>{(0,U.wD)()||i||t((0,ae.aO)(e))},[t,e,i]),i?i.experimentId&&i.runUuid?(0,f.Y)(c.N_,{to:M.Ay.getRunPageRoute(i.experimentId,i.runUuid),children:i.runName}):null:(0,f.Y)(o.ParagraphSkeleton,{loading:!0,label:(0,f.Y)(x.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var ue=n(27042),ce=n(24712),me=n(59281),ge=n(181);var pe={name:"1wcfv52",styles:"margin-right:0"};const he=({runUuid:e,tags:t,onTagsUpdated:n,className:a})=>{const l=(0,U.V0)(),[u,c]=(0,d.useState)(!1),{theme:m}=(0,i.u)(),g=(0,s.wA)(),p=(0,H.A)(),[h,v]=(0,d.useMemo)(()=>[(0,S.keys)(t).filter(ge.oD),(0,S.values)(t).filter(({key:e})=>(0,ge.oD)(e))],[t]),y=v.map(({key:e,value:t})=>({key:e,value:t})),{TagAssignmentModal:Y,showTagAssignmentModal:M}=(0,ce.S)({componentIdPrefix:"mlflow.run-view-tags-box",initialTags:y,isLoading:u,onSubmit:(t,n)=>(c(!0),g((0,ae.cj)(e,t,n)).then(()=>{c(!1)})),onSuccess:n}),{EditTagsModal:_,showEditTagsModal:w,isLoading:b}=(0,ue.Q)({valueRequired:!0,allAvailableTags:h,saveTagsHandler:async(t,r,o)=>g((0,ae.hD)(e,r,o)).then(n)}),I=()=>{l?M():w({tags:v})},C=p.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,f.FD)("div",{css:(0,r.AH)({paddingTop:m.spacing.xs,paddingBottom:m.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:m.spacing.xs},""),className:a,children:[y.length<1?(0,f.Y)(i.B,{componentId:"mlflow.run_details.overview.tags.add_button",size:"small",type:"tertiary",onClick:I,children:(0,f.Y)(x.A,{id:"dt3hj5",defaultMessage:"Add tags"})}):(0,f.FD)(f.FK,{children:[y.map(e=>(0,f.Y)(me.t,{tag:e,enableFullViewModal:!0,css:pe},`${e.key}-${e.value}`)),(0,f.Y)(A.T,{componentId:"mlflow.run_details.overview.tags.edit_button.tooltip",content:C,children:(0,f.Y)(i.B,{componentId:"mlflow.run_details.overview.tags.edit_button","aria-label":C,size:"small",icon:(0,f.Y)(o.PencilIcon,{}),onClick:I})})]}),b&&(0,f.Y)(i.S,{size:"small"}),_,Y]})};var ve=n(52644),fe=n(53935),ye=n(42747),xe=n(16867);const Ye=({children:e,maxHeight:t=150,setIsExpanded:n,isExpanded:o})=>{const{theme:s}=(0,i.u)(),a=(0,d.useRef)(null),[l,u]=(0,d.useState)(!1),c=(0,ye.tz)();(0,d.useLayoutEffect)(()=>{if(!a.current)return;const e=()=>{if(a.current){const e=a.current.scrollHeight;u(e>t)}},n=new ResizeObserver(()=>{e()});return n.observe(a.current),e(),()=>{n.disconnect()}},[t,n]);const m={maxHeight:o?"none":`${t}px`,overflow:o?"visible":"hidden",position:"relative",width:"100%"};return(0,f.FD)("div",{children:[(0,f.FD)("div",{css:m,ref:a,children:[e,!o&&l&&(0,f.Y)("div",{"data-testid":"truncation-gradient",css:(0,r.AH)({position:"absolute",bottom:0,height:"60%",width:"100%",background:`linear-gradient(to bottom, ${(0,xe.I)(s.colors.backgroundPrimary,0)}, ${(0,xe.I)(s.colors.backgroundPrimary,1)})`},"")})]}),l&&(0,f.Y)(i.B,{type:"link",componentId:"discovery.data_explorer.entity_comment.show_comment_text_toggle","data-testid":"show-comment-toggle",onClick:()=>n(e=>!e),"aria-label":o?c.formatMessage({id:"bdVsGZ",defaultMessage:"Collapse description"}):c.formatMessage({id:"NyzPHY",defaultMessage:"Expand description"}),style:{marginTop:s.spacing.xs},children:o?(0,f.Y)(ye.sA,{id:"XBPcbA",defaultMessage:"Show less"}):(0,f.Y)(ye.sA,{id:"HLbyGb",defaultMessage:"Show more"})})]})};var Me={name:"16sgqi9",styles:"&& p{margin:0 !important;}"};const _e=({runUuid:e,tags:t,onDescriptionChanged:n,isFlatLayout:a=!1})=>{var l;const u=(null===(l=t[fe.e])||void 0===l?void 0:l.value)||"",[c,m]=(0,d.useState)(!1),[g,p]=(0,d.useState)(!1),h=(0,H.A)(),{theme:v}=(0,i.u)(),y=(0,s.wA)(),Y=t=>y((0,ae.Jv)(e,fe.e,t)).then(n).then(()=>m(!1)),M=()=>m(!1),_=!u,w=a?i.T.Text:i.T.Title;return(0,f.FD)("div",{css:(0,r.AH)({marginBottom:a?0:v.spacing.md},""),children:[(0,f.FD)(w,{level:4,css:(0,r.AH)({display:"flex",alignItems:"center",gap:v.spacing.xs},""),withoutMargins:a,children:[!a&&(0,f.Y)(x.A,{id:"ugwpKL",defaultMessage:"Description"}),a&&!_?null:(0,f.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":h.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>m(!0),icon:(0,f.Y)(o.PencilIcon,{}),css:(0,r.AH)({...a&&{"&&":{padding:"0 !important"}}},""),children:a?(0,f.Y)(x.A,{id:"vmiE+n",defaultMessage:"Add description"}):null})]}),_&&!c&&!a&&(0,f.Y)(i.T.Hint,{children:(0,f.Y)(x.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!_||c)&&(a?(0,f.FD)("div",{css:(0,r.AH)({display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:v.spacing.sm},""),children:[(0,f.Y)("div",{css:Me,children:c?(0,f.Y)(ve.VY,{defaultMarkdown:u,onSubmit:Y,onCancel:M,showEditor:c}):(0,f.Y)(Ye,{isExpanded:g,setIsExpanded:p,maxHeight:100,children:(0,f.Y)(ve.VY,{defaultMarkdown:u,onSubmit:Y,onCancel:M,showEditor:c})})}),!c&&(0,f.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":h.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>m(!0),icon:(0,f.Y)(o.PencilIcon,{})})]}):c?(0,f.Y)(ve.VY,{defaultMarkdown:u,onSubmit:Y,onCancel:M,showEditor:c}):(0,f.Y)(Ye,{isExpanded:g,setIsExpanded:p,maxHeight:100,children:(0,f.Y)(ve.VY,{defaultMarkdown:u,onSubmit:Y,onCancel:M,showEditor:c})}))]})};n(69603);var we={name:"e0dnmk",styles:"cursor:pointer"};const be=({registeredModelVersionSummaries:e})=>{const{theme:t}=(0,i.u)();return(0,f.Y)(o.Overflow,{children:null===e||void 0===e?void 0:e.map(e=>(0,f.FD)(c.N_,{to:e.link,css:(0,r.AH)({display:"flex",alignItems:"center",gap:t.spacing.sm},""),children:[(0,f.Y)(T.h,{})," ",e.displayedName," ",(0,f.FD)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40",css:we,children:["v",e.version]})]},e.displayedName))})};var Ae=n(49708),Se=n(59795);const Ie=async({queryKey:e})=>{const[,{runUuid:t}]=e;return Se.M.getPromptVersionsForRun(t)};var Ce=n(6050);var Te={name:"1bmnxg7",styles:"white-space:nowrap"};const Re=({tags:e,runUuid:t})=>{const{theme:n}=(0,i.u)(),{data:s,error:a,isLoading:l}=(({runUuid:e},t={})=>{var n;const r=(0,Ae.I)(["run_uuid",{runUuid:e}],{queryFn:Ie,retry:!1,...t});return{data:r.data,error:null!==(n=r.error)&&void 0!==n?n:void 0,isLoading:r.isLoading,refetch:r.refetch}})({runUuid:t}),d=[...(null===s||void 0===s?void 0:s.model_versions)||[],...(0,Ce.U7)(e)];return l?(0,f.Y)(o.ParagraphSkeleton,{}):a||!d||0===d.length?(0,f.Y)(i.T.Hint,{css:(0,r.AH)({padding:`${n.spacing.xs}px 0px`},""),children:"\u2014"}):(0,f.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"row",gap:n.spacing.sm,flexWrap:"wrap",padding:`${n.spacing.xs}px 0px`},""),children:d.map((e,t)=>{const n=M.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name)),r=`${e.name} (v${e.version})`;return(0,f.FD)(i.T.Text,{css:Te,children:[(0,f.Y)(c.N_,{to:n,children:r}),t<d.length-1&&","]},r)})})},De=({loggedModels:e,loggedModelsV3:t,runInfo:n})=>{const{theme:s}=(0,i.u)(),{experimentId:a,runUuid:l}=n,u=e=>(0,S.first)(e)||(0,f.Y)(x.A,{id:"0HbGko",defaultMessage:"Model"}),m=(0,d.useMemo)(()=>{const t=e.map(e=>u(e.flavors));return new Set(t).size!==t.length},[e]);return(0,f.FD)(o.Overflow,{children:[e.map((e,t)=>(0,f.FD)(c.N_,{to:M.Ay.getRunPageRoute(null!==a&&void 0!==a?a:"",null!==l&&void 0!==l?l:"",e.artifactPath),css:(0,r.AH)({display:"flex",alignItems:"center",gap:s.spacing.sm,cursor:"pointer",height:m&&t>0?s.general.heightBase:s.general.heightSm},""),children:[(0,f.Y)(o.ModelsIcon,{}),(0,f.FD)("div",{children:[u(e.flavors),m&&t>0&&(0,f.Y)(i.T.Hint,{children:e.artifactPath})]})]},e.artifactPath)),t.map((e,t)=>{var n,i,l,d,u;return(0,f.FD)(c.N_,{to:M.Ay.getExperimentLoggedModelDetailsPageRoute(null!==a&&void 0!==a?a:"",null!==(n=null===(i=e.info)||void 0===i?void 0:i.model_id)&&void 0!==n?n:""),css:(0,r.AH)({display:"flex",alignItems:"center",gap:s.spacing.sm,cursor:"pointer",height:m&&t>0?s.general.heightBase:s.general.heightSm},""),children:[(0,f.Y)(o.ModelsIcon,{}),(0,f.Y)("div",{children:null===(u=e.info)||void 0===u?void 0:u.name})]},null!==(l=null===(d=e.info)||void 0===d?void 0:d.model_id)&&void 0!==l?l:t)})]})};var Ee=n(91701),ke=n(42762);var Fe={name:"1wcfv52",styles:"margin-right:0"},Le={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},Ue={name:"1a7v7i3",styles:"margin-right:0;&>div{padding-right:0;}"};const Ne=({runUuid:e,tags:t,search:n,className:s,hasIcon:a=!0})=>{var l,d,u;const c=null===t||void 0===t||null===(l=t[g.xd])||void 0===l?void 0:l.value,p=null===t||void 0===t||null===(d=t[m.A.gitCommitTag])||void 0===d?void 0:d.value,h=m.A.renderSource(t,n,e,c),{theme:v}=(0,i.u)();return h?(0,f.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",gap:v.spacing.sm,paddingTop:v.spacing.sm,paddingBottom:v.spacing.sm,flexWrap:"wrap"},""),className:s,children:[a&&(0,f.Y)(ke.m,{sourceType:null===(u=t[m.A.sourceTypeTag])||void 0===u?void 0:u.value,css:(0,r.AH)({color:v.colors.actionPrimaryBackgroundDefault},"")}),h," ",c&&(0,f.Y)(A.T,{componentId:"mlflow.experiment-tracking.run-source.branch",content:c,children:(0,f.Y)(o.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48",css:Fe,children:(0,f.FD)("div",{css:Le,children:[(0,f.Y)(o.BranchIcon,{})," ",c]})})}),p&&(0,f.FD)(i.aw.Root,{componentId:"mlflow.run_details.overview.source.commit_hash_popover",children:[(0,f.Y)(i.aw.Trigger,{asChild:!0,children:(0,f.Y)(o.Tag,{componentId:"mlflow.run_details.overview.source.commit_hash",css:Ue,children:(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:v.spacing.xs,whiteSpace:"nowrap",alignContent:"center"},""),children:[(0,f.Y)(o.GitCommitIcon,{}),p.slice(0,7)]})})}),(0,f.FD)(i.aw.Content,{align:"start",children:[(0,f.Y)(i.aw.Arrow,{}),(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:v.spacing.xs,alignItems:"center"},""),children:[p,(0,f.Y)(Ee.i,{showLabel:!1,size:"small",type:"tertiary",copyText:p,icon:(0,f.Y)(o.CopyIcon,{})})]})]})]})]}):(0,f.Y)(i.T.Hint,{children:"\u2014"})};n(48107);var Pe=n(20980),Ve=n(88185);var He=n(9230),Oe=n(6619),Be=n(75173),ze=n(59863);const $e=[Oe.I7.RelationshipType,Oe.I7.Step,Oe.I7.Name,Oe.I7.Status,Oe.I7.CreationTime,Oe.I7.RegisteredModels,Oe.I7.Dataset];var je={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Ke={name:"g030ms",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center"},qe={name:"ozd7xs",styles:"flex-shrink:0"};const Ge=({inputs:e,outputs:t,runInfo:n,loggedModelsV3:s,isLoadingLoggedModels:a=!1,loggedModelsError:l})=>{const{theme:u}=(0,i.u)(),{models:c}=((e,t,n,r)=>{const o=(0,d.useMemo)(()=>{var t;return(0,S.compact)((0,S.uniq)(null===e||void 0===e||null===(t=e.modelInputs)||void 0===t?void 0:t.map(e=>e.modelId))).map(e=>{const t=null===r||void 0===r?void 0:r.find(t=>{var n;return(null===(n=t.info)||void 0===n?void 0:n.model_id)===e});if(t)return{...t,direction:"input"}})},[null===e||void 0===e?void 0:e.modelInputs,r]),i=(0,d.useMemo)(()=>{var e;return(0,S.compact)((0,S.uniq)(null===t||void 0===t||null===(e=t.modelOutputs)||void 0===e?void 0:e.map(e=>e.modelId))).map(e=>{var n,o;const i=null===r||void 0===r?void 0:r.find(t=>{var n;return(null===(n=t.info)||void 0===n?void 0:n.model_id)===e}),s=null===t||void 0===t||null===(n=t.modelOutputs)||void 0===n?void 0:n.find(({modelId:e})=>{var t;return e===(null===i||void 0===i||null===(t=i.info)||void 0===t?void 0:t.model_id)});if(i)return{...i,direction:"output",step:null!==(o=null===s||void 0===s?void 0:s.step)&&void 0!==o?o:void 0}})},[null===t||void 0===t?void 0:t.modelOutputs,r]);return{models:(0,d.useMemo)(()=>{var e,t;return null!==(e=(0,S.uniqBy)((0,S.compact)([...o,...i]).map((t=null===n||void 0===n?void 0:n.runUuid,e=>{var n;return null!==(n=e.data)&&void 0!==n&&n.metrics?{...e,data:{...e.data,metrics:e.data.metrics.filter(e=>!t||e.run_id===t)}}:e})),e=>{var t;return null===(t=e.info)||void 0===t?void 0:t.model_id}))&&void 0!==e?e:[]},[o,i,n])}})(e,t,n,s),[m,g]=(0,d.useState)({}),{columnDefs:p}=(0,Oe.ih)({loggedModels:c,columnVisibility:m,disablePinnedColumns:!0,disableOrderBy:!0,supportedAttributeColumnKeys:$e});return(0,f.FD)("div",{css:je,children:[(0,f.FD)("div",{css:Ke,children:[(0,f.Y)(i.T.Title,{level:4,css:qe,children:(0,f.Y)(x.A,{id:"km8vtM",defaultMessage:"Logged models ({length})",values:{length:c.length}})}),(0,f.Y)(ze.$,{columnDefs:p,onUpdateColumns:g,columnVisibility:m,customTrigger:(0,f.Y)(i.B,{componentId:"mlflow.logged_model.list.columns",icon:(0,f.Y)(o.ColumnsIcon,{})})})]}),(0,f.Y)(A.S,{size:"sm",shrinks:!1}),(0,f.FD)("div",{css:(0,r.AH)({padding:u.spacing.sm,border:`1px solid ${u.colors.border}`,borderRadius:u.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:[l instanceof Error&&l.message&&(0,f.FD)(f.FK,{children:[(0,f.Y)(o.Alert,{type:"error",description:l.message,message:(0,f.Y)(x.A,{id:"2BzYqp",defaultMessage:"Error loading logged models"}),closable:!1,componentId:"mlflow.run_page.logged_model.list.error"}),(0,f.Y)(A.S,{size:"sm",shrinks:!1})]}),(0,f.Y)(Be.Xs,{children:(0,f.Y)(He._,{columnDefs:p,loggedModels:c,columnVisibility:m,isLoading:a,isLoadingMore:!1,moreResultsAvailable:!1,disableLoadMore:!0,css:We(u),displayShowExampleButton:!1})})]})]})},We=e=>({"&.ag-theme-balham":{"--ag-border-color":e.colors.border,"--ag-row-border-color":e.colors.border,"--ag-foreground-color":e.colors.textPrimary,"--ag-background-color":"transparent","--ag-odd-row-background-color":"transparent","--ag-row-hover-color":e.colors.actionDefaultBackgroundHover,"--ag-selected-row-background-color":e.colors.actionDefaultBackgroundPress,"--ag-header-foreground-color":e.colors.textPrimary,"--ag-header-background-color":e.colors.backgroundPrimary,"--ag-modal-overlay-background-color":e.colors.overlayOverlay,".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":e.colors.textPrimary},borderTop:0,fontSize:e.typography.fontSizeBase,".ag-center-cols-viewport":{...(0,i.A)(e,{orientation:"horizontal"})}}});var Je=n(23158),Qe=n(21678),Ze=n(12803);var Xe={name:"1bmnxg7",styles:"white-space:nowrap"};const et=({runUuid:e,experimentId:t})=>{const{theme:n}=(0,i.u)(),s=(0,H.A)(),[a,l]=(0,d.useState)(),[u,m]=(0,d.useState)(),[g,p]=(0,d.useState)(!1),[h,v]=(0,d.useState)(!1),y=(0,d.useCallback)(async n=>{p(!0);try{var r;const o=await Ze.x.searchRuns({experiment_ids:[t],filter:`tags.\`${O.Ol}\` = '${e}'`,order_by:["attributes.start_time DESC"],max_results:10,page_token:n}),i=(null===(r=o.runs)||void 0===r?void 0:r.map(e=>e.info))||[];l((e=[])=>[...e,...i]),m(o.next_page_token),v(!1)}catch{v(!0)}finally{p(!1)}},[t,e]);if((0,d.useEffect)(()=>{l(void 0),m(void 0),y()},[y]),void 0!==a&&0===a.length)return null;return(0,f.Y)(Qe.wB,{keyValue:s.formatMessage({id:"HXbUkt",defaultMessage:"Child runs"}),value:h?(0,f.Y)(i.T.Text,{color:"error",children:(0,f.Y)(x.A,{id:"k0m460",defaultMessage:"Failed to load child runs"})}):void 0===a?(0,f.Y)(o.ParagraphSkeleton,{loading:!0,label:(0,f.Y)(x.A,{id:"A6c78D",defaultMessage:"Child runs loading"})}):(0,f.FD)("div",{children:[(0,f.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:n.spacing.sm,padding:`${n.spacing.sm}px 0`},""),children:a.map((e,t)=>(0,f.FD)(i.T.Text,{css:Xe,children:[(0,f.Y)(c.N_,{to:M.Ay.getRunPageRoute(e.experimentId,e.runUuid),children:e.runName}),t<a.length-1&&","]},e.runUuid))}),u&&(0,f.Y)("div",{css:(0,r.AH)({marginBottom:n.spacing.sm},""),children:(0,f.Y)(i.B,{componentId:"mlflow.run_details.overview.child_runs.load_more_button",size:"small",onClick:()=>y(u),loading:g,children:(0,f.Y)(x.A,{id:"wtpLvY",defaultMessage:"Load more"})})})]})})};var tt={name:"ti75j2",styles:"margin:0"};const nt=({tags:e,runInfo:t,datasets:n})=>{const[s,a]=(0,d.useState)(null),[l,u]=(0,d.useState)(!1),{theme:c}=(0,i.u)();if(!n||!n.length)return null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(o.Overflow,{children:n.map(o=>(0,f.Y)(i.T.Link,{componentId:"mlflow.run_details.datasets_box.dataset_link",css:(0,r.AH)({textAlign:"left",".anticon":{fontSize:c.general.iconFontSize}},""),onClick:()=>(r=>{var o,i,s;a({datasetWithTags:r,runData:{experimentId:null!==(o=t.experimentId)&&void 0!==o?o:void 0,runUuid:null!==(i=t.runUuid)&&void 0!==i?i:"",runName:null!==(s=t.runName)&&void 0!==s?s:void 0,datasets:n,tags:e}}),u(!0)})(o),children:(0,f.Y)(ie.E,{datasetWithTags:o,displayTextAsLink:!0,css:tt})}))}),s&&(0,f.Y)(se.O,{isOpen:l,setIsOpen:u,selectedDatasetWithRun:s,setSelectedDatasetWithRun:a})]})};var rt=function(e){return e.DETAILS="DETAILS",e.DATASETS="DATASETS",e.TAGS="TAGS",e.REGISTERED_MODELS="REGISTERED_MODELS",e}(rt||{});const{Title:ot}=i.T;var it={name:"67z2yy",styles:"flex:1;align-self:flex-start"},st={name:"i02vwc",styles:"display:flex;flex:1;width:100%"},at={name:"36bnqj",styles:"display:flex;flex:1"},lt={name:"1ctdo4k",styles:"min-height:360px;max-height:760px;overflow:hidden;display:flex"},dt={name:"1jf67h2",styles:"height:500px"};const ut=({runUuid:e,onRunDataUpdated:t,tags:n,runInfo:o,datasets:s,params:a,latestMetrics:l,runInputs:u,runOutputs:p,registeredModelVersionSummaries:h,loggedModelsV3:v=[],isLoadingLoggedModels:y=!1,loggedModelsError:x,experimentKind:Y})=>{const{theme:_}=(0,i.u)(),{search:w}=(0,c.zy)(),b=((0,H.A)(),(0,d.useMemo)(()=>m.A.getLoggedModelsFromTags(n),[n])),A=(n[O.Ol],!(0,S.isEmpty)(null===u||void 0===u?void 0:u.modelInputs)||!(0,S.isEmpty)(null===p||void 0===p?void 0:p.modelOutputs)),I=!A,{modelVersions:C}=(g.Gk.GENAI_DEVELOPMENT,(null===b||void 0===b?void 0:b.length)>0||(null===v||void 0===v||v.length),(0,Pe.b)({loggedModels:v})),T=(0,S.uniqBy)([...h,...C],e=>null===e||void 0===e?void 0:e.link),R=((0,U.V4)(),(({runUuid:e,runInfo:t,tags:n,onTagsUpdated:o,datasets:s,shouldRenderLoggedModelsBox:a,loggedModelsV3:l,registeredModelVersionSummaries:u})=>{var g,p,h,v;const y=(0,H.A)(),{theme:x}=(0,i.u)(),{search:Y}=(0,c.zy)(),_=(0,d.useMemo)(()=>m.A.getLoggedModelsFromTags(n),[n]),w=n[O.Ol],b=t&&(0,f.FD)(f.FK,{children:[(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"PP5HZf",defaultMessage:"Created at"}),value:t.startTime?m.A.formatTimestamp(t.startTime,y):(0,f.Y)(Qe.bw,{})}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"7KKvmS",defaultMessage:"Created by"}),value:(0,f.Y)($,{runInfo:t,tags:n})}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,f.Y)(Ve.t,{value:null!==(g=null===t||void 0===t?void 0:t.experimentId)&&void 0!==g?g:"",element:null!==t&&void 0!==t&&t.experimentId?(0,f.Y)(c.N_,{to:M.Ay.getExperimentPageRoute(t.experimentId),children:null===t||void 0===t?void 0:t.experimentId}):void 0})}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"vxY1CI",defaultMessage:"Status"}),value:(0,f.Y)(z,{status:t.status,useSpinner:!0})}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,f.Y)(Ve.t,{value:null!==(p=t.runUuid)&&void 0!==p?p:""})}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(t.startTime,t.endTime)}),w&&(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,f.Y)(de,{parentRunUuid:w.value})}),(0,f.Y)(et,{runUuid:e,experimentId:null!==(h=t.experimentId)&&void 0!==h?h:""}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"WmDiY9",defaultMessage:"Source"}),value:(0,f.Y)(Ne,{tags:n,search:Y,runUuid:e,css:(0,r.AH)({paddingTop:x.spacing.xs,paddingBottom:x.spacing.xs},"")})}),a&&(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"mjNFJt",defaultMessage:"Logged models"}),value:(0,f.Y)(De,{runInfo:t,loggedModels:_,loggedModelsV3:l})}),(0,f.Y)(Qe.wB,{keyValue:y.formatMessage({id:"UCQwvo",defaultMessage:"Registered prompts"}),value:(0,f.Y)(Re,{tags:n,runUuid:e})})]});return[{id:rt.DETAILS,title:y.formatMessage({id:"QGiy9C",defaultMessage:"About this run"}),content:b},{id:rt.DATASETS,title:y.formatMessage({id:"yrsFOP",defaultMessage:"Datasets"}),content:null!==s&&void 0!==s&&s.length?(0,f.Y)(nt,{tags:n,runInfo:t,datasets:s}):(0,f.Y)(Qe.bw,{})},{id:rt.TAGS,title:y.formatMessage({id:"arFT1W",defaultMessage:"Tags"}),content:(0,f.Y)(he,{runUuid:null!==(v=t.runUuid)&&void 0!==v?v:"",tags:n,onTagsUpdated:o})},{id:rt.REGISTERED_MODELS,title:y.formatMessage({id:"HnGOwk",defaultMessage:"Registered models"}),content:(null===u||void 0===u?void 0:u.length)>0?(0,f.Y)(be,{registeredModelVersionSummaries:u}):(0,f.Y)(Qe.bw,{})}]})({runUuid:e,runInfo:o,tags:n,onTagsUpdated:t,datasets:s,loggedModelsV3:v,shouldRenderLoggedModelsBox:I,registeredModelVersionSummaries:T})),D=!0;return(0,f.FD)(Je.a,{css:it,usingSidebarLayout:D,secondarySections:R,children:[(0,f.Y)(_e,{runUuid:e,tags:n,onDescriptionChanged:t}),!1,(0,f.FD)("div",{css:[{flexDirection:"column"},{display:"flex",flexDirection:"column",gap:_.spacing.lg,overflow:"hidden",[_.responsive.mediaQueries.xl]:{flexDirection:"column"}},""],children:[(0,f.Y)("div",{css:st,children:(0,f.Y)(oe,{latestMetrics:l,runInfo:o,loggedModels:v,expandToParentContainer:!0})}),(0,f.Y)("div",{css:at,children:(0,f.Y)(j.y,{params:a,expandToParentContainer:!0})})]}),A&&(0,f.FD)(f.FK,{children:[!1,(0,f.Y)("div",{css:lt,children:(0,f.Y)(Ge,{loggedModelsV3:v,isLoadingLoggedModels:y,inputs:u,outputs:p,runInfo:o,loggedModelsError:x})})]}),!1,(0,f.Y)("div",{css:dt})]})};var ct=n(19816),mt=n(77153),gt=n(42110);function pt({runId:e}){return(0,f.Y)(gt.E,{statusCode:404,subMessage:`Run ID ${e} does not exist`,fallbackHomePageReactRoute:M.Ay.rootRoute})}var ht=n(24523),vt=n(30383),ft=n(33702),yt=n(94721),xt=n(35286),Yt=n(18756);const Mt=({contextData:{metricsForRun:e},hoverData:t,chartData:{metricKey:n},isHovering:r,mode:o})=>{var s;const a=(0,xt.bL)(t)?t.hoveredDataPoint:t,l=(0,H.A)();if(o===xt.QS.MultipleTracesWithScanline&&(0,xt.bL)(t)&&r)return(0,f.Y)(Yt.G,{hoverData:t});if(null===a||void 0===a||!a.metricEntity)return null;const{timestamp:d,step:u,value:c}=a.metricEntity,g=(null===e||void 0===e||null===(s=e[n])||void 0===s?void 0:s.length)>1,p=(0,W.bw)(n),h=g&&p&&!(0,S.isUndefined)(d),v=g&&!p&&!(0,S.isUndefined)(u);return(0,f.FD)("div",{children:[v&&(0,f.FD)("div",{css:_t.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(x.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",u]}),h&&(0,f.FD)("div",{css:_t.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(x.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",m.A.formatTimestamp(d,l)]}),c&&(0,f.FD)("div",{children:[(0,f.Y)(i.T.Text,{bold:!0,children:n}),(0,f.Y)(A.S,{size:"xs"}),(0,f.Y)(i.T.Text,{children:c})]})]})},_t={valueField:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var wt=n(86133),bt=n(84193),At=n(51120),St=n(55600),It=n(95379),Ct=n(58355),Tt=n(57864),Rt=n(61293),Dt=n(47946),Et=n(67901),kt=n(29757),Ft=n(6564);var Lt={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Ut={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Nt=({runInfo:e,metricKeys:t,mode:n,chartUIState:a,updateChartsUIState:l,latestMetrics:u={},params:c={},tags:m={}})=>{var p;const{theme:h}=(0,i.u)(),[v,y]=(0,d.useState)(""),{formatMessage:x}=(0,H.A)(),{compareRunCharts:Y,compareRunSections:M,chartsSearchFilter:_}=a,w=(0,d.useMemo)(()=>{var e;return null!==(e=null===Y||void 0===Y?void 0:Y.filter(e=>!e.deleted))&&void 0!==e?e:[]},[Y]),[b,A]=(0,d.useState)(void 0),I=(0,s.d4)(({entities:t})=>{var n;return(0,S.mapValues)(t.sampledMetricsByRunUuid[null!==(n=e.runUuid)&&void 0!==n?n:""],e=>(0,S.compact)((0,S.values)(e).map(({metricsHistory:e})=>e).flat()))}),C=(0,d.useMemo)(()=>({runInfo:e,metricsForRun:I}),[e,I]),{imagesByRunUuid:T}=(0,s.d4)(e=>({imagesByRunUuid:e.entities.imagesByRunUuid})),[R,D]=(0,d.useState)(null),E=(0,It.iO)(),k=(0,It.cA)(),F=(0,It.KP)(),L=(0,It.Ez)(),N=(0,d.useMemo)(()=>{var t,n,r;return[{displayName:null!==(t=e.runName)&&void 0!==t?t:"",metrics:u,params:c,tags:m,images:T[null!==(n=e.runUuid)&&void 0!==n?n:""]||{},metricHistory:{},uuid:null!==(r=e.runUuid)&&void 0!==r?r:"",color:h.colors.primary,runInfo:e}]},[e,u,c,m,T,h]);(0,d.useEffect)(()=>{if((!M||!Y)&&N.length>0){const{resultChartSet:e,resultSectionSet:t}=wt.i$.getBaseChartAndSectionConfigs({runsData:N,enabledSectionNames:["model"===n?g.NN:g.rx],filterMetricNames:e=>{const t=e.startsWith(g.qt);return"model"===n?!t:t}});l(n=>({...n,compareRunCharts:e,compareRunSections:t}))}},[Y,M,N,n,l]),(0,d.useEffect)(()=>{l(e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:t,resultSectionSet:r,isResultUpdated:o}=wt.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:N,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const t=e.startsWith(g.qt);return"model"===n?!t:t}});return o?{...e,compareRunCharts:t,compareRunSections:r}:e})},[N,l,n]);const P=(0,Rt.$)(),V=a.autoRefreshEnabled&&(0,U.vC)()&&P,O=Boolean(m[g.Cr]);return(0,Dt.L)({runUuids:[null!==(p=e.runUuid)&&void 0!==p?p:""],runUuidsIsActive:["RUNNING"===e.status],autoRefreshEnabled:V,enabled:O}),(0,f.FD)("div",{css:Lt,children:[(0,f.FD)("div",{css:(0,r.AH)({paddingBottom:h.spacing.md,display:"flex",gap:h.spacing.sm,flex:"0 0 auto"},""),children:[(0,f.Y)(Ft.I,{chartsSearchFilter:_}),(0,U.vC)()&&(0,f.Y)(o.ToggleButton,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244",pressed:a.autoRefreshEnabled,onPressedChange:e=>{l(t=>({...t,autoRefreshEnabled:e}))},children:x({id:"zC/uKl",defaultMessage:"Auto-refresh"})}),(0,f.Y)(Et.f,{metricKeyList:t,globalLineChartConfig:a.globalLineChartConfig,updateUIState:l})]}),(0,f.Y)("div",{css:Ut,children:(0,f.Y)(xt.W,{contextData:C,component:Mt,children:(0,f.Y)(kt.c_,{visibleChartCards:w,children:(0,f.Y)(At.J,{compareRunSections:M,compareRunCharts:w,reorderCharts:E,insertCharts:k,chartData:N,startEditChart:e=>D(e),removeChart:F,addNewChartCard:e=>t=>D(wt.i$.getEmptyChartCardByType(t,!1,void 0,e)),search:null!==_&&void 0!==_?_:"",supportedChartTypes:[wt.zL.LINE,wt.zL.BAR,wt.zL.IMAGE],setFullScreenChart:A,autoRefreshEnabled:V,globalLineChartConfig:a.globalLineChartConfig,groupBy:null})})})}),R&&(0,f.Y)(St.z,{chartRunData:N,metricKeyList:t,paramKeyList:[],config:R,onSubmit:e=>{L(e),D(null)},onCancel:()=>D(null),groupBy:null,supportedChartTypes:[wt.zL.LINE,wt.zL.BAR,wt.zL.IMAGE],globalLineChartConfig:a.globalLineChartConfig}),(0,f.Y)(Tt._,{fullScreenChart:b,onCancel:()=>A(void 0),chartData:N,tooltipContextValue:C,tooltipComponent:Mt,autoRefreshEnabled:V,groupBy:null})]})},Pt=e=>{const t=`${e.runInfo.runUuid}-${e.mode}`,n=(0,d.useMemo)(()=>Ct.A.getStoreForComponent("RunPage",t),[t]),[r,o]=(0,d.useState)(()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,U.vC)(),globalLineChartConfig:{xAxisKey:bt.fj.STEP,lineSmoothness:0,selectedXAxisMetricKey:""}};try{const t=n.getItem("chartUIState");return t?JSON.parse(t):e}catch{return e}});return(0,d.useEffect)(()=>{n.setItem("chartUIState",JSON.stringify(r))},[r,n]),(0,f.Y)(It.oB,{updateChartsUIState:o,children:(0,f.Y)(Nt,{...e,chartUIState:r,updateChartsUIState:o})})};var Vt=n(18705),Ht=n(92550);var Ot=n(79196);const Bt=()=>(0,f.FD)(u.L,{children:[(0,f.Y)(o.TitleSkeleton,{loading:!0,label:(0,f.Y)(x.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map(e=>(0,f.Y)(o.ParagraphSkeleton,{seed:`s-${e}`},e))]}),zt=()=>{var e,t;const{runUuid:n,experimentId:a}=(0,c.g)(),h=(0,c.Zp)(),{theme:Y}=(0,i.u)(),[w,b]=(0,d.useState)(!1),[A,I]=(0,d.useState)(!1);l()(n,"[RunPage] Run UUID route param not provided"),l()(a,"[RunPage] Experiment ID route param not provided");const C=n,T=a,{experiment:R,error:D,latestMetrics:E,loading:k,params:F,refetchRun:N,runInfo:P,tags:H,experimentFetchError:O,runFetchError:B,apiError:z,datasets:$,runInputs:j,runOutputs:K,registeredModelVersionSummaries:q}=(0,ct.g)({experimentId:T,runUuid:C}),G=Boolean(P),[J,Q]=(0,d.useMemo)(()=>E?[Object.keys(E).filter(e=>!(0,W.bw)(e)),Object.keys(E).filter(e=>(0,W.bw)(e))]:[[],[]],[E]),{comparedExperimentIds:Z=[],hasComparedExperimentsBefore:X=!1}=(0,s.d4)(e=>e.comparedExperiments||{}),ee=_(),te=(0,U.ht)(),ne=((e,t,n,r,o=!0)=>{const i=(0,d.useMemo)(()=>{var e,t;const o=[...null!==(e=null===n||void 0===n?void 0:n.modelInputs)&&void 0!==e?e:[],...null!==(t=null===r||void 0===r?void 0:r.modelOutputs)&&void 0!==t?t:[]],i=(0,S.uniq)((0,S.compact)(o.map(({modelId:e})=>e)));if(!(0,S.isEmpty)(i))return`attributes.model_id IN (${i.map(e=>`'${e}'`).join(",")})`},[n,r]),s=o&&Boolean(i),{data:a,isLoading:l,error:u}=(0,Ht.e)({experimentIds:[e],searchQuery:i},{enabled:s});return{models:s?a:void 0,isLoading:s&&l,error:u}})(T,0,j,K,!te),re=(({runInputs:e,runOutputs:t,enabled:n=!0})=>{const r=(0,d.useMemo)(()=>{var n,r;const o=[...null!==(n=null===e||void 0===e?void 0:e.modelInputs)&&void 0!==n?n:[],...null!==(r=null===t||void 0===t?void 0:t.modelOutputs)&&void 0!==r?r:[]],i=(0,S.uniq)((0,S.compact)(o.map(({modelId:e})=>e)));if(!(0,S.isEmpty)(i))return i},[e,t]),o=n&&!(0,S.isEmpty)(r),{data:i,isLoading:s,error:a}=(0,Ot.o)({modelIds:r},{enabled:o,refetchOnWindowFocus:!1});return{models:i,isLoading:o&&s,error:a}})({runInputs:j,runOutputs:K,enabled:te}),{error:oe,isLoading:ie,models:se}=te?re:ne,ae=(0,L.Fi)(null===R||void 0===R?void 0:R.tags),le=(0,v.Ub)(`(min-width: ${Y.responsive.breakpoints.sm}px)`),de=k&&(!P||!R);return B instanceof mt.s&&B.getErrorCode()===ht.tG.RESOURCE_DOES_NOT_EXIST||(null===z||void 0===z?void 0:z.code)===ht.tG.RESOURCE_DOES_NOT_EXIST||D&&(0,Vt.b)(D).match(/not found$/)?(0,f.Y)(pt,{runId:C}):O instanceof mt.s&&O.getErrorCode()===ht.tG.RESOURCE_DOES_NOT_EXIST?(0,f.Y)(vt.A,{}):B||O?null:(0,U.wD)()&&(D||z)&&!G?(0,f.Y)("div",{css:(0,r.AH)({marginTop:Y.spacing.lg},""),children:(0,f.Y)(o.Empty,{title:(0,f.Y)(x.A,{id:"XaC3qF",defaultMessage:"Can't load run details"}),description:(0,Vt.b)(null!==z&&void 0!==z?z:D),image:(0,f.Y)(i.k,{})})}):!de&&P&&R?(0,f.FD)(f.FK,{children:[(0,f.FD)(u.L,{usesFullHeight:le,children:[(0,f.Y)(V,{comparedExperimentIds:Z,experiment:R,handleRenameRunClick:()=>b(!0),handleDeleteRunClick:()=>I(!0),hasComparedExperimentsBefore:X,runDisplayName:m.A.getRunDisplayName(P,C),runTags:H,runParams:F,runUuid:C,runOutputs:K,artifactRootUri:null!==(e=null===P||void 0===P?void 0:P.artifactUri)&&void 0!==e?e:void 0,registeredModelVersionSummaries:q,isLoading:k||ie}),(0,f.Y)("div",{css:(0,r.AH)({flex:1,overflow:"auto",marginBottom:Y.spacing.sm,display:"flex"},""),children:(()=>{var e;if(!P)return null;const t=()=>(0,f.Y)(ft.r,{runUuid:C,runTags:H,experiment:R,experimentId:T,runDisplayName:m.A.getRunDisplayName(P,C)});switch(ee){case g.N3.MODEL_METRIC_CHARTS:return(0,f.Y)(Pt,{mode:"model",metricKeys:J,runInfo:P,latestMetrics:E,tags:H,params:F},"model");case g.N3.SYSTEM_METRIC_CHARTS:return(0,f.Y)(Pt,{mode:"system",metricKeys:Q,runInfo:P,latestMetrics:E,tags:H,params:F},"system");case g.N3.EVALUATIONS:return t();case g.N3.ARTIFACTS:return(0,f.Y)(y,{runUuid:C,runTags:H,runOutputs:K,experimentId:T,artifactUri:null!==(e=P.artifactUri)&&void 0!==e?e:void 0});case g.N3.TRACES:return t()}return(0,f.Y)(ut,{runInfo:P,tags:H,params:F,latestMetrics:E,runUuid:C,onRunDataUpdated:N,runInputs:j,runOutputs:K,datasets:$,registeredModelVersionSummaries:q,loggedModelsV3:se,isLoadingLoggedModels:ie,loggedModelsError:null!==oe&&void 0!==oe?oe:void 0,experimentKind:ae})})()})]}),(0,f.Y)(p.j,{runUuid:C,onClose:()=>b(!1),runName:null!==(t=P.runName)&&void 0!==t?t:"",isOpen:w,onSuccess:N}),(0,f.Y)(yt.A,{selectedRunIds:[C],onClose:()=>I(!1),isOpen:A,onSuccess:()=>{h(M.Ay.getExperimentPageRoute(T))}})]}):(0,f.Y)(Bt,{})};var $t=zt},59795:function(e,t,n){n.d(t,{M:function(){return a}});var r=n(36476),o=n(61077),i=n(6050);const s=async({reject:e,response:t,err:n})=>{const o=(0,r.a$)(t),i=o instanceof r.Bk?n:o;if(t)try{var s;const e=null===(s=await t.json())||void 0===s?void 0:s.message;e&&(i.message=e)}catch{}e(i)},a={listRegisteredPrompts:(e,t,n)=>{const r=new URLSearchParams,a=(0,i.Cs)(e);let l=`tags.\`${i.PS}\` = '${i.pY}'`;n&&(l+=` AND tags.\`${i.TV}\` ILIKE '%,${n},%'`),a&&(l+=` AND ${a}`),t&&r.append("page_token",t),r.append("filter",l);const d=["ajax-api/2.0/mlflow/registered-models/search",r.toString()].join("?");return(0,o.AC)({relativeUrl:d,error:s})},setRegisteredPromptTag:(e,t,n)=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/set-tag",method:"POST",body:JSON.stringify({key:t,value:n,name:e}),error:s}),deleteRegisteredPromptTag:(e,t)=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/delete-tag",method:"DELETE",body:JSON.stringify({key:t,name:e}),error:s}),createRegisteredPrompt:(e,t=[])=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/create",method:"POST",body:JSON.stringify({name:e,tags:[{key:i.PS,value:i.pY},...t]}),error:s}),createRegisteredPromptVersion:(e,t=[],n)=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/create",method:"POST",body:JSON.stringify({name:e,description:n,source:"dummy-source",tags:[{key:i.PS,value:i.pY},...t]}),error:s}),setRegisteredPromptVersionTag:(e,t,n,r)=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/set-tag",method:"POST",body:JSON.stringify({key:n,value:r,name:e,version:t}),error:s}),deleteRegisteredPromptVersionTag:(e,t,n)=>{(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/delete-tag",method:"DELETE",body:JSON.stringify({key:n,name:e,version:t}),error:s})},getPromptDetails:e=>{const t=new URLSearchParams;t.append("name",e);const n=["ajax-api/2.0/mlflow/registered-models/get",t.toString()].join("?");return(0,o.AC)({relativeUrl:n,error:s})},getPromptVersions:e=>{const t=new URLSearchParams;t.append("filter",`name='${e}' AND tags.\`${i.PS}\` = '${i.pY}'`);const n=["ajax-api/2.0/mlflow/model-versions/search",t.toString()].join("?");return(0,o.AC)({relativeUrl:n,error:s})},getPromptVersionsForRun:e=>{const t=new URLSearchParams;t.append("filter",`tags.\`${i.PS}\` = '${i.pY}' AND tags.\`${i.xd}\` ILIKE "%${e}%"`);const n=["ajax-api/2.0/mlflow/model-versions/search",t.toString()].join("?");return(0,o.AC)({relativeUrl:n,error:s})},deleteRegisteredPrompt:e=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/registered-models/delete",method:"DELETE",body:JSON.stringify({name:e}),error:s}),deleteRegisteredPromptVersion:(e,t)=>(0,o.AC)({relativeUrl:"ajax-api/2.0/mlflow/model-versions/delete",method:"DELETE",body:JSON.stringify({name:e,version:t}),error:s})}}}]);