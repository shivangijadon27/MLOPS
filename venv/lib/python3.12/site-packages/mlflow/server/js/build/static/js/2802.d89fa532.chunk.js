"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2802],{12802:function(e,t,s){s.r(t),s.d(t,{WorkspacesHomeView:function(){return R},default:function(){return _}});var o=s(68248),r=s(46709),i=s(27757),n=s(82716),a=s(79081),l=s(66916),c=s(40724),d=s(7655),u=s(91105),h=s(56997),p=s(34791),f=s(39595),m=s(61060),g=s(61077);var w=s(11522),v=s(73408);var b={name:"ti75j2",styles:"margin:0"};const y=({onCreateWorkspace:e})=>{const{theme:t}=(0,i.u)();return(0,v.FD)("div",{css:(0,o.AH)({padding:t.spacing.lg,textAlign:"center",display:"flex",flexDirection:"column",gap:t.spacing.md},""),children:[(0,v.Y)(i.T.Title,{level:4,css:b,children:(0,v.Y)(c.A,{id:"WiML15",defaultMessage:"Create your first workspace"})}),(0,v.Y)(i.T.Text,{css:(0,o.AH)({color:t.colors.textSecondary},""),children:(0,v.Y)(c.A,{id:"dUm30k",defaultMessage:"Create a workspace to organize and logically isolate your experiments and models."})}),(0,v.Y)(i.B,{componentId:"mlflow.home.workspaces.create",onClick:e,children:(0,v.Y)(c.A,{id:"hN4qL/",defaultMessage:"Create workspace"})})]})};var k={name:"zjik7",styles:"display:flex"},Y={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"},M={name:"zjik7",styles:"display:flex"},x={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const A=({workspace:e,isLastUsed:t})=>{const{theme:s}=(0,i.u)(),h=(0,d.A)(),{mutate:b,isLoading:y}=(()=>{const e=(0,f.jE)();return(0,m.n)({mutationFn:async({name:e,description:t,default_artifact_root:s})=>{const o={};return void 0!==t&&(o.description=t),void 0!==s&&(o.default_artifact_root=s),(0,g.ff)((0,g.we)(`ajax-api/3.0/mlflow/workspaces/${encodeURIComponent(e)}`),{method:g.vr.PATCH,body:JSON.stringify(o)})},onSuccess:()=>{e.invalidateQueries({queryKey:["workspaces"]})}})})(),[A,C]=(0,r.useState)(null),[R,_]=(0,r.useState)(""),T=(e,t)=>{C(e),_(t||"")},D=()=>{if(null===A)return;const t={name:e.name};"description"===A?t.description=R:"artifact_root"===A&&(t.default_artifact_root=R),b(t,{onSuccess:()=>{C(null),_("")},onError:e=>{w.A.logErrorAndNotifyUser(e)}})};return(0,v.FD)(v.FK,{children:[(0,v.FD)(n.TableRow,{css:(0,o.AH)({"&:hover":{backgroundColor:s.colors.actionDefaultBackgroundHover},height:s.general.buttonHeight},""),"data-testid":"workspace-list-item",children:[(0,v.Y)(n.TableCell,{children:(0,v.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",gap:s.spacing.sm},""),children:[(0,v.Y)(u.N_,{disableWorkspacePrefix:!0,to:`/?${p.ht}=${encodeURIComponent(e.name)}`,onClick:t=>{t.preventDefault(),(0,p.ZX)(e.name),window.location.hash=`#/?${p.ht}=${encodeURIComponent(e.name)}`,window.location.reload()},css:(0,o.AH)({color:s.colors.actionLinkDefault,textDecoration:"none",fontWeight:s.typography.typographyBoldFontWeight,"&:hover":{color:s.colors.actionLinkHover,textDecoration:"underline"}},""),children:e.name}),t&&(0,v.Y)(n.Tag,{componentId:"mlflow.home.workspaces.last_used_badge",color:"lemon",children:(0,v.Y)(c.A,{id:"k2bPN+",defaultMessage:"Last used"})})]})}),(0,v.Y)(n.TableCell,{children:(0,v.FD)("div",{css:k,children:[(0,v.Y)("div",{css:(0,o.AH)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:s.colors.textSecondary},""),children:e.description}),(0,v.Y)(i.B,{componentId:`mlflow.home.workspaces.edit_description.${e.name}`,size:"small",type:"tertiary",icon:e.description?(0,v.Y)(n.PencilIcon,{}):void 0,onClick:t=>{t.stopPropagation(),T("description",e.description)},"aria-label":h.formatMessage({id:"dUY9eq",defaultMessage:"Edit description"}),css:Y,children:e.description?void 0:(0,v.Y)(c.A,{id:"tJ+7No",defaultMessage:"Set description"})})]})}),(0,v.Y)(n.TableCell,{children:(0,v.FD)("div",{css:M,children:[(0,v.Y)("div",{css:(0,o.AH)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:s.colors.textSecondary},""),children:e.default_artifact_root}),(0,v.Y)(i.B,{componentId:`mlflow.home.workspaces.edit_artifact_root.${e.name}`,size:"small",type:"tertiary",icon:e.default_artifact_root?(0,v.Y)(n.PencilIcon,{}):void 0,onClick:t=>{t.stopPropagation(),T("artifact_root",e.default_artifact_root)},"aria-label":h.formatMessage({id:"ie1fGj",defaultMessage:"Edit artifact root"}),css:x,children:e.default_artifact_root?void 0:(0,v.Y)(c.A,{id:"HZH8Yr",defaultMessage:"Set artifact root"})})]})})]}),(0,v.Y)(a.d,{componentId:`mlflow.home.workspaces.edit_modal.${e.name}`,visible:null!==A,onCancel:()=>{C(null),_("")},onOk:D,okButtonProps:{loading:y},okText:h.formatMessage({id:"6i/EoY",defaultMessage:"Save"}),cancelText:h.formatMessage({id:"NW59bs",defaultMessage:"Cancel"}),title:"description"===A?h.formatMessage({id:"LLANE+",defaultMessage:"Edit Description"}):h.formatMessage({id:"8xpU1t",defaultMessage:"Edit Artifact Root"}),children:(0,v.Y)("div",{onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},children:(0,v.Y)(l.I,{componentId:`mlflow.home.workspaces.edit_${A}_input`,value:R,onChange:e=>_(e.target.value),placeholder:"description"===A?h.formatMessage({id:"k8oXRo",defaultMessage:"Enter description"}):h.formatMessage({id:"YeIhTa",defaultMessage:"Enter artifact root URI"}),autoFocus:!0})})})]})};var C={name:"ti75j2",styles:"margin:0"};const R=({onCreateWorkspace:e})=>{const{theme:t}=(0,i.u)(),{workspaces:s,isLoading:l,isError:d,refetch:u}=(0,h.C)(!0),f=(0,p.VT)(),[m,g]=(0,r.useState)(1),w=!l&&!d&&0===s.length,b=(0,r.useMemo)(()=>{const e=10*(m-1),t=e+10;return s.slice(e,t)},[s,m]);return(0,r.useMemo)(()=>{m>1&&0===b.length&&s.length>0&&g(1)},[s.length,m,b.length]),(0,v.FD)("section",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:t.spacing.sm},""),children:[(0,v.FD)("div",{css:(0,o.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",gap:t.spacing.md},""),children:[(0,v.FD)("div",{css:(0,o.AH)({display:"flex",flexDirection:"column",gap:t.spacing.xs},""),children:[(0,v.Y)(i.T.Title,{level:3,css:C,children:(0,v.Y)(c.A,{id:"2+uccV",defaultMessage:"Workspaces"})}),(0,v.Y)(i.T.Text,{color:"secondary",children:(0,v.Y)(c.A,{id:"SSwoap",defaultMessage:"Select a workspace to start experiments"})})]}),!w&&(0,v.Y)(i.B,{componentId:"mlflow.home.workspaces.create_button",onClick:e,children:(0,v.Y)(c.A,{id:"gXb1Ab",defaultMessage:"Create new workspace"})})]}),(0,v.FD)("div",{css:(0,o.AH)({border:`1px solid ${t.colors.border}`,overflow:"hidden",backgroundColor:t.colors.backgroundPrimary},""),children:[d?(0,v.FD)("div",{css:(0,o.AH)({padding:t.spacing.lg,display:"flex",flexDirection:"column",gap:t.spacing.md},""),children:[(0,v.Y)(n.Alert,{type:"error",closable:!1,componentId:"mlflow.home.workspaces.error",message:(0,v.Y)(c.A,{id:"lpEsIz",defaultMessage:"We couldn't load your workspaces."})}),(0,v.Y)("div",{children:(0,v.Y)(i.B,{componentId:"mlflow.home.workspaces.retry",onClick:()=>u(),children:(0,v.Y)(c.A,{id:"i3T+JQ",defaultMessage:"Retry"})})})]}):w?(0,v.Y)(y,{onCreateWorkspace:e}):(0,v.FD)(n.Table,{children:[(0,v.FD)(n.TableRow,{isHeader:!0,children:[(0,v.Y)(n.TableHeader,{componentId:"mlflow.home.workspaces_table.header.name",children:(0,v.Y)(c.A,{id:"lIURTA",defaultMessage:"Name"})}),(0,v.Y)(n.TableHeader,{componentId:"mlflow.home.workspaces_table.header.description",children:(0,v.Y)(c.A,{id:"Bsuyal",defaultMessage:"Description"})}),(0,v.Y)(n.TableHeader,{componentId:"mlflow.home.workspaces_table.header.artifact_root",children:(0,v.Y)(c.A,{id:"9eWlQw",defaultMessage:"Artifact Root"})})]}),l?(0,v.FD)(n.TableRow,{children:[(0,v.Y)(n.TableCell,{}),(0,v.Y)(n.TableCell,{css:(0,o.AH)({padding:t.spacing.lg,textAlign:"center"},""),children:(0,v.Y)(c.A,{id:"Xt8M9f",defaultMessage:"Loading workspaces..."})}),(0,v.Y)(n.TableCell,{})]}):b.map(e=>(0,v.Y)(A,{workspace:e,isLastUsed:e.name===f},e.name))]}),!w&&!l&&!d&&s.length>10&&(0,v.Y)("div",{css:(0,o.AH)({padding:t.spacing.md,display:"flex",justifyContent:"center",borderTop:`1px solid ${t.colors.border}`},""),children:(0,v.Y)(n.Pagination,{componentId:"mlflow.home.workspaces.pagination",currentPageIndex:m,numTotal:s.length,pageSize:10,onChange:e=>g(e)})})]}),(0,v.Y)(a.S,{shrinks:!1})]})};var _=R},61060:function(e,t,s){s.d(t,{n:function(){return h}});var o=s(46709),r=s(48667),i=s(56606),n=s(78922),a=s(27949),l=s(4200);class c extends l.Q{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=this.client.defaultMutationOptions(e),(0,i.f8)(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),null==(t=this.currentMutation)||t.setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.currentMutation)||e.removeObserver(this))}onMutationUpdate(e){this.updateResult();const t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:"undefined"!==typeof e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:(0,n.$)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){a.j.batch(()=>{var t,s,o,r;if(this.mutateOptions&&this.hasListeners())if(e.onSuccess)null==(t=(s=this.mutateOptions).onSuccess)||t.call(s,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(o=(r=this.mutateOptions).onSettled)||o.call(r,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context);else if(e.onError){var i,n,a,l;null==(i=(n=this.mutateOptions).onError)||i.call(n,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(a=(l=this.mutateOptions).onSettled)||a.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)})})}}var d=s(39595),u=s(56154);function h(e,t,s){const n=(0,i.GR)(e,t,s),l=(0,d.jE)({context:n.context}),[h]=o.useState(()=>new c(l,n));o.useEffect(()=>{h.setOptions(n)},[h,n]);const f=(0,r.r)(o.useCallback(e=>h.subscribe(a.j.batchCalls(e)),[h]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),m=o.useCallback((e,t)=>{h.mutate(e,t).catch(p)},[h]);if(f.error&&(0,u.G)(h.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:m,mutateAsync:f.mutate}}function p(){}}}]);