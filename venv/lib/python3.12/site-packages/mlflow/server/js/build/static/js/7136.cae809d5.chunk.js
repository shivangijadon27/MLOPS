"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[7136],{55570:function(e,n,o){o.d(n,{X:function(){return c}});o(46709);var l=o(89949),i=o(82716),a=o(27757),t=o(40724),s=o(73408);function r(){return(0,s.Y)(i.Empty,{"data-testid":"fallback",title:(0,s.Y)(t.A,{id:"qAdWdK",defaultMessage:"Error"}),description:(0,s.Y)(t.A,{id:"RzZVxC",defaultMessage:"An error occurred while rendering this component."}),image:(0,s.Y)(a.k,{})})}function d({children:e,customFallbackComponent:n}){function o(e,n){console.error("Caught Unexpected Error: ",e,n.componentStack)}return n?(0,s.Y)(l.tH,{onError:o,FallbackComponent:n,children:e}):(0,s.Y)(l.tH,{onError:o,fallback:(0,s.Y)(r,{}),children:e})}function c(e,n,o,l){return function(e){return(0,s.Y)(d,{customFallbackComponent:l,children:(0,s.Y)(n,{...e})})}}},64755:function(e,n,o){o.r(n),o.d(n,{default:function(){return ke}});var l=o(68248),i=o(27757),a=o(82716),t=o(40724),s=o(55570),r=o(91113),d=o(66916),c=o(7655),u=o(46709),m=o(87078),p=o(30431),g=o(89015),f=o(49708),h=o(25117);const v=()=>{var e,n;const o=(0,f.I)(["gateway_model_definitions"],{queryFn:()=>h.t.listModelDefinitions(),retry:!1});return{data:null===(e=o.data)||void 0===e?void 0:e.model_definitions,error:null!==(n=o.error)&&void 0!==n?n:void 0,isLoading:o.isLoading,refetch:o.refetch}};var y=o(75329),C=o(64226),b=o(93585),D=o(73408);const k=({availableProviders:e,filter:n,onFilterChange:o})=>(0,D.Y)(b.E,{availableProviders:e,filter:n,onFilterChange:o,componentIdPrefix:"mlflow.gateway.api-keys-list"});let Y=function(e){return e.KEY_NAME="key_name",e.PROVIDER="provider",e.ENDPOINTS="endpoints",e.USED_BY="used_by",e.LAST_UPDATED="last_updated",e.CREATED="created",e}({});const w={[Y.PROVIDER]:"Provider",[Y.ENDPOINTS]:"Endpoints",[Y.USED_BY]:"Used by",[Y.LAST_UPDATED]:"Last updated",[Y.CREATED]:"Created"},x=Object.keys(w),A=({visibleColumns:e,onColumnsChange:n})=>{const{theme:o}=(0,i.u)(),t=(0,c.A)();return(0,D.FD)(a.DialogCombobox,{componentId:"mlflow.gateway.api-keys-list.columns-dropdown",label:"Columns",multiSelect:!0,children:[(0,D.Y)(a.DialogComboboxCustomButtonTriggerWrapper,{children:(0,D.Y)(i.B,{componentId:"mlflow.gateway.api-keys-list.columns-button",endIcon:(0,D.Y)(a.ChevronDownIcon,{}),"data-testid":"api-keys-column-selector-button",children:(0,D.FD)("div",{css:(0,l.AH)({display:"flex",gap:o.spacing.sm,alignItems:"center"},""),children:[(0,D.Y)(a.ColumnsIcon,{}),t.formatMessage({id:"Qayyg6",defaultMessage:"Columns"})]})})}),(0,D.Y)(a.DialogComboboxContent,{minWidth:200,children:(0,D.Y)(a.DialogComboboxOptionList,{children:x.map(o=>(0,D.Y)(a.DialogComboboxOptionListCheckboxItem,{value:o,checked:e.includes(o),onChange:()=>(o=>{const l=e.includes(o)?e.filter(e=>e!==o):[...e,o];n(l)})(o),children:w[o]},o))})})]})},S=x.filter(e=>e!==Y.CREATED);var M={name:"1hetg88",styles:"max-width:300px"},_={name:"1189xqs",styles:"flex:2"},F={name:"82a6rk",styles:"flex:1"},I={name:"82a6rk",styles:"flex:1"},T={name:"82a6rk",styles:"flex:1"},E={name:"82a6rk",styles:"flex:1"},P={name:"82a6rk",styles:"flex:1"},H={name:"1yvnci",styles:"flex:0;min-width:96px;max-width:96px"},R={name:"1189xqs",styles:"flex:2"},B={name:"82a6rk",styles:"flex:1"},O={name:"82a6rk",styles:"flex:1"},L={name:"82a6rk",styles:"flex:1"},N={name:"opde7s",styles:"color:inherit"},z={name:"82a6rk",styles:"flex:1"},K={name:"82a6rk",styles:"flex:1"},U={name:"1yvnci",styles:"flex:0;min-width:96px;max-width:96px"};const $=({onKeyClick:e,onEditClick:n,onDeleteClick:o,onEndpointsClick:s,onBindingsClick:r})=>{const{theme:f}=(0,i.u)(),{formatMessage:h}=(0,c.A)(),[b,w]=(0,u.useState)(""),[x,$]=(0,u.useState)({providers:[]}),[j,q]=(0,u.useState)(S),{secrets:V,filteredSecrets:W,isLoading:G,availableProviders:Q,getModelDefinitionsForSecret:X,getEndpointsForSecret:J,getBindingsForSecret:Z,getEndpointCount:ee,getBindingCount:ne}=(({searchFilter:e,filter:n})=>{const{data:o,isLoading:l}=(0,m.d)(),{data:i,isLoading:a}=(0,p.c)(),{data:t,isLoading:s}=v(),{data:r,isLoading:d}=(0,g.K)(),c=(0,u.useMemo)(()=>{const e=new Map;return t?(t.forEach(n=>{const o=n.secret_id;o&&(e.has(o)||e.set(o,[]),e.get(o).push(n))}),e):e},[t]),f=(0,u.useMemo)(()=>{const e=new Map;return i?(i.forEach(n=>{var o;null===(o=n.model_mappings)||void 0===o||o.forEach(o=>{var l;const i=null===(l=o.model_definition)||void 0===l?void 0:l.secret_id;i&&(e.has(i)||e.set(i,new Set),e.get(i).add(n.endpoint_id))})}),e):e},[i]),h=(0,u.useMemo)(()=>{const e=new Map;return f.forEach((n,o)=>{n.forEach(n=>{e.has(n)||e.set(n,new Set),e.get(n).add(o)})}),e},[f]),y=(0,u.useMemo)(()=>{const e=new Map;return r&&h.size?(r.forEach(n=>{const o=h.get(n.endpoint_id);o&&o.forEach(n=>{var o;const l=null!==(o=e.get(n))&&void 0!==o?o:0;e.set(n,l+1)})}),e):e},[r,h]),C=(0,u.useCallback)(e=>{if(!r)return[];const n=f.get(e);return n?r.filter(e=>n.has(e.endpoint_id)):[]},[r,f]),b=(0,u.useCallback)(e=>{if(!i)return[];const n=f.get(e);return n?i.filter(e=>n.has(e.endpoint_id)):[]},[i,f]),D=(0,u.useCallback)(e=>{var n;return null!==(n=c.get(e))&&void 0!==n?n:[]},[c]),k=(0,u.useCallback)(e=>{var n,o;return null!==(n=null===(o=f.get(e))||void 0===o?void 0:o.size)&&void 0!==n?n:0},[f]),Y=(0,u.useCallback)(e=>{var n;return null!==(n=y.get(e))&&void 0!==n?n:0},[y]),w=o?Array.from(new Set(o.map(e=>e.provider).filter(e=>!!e))):[],x=(0,u.useMemo)(()=>{if(!o)return[];let l=o;if(e.trim()){const n=e.toLowerCase();l=l.filter(e=>e.secret_name.toLowerCase().includes(n))}return n.providers.length>0&&(l=l.filter(e=>e.provider&&n.providers.includes(e.provider))),l},[o,e,n]);return{secrets:null!==o&&void 0!==o?o:[],filteredSecrets:x,isLoading:l||a||s||d,availableProviders:w,getModelDefinitionsForSecret:D,getEndpointsForSecret:b,getBindingsForSecret:C,getEndpointCount:k,getBindingCount:Y}})({searchFilter:b,filter:x});if((G||!V.length)&&G)return(0,D.FD)("div",{css:(0,l.AH)({display:"flex",alignItems:"center",justifyContent:"center",gap:f.spacing.sm,padding:f.spacing.lg,minHeight:200},""),children:[(0,D.Y)(i.S,{size:"small"}),(0,D.Y)(t.A,{id:"iqlzHb",defaultMessage:"Loading API keys..."})]});const oe=b.trim().length>0||x.providers.length>0;return(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:f.spacing.md},""),children:[(0,D.FD)("div",{css:(0,l.AH)({display:"flex",alignItems:"center",gap:f.spacing.sm},""),children:[(0,D.Y)(d.I,{componentId:"mlflow.gateway.api-keys-list.search",prefix:(0,D.Y)(d.S,{}),placeholder:h({id:"QqbUt/",defaultMessage:"Search API Keys"}),value:b,onChange:e=>w(e.target.value),allowClear:!0,css:M}),(0,D.Y)(k,{availableProviders:Q,filter:x,onFilterChange:$}),(0,D.Y)(A,{visibleColumns:j,onColumnsChange:q})]}),(0,D.FD)(a.Table,{scrollable:!0,empty:(()=>{const e=0===V.length;return 0===W.length&&oe?(0,D.Y)(a.Empty,{title:(0,D.Y)(t.A,{id:"8kU9Sc",defaultMessage:"No API keys found"}),description:null}):e?(0,D.Y)(a.Empty,{image:(0,D.Y)(a.KeyIcon,{}),title:(0,D.Y)(t.A,{id:"UqGOOx",defaultMessage:"No API keys created"}),description:(0,D.Y)(t.A,{id:"BF9qQD",defaultMessage:'Use "Create API key" button to create a new API key'})}):null})(),css:(0,l.AH)({border:`1px solid ${f.colors.borderDecorative}`,borderRadius:f.general.borderRadiusBase},""),children:[(0,D.FD)(a.TableRow,{isHeader:!0,children:[(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.name-header",css:_,children:(0,D.Y)(t.A,{id:"6HjFD0",defaultMessage:"Key name"})}),j.includes(Y.PROVIDER)&&(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.provider-header",css:F,children:(0,D.Y)(t.A,{id:"CvNffK",defaultMessage:"Provider"})}),j.includes(Y.ENDPOINTS)&&(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.endpoints-header",css:I,children:(0,D.Y)(t.A,{id:"0Qu0bD",defaultMessage:"Endpoints"})}),j.includes(Y.USED_BY)&&(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.used-by-header",css:T,children:(0,D.Y)(t.A,{id:"T3Ew34",defaultMessage:"Used by"})}),j.includes(Y.LAST_UPDATED)&&(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.updated-header",css:E,children:(0,D.Y)(t.A,{id:"kAR6Ws",defaultMessage:"Last updated"})}),j.includes(Y.CREATED)&&(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.created-header",css:P,children:(0,D.Y)(t.A,{id:"dNaKCA",defaultMessage:"Created"})}),(0,D.Y)(a.TableHeader,{componentId:"mlflow.gateway.api-keys-list.actions-header",css:H})]}),W.map(t=>{const d=X(t.secret_id),c=ee(t.secret_id),u=ne(t.secret_id);return(0,D.FD)(a.TableRow,{children:[(0,D.Y)(a.TableCell,{css:R,children:(0,D.FD)("div",{css:(0,l.AH)({display:"flex",alignItems:"center",gap:f.spacing.sm},""),children:[(0,D.Y)(a.KeyIcon,{css:(0,l.AH)({color:f.colors.textSecondary,flexShrink:0},"")}),(0,D.Y)("span",{role:"button",tabIndex:0,onClick:()=>null===e||void 0===e?void 0:e(t),onKeyDown:n=>{"Enter"!==n.key&&" "!==n.key||null===e||void 0===e||e(t)},css:(0,l.AH)({color:f.colors.actionPrimaryBackgroundDefault,fontWeight:f.typography.typographyBoldFontWeight,cursor:"pointer","&:hover":{textDecoration:"underline"}},""),children:t.secret_name})]})}),j.includes(Y.PROVIDER)&&(0,D.Y)(a.TableCell,{css:B,children:t.provider?(0,D.Y)(i.T.Text,{children:(0,y.aU)(t.provider)}):(0,D.Y)(i.T.Text,{color:"secondary",children:"-"})}),j.includes(Y.ENDPOINTS)&&(0,D.Y)(a.TableCell,{css:O,children:c>0?(0,D.Y)("span",{role:"button",tabIndex:0,onClick:()=>null===s||void 0===s?void 0:s(t,J(t.secret_id)),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||null===s||void 0===s||s(t,J(t.secret_id))},css:(0,l.AH)({color:f.colors.actionPrimaryBackgroundDefault,cursor:"pointer","&:hover":{textDecoration:"underline"}},""),children:c}):(0,D.Y)(i.T.Text,{color:"secondary",children:c})}),j.includes(Y.USED_BY)&&(0,D.Y)(a.TableCell,{css:L,children:u>0?(0,D.FD)("button",{type:"button",onClick:()=>{const e=Z(t.secret_id);null===r||void 0===r||r(t,e)},css:(0,l.AH)({display:"flex",alignItems:"center",gap:f.spacing.xs,background:"none",border:"none",padding:0,cursor:"pointer",color:f.colors.actionPrimaryBackgroundDefault,"&:hover":{textDecoration:"underline"}},""),children:[(0,D.Y)(a.LinkIcon,{css:(0,l.AH)({color:f.colors.textSecondary,fontSize:14},"")}),(0,D.FD)(i.T.Text,{css:N,children:[u," ",1===u?"resource":"resources"]})]}):(0,D.Y)(i.T.Text,{color:"secondary",children:"-"})}),j.includes(Y.LAST_UPDATED)&&(0,D.Y)(a.TableCell,{css:z,children:(0,D.Y)(C.f,{date:new Date(t.last_updated_at)})}),j.includes(Y.CREATED)&&(0,D.Y)(a.TableCell,{css:K,children:(0,D.Y)(C.f,{date:new Date(t.created_at)})}),(0,D.Y)(a.TableCell,{css:U,children:(0,D.FD)("div",{css:(0,l.AH)({display:"flex",gap:f.spacing.xs},""),children:[(0,D.Y)(i.B,{componentId:"mlflow.gateway.api-keys-list.edit-button",type:"primary",icon:(0,D.Y)(a.PencilIcon,{}),"aria-label":h({id:"jA7Y1x",defaultMessage:"Edit API key"}),onClick:()=>null===n||void 0===n?void 0:n(t)}),(0,D.Y)(i.B,{componentId:"mlflow.gateway.api-keys-list.delete-button",type:"primary",icon:(0,D.Y)(a.TrashIcon,{}),"aria-label":h({id:"rq7u9r",defaultMessage:"Delete API key"}),onClick:()=>null===o||void 0===o?void 0:o(t,d,J(t.secret_id),u)})]})})]},t.secret_id)})]})]})};var j=o(79081),q=o(27151),V=o(87856),W=o(98332),G=o(45472);const Q=({provider:e,value:n,onChange:o,errors:s,disabled:r,componentIdPrefix:d="mlflow.gateway.secret-form",hideNameField:m=!1})=>{const{theme:p}=(0,i.u)(),{formatMessage:g}=(0,c.A)(),{data:f,isLoading:h}=(0,G.D)({provider:e}),v=(0,u.useMemo)(()=>{var e;return null!==(e=null===f||void 0===f?void 0:f.auth_modes)&&void 0!==e?e:[]},[null===f||void 0===f?void 0:f.auth_modes]),C=v.length>1,b=(0,u.useMemo)(()=>{var e;if(v.length){if(n.authMode){const e=v.find(e=>e.mode===n.authMode);if(e)return e}return null!==(e=v.find(e=>e.mode===(null===f||void 0===f?void 0:f.default_mode)))&&void 0!==e?e:v[0]}},[v,n.authMode,null===f||void 0===f?void 0:f.default_mode]),k=n.authMode||(null===b||void 0===b?void 0:b.mode)||"",Y=(0,u.useMemo)(()=>{var n,o;const l=[...(null!==(n=null===b||void 0===b?void 0:b.secret_fields)&&void 0!==n?n:[]).map(e=>({...e,fieldType:"secret"})),...(null!==(o=null===b||void 0===b?void 0:b.config_fields)&&void 0!==o?o:[]).map(e=>({...e,fieldType:"config"}))];return(0,y.Sm)(l,e)},[null===b||void 0===b?void 0:b.secret_fields,null===b||void 0===b?void 0:b.config_fields,e]),w=(0,u.useCallback)(e=>{o({...n,name:e})},[o,n]),x=(0,u.useCallback)((e,l)=>{o({...n,secretFields:{...n.secretFields,[e]:l}})},[o,n]),A=(0,u.useCallback)((e,l)=>{o({...n,configFields:{...n.configFields,[e]:l}})},[o,n]),S=(0,u.useCallback)(e=>{o({...n,authMode:e,secretFields:{},configFields:{}})},[o,n]);return e?h?(0,D.Y)("div",{css:(0,l.AH)({display:"flex",justifyContent:"center",padding:p.spacing.lg},""),children:(0,D.Y)(i.S,{size:"small"})}):(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:p.spacing.md},""),children:[!m&&(0,D.FD)("div",{children:[(0,D.FD)(a.FormUI.Label,{htmlFor:`${d}.name`,children:[(0,D.Y)(t.A,{id:"4CNVbz",defaultMessage:"API key name"}),(0,D.Y)("span",{css:(0,l.AH)({color:p.colors.textValidationDanger},""),children:" *"})]}),(0,D.Y)(W.f,{id:`${d}.name`,componentId:`${d}.name`,value:n.name,onChange:e=>w(e.target.value),placeholder:g({id:"AGLzB5",defaultMessage:"my-api-key"}),validationState:null!==s&&void 0!==s&&s.name?"error":void 0,disabled:r}),(null===s||void 0===s?void 0:s.name)&&(0,D.Y)(a.FormUI.Message,{type:"error",message:s.name})]}),C&&(0,D.FD)("div",{children:[(0,D.Y)(a.FormUI.Label,{children:(0,D.Y)(t.A,{id:"JwhonN",defaultMessage:"Authentication method"})}),(0,D.Y)(a.Radio.Group,{name:`${d}.auth-mode`,componentId:`${d}.auth-mode`,value:k,onChange:e=>S(e.target.value),disabled:r,children:(0,D.Y)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:p.spacing.sm},""),children:v.map(e=>(0,D.Y)(a.Radio,{value:e.mode,children:(0,D.FD)("div",{children:[(0,D.Y)("div",{css:(0,l.AH)({fontWeight:p.typography.typographyBoldFontWeight},""),children:e.display_name}),e.description&&(0,D.Y)("div",{css:(0,l.AH)({color:p.colors.textSecondary,fontSize:p.typography.fontSizeSm},""),children:e.description})]})},e.mode))})})]}),Y.map(e=>{var o,i,t,c,u,m;return(0,D.FD)("div",{children:[(0,D.FD)(a.FormUI.Label,{htmlFor:`${d}.${e.fieldType}.${e.name}`,children:[(0,y.u3)(e.name),e.required&&(0,D.Y)("span",{css:(0,l.AH)({color:p.colors.textValidationDanger},""),children:" *"})]}),"secret"===e.fieldType?(0,D.Y)(V.L,{id:`${d}.secret.${e.name}`,componentId:`${d}.secret.${e.name}`,value:null!==(o=n.secretFields[e.name])&&void 0!==o?o:"",onChange:n=>x(e.name,n.target.value),placeholder:e.description,validationState:null!==s&&void 0!==s&&null!==(i=s.secretFields)&&void 0!==i&&i[e.name]?"error":void 0,disabled:r}):(0,D.Y)(W.f,{id:`${d}.config.${e.name}`,componentId:`${d}.config.${e.name}`,value:null!==(t=n.configFields[e.name])&&void 0!==t?t:"",onChange:n=>A(e.name,n.target.value),placeholder:e.description,validationState:null!==s&&void 0!==s&&null!==(c=s.configFields)&&void 0!==c&&c[e.name]?"error":void 0,disabled:r}),"secret"===e.fieldType&&(null===s||void 0===s||null===(u=s.secretFields)||void 0===u?void 0:u[e.name])&&(0,D.Y)(a.FormUI.Message,{type:"error",message:s.secretFields[e.name]}),"config"===e.fieldType&&(null===s||void 0===s||null===(m=s.configFields)||void 0===m?void 0:m[e.name])&&(0,D.Y)(a.FormUI.Message,{type:"error",message:s.configFields[e.name]})]},e.name)})]}):(0,D.Y)("div",{css:(0,l.AH)({color:p.colors.textSecondary},""),children:(0,D.Y)(t.A,{id:"YGo9ni",defaultMessage:"Select a provider to configure API key"})})};var X=o(22138);var J={name:"1fttcpj",styles:"display:flex;flex-direction:column"},Z={name:"ti75j2",styles:"margin:0"};const ee=({secret:e,showCard:n=!0})=>{const{theme:o}=(0,i.u)(),l=(0,u.useMemo)(()=>(e=>({labelStyle:{minWidth:100,flexShrink:0},rowStyle:{display:"flex",alignItems:"center",gap:e.spacing.sm},rowStyleFlexStart:{display:"flex",alignItems:"flex-start",gap:e.spacing.sm},containerStyle:{display:"flex",flexDirection:"column",gap:e.spacing.sm},configColumnStyle:{display:"flex",flexDirection:"column",gap:e.spacing.xs},configRowStyle:{display:"flex",gap:e.spacing.xs},timestampRowStyle:{display:"flex",alignItems:"center",gap:e.spacing.xs},cardStyle:{padding:e.spacing.md,border:`1px solid ${e.colors.borderDecorative}`,borderRadius:e.general.borderRadiusBase,backgroundColor:e.colors.backgroundSecondary},monoStyle:{fontFamily:"monospace",wordBreak:"break-all"}}))(o),[o]),a=(0,u.useMemo)(()=>{var n;return null!==(n=e.auth_config)&&void 0!==n?n:null},[e.auth_config]),s=(0,D.FD)("div",{css:J,children:[(0,D.Y)(i.T.Title,{level:3,css:Z,children:e.secret_name}),(0,D.Y)(j.S,{size:"md"}),(0,D.FD)("div",{css:l.containerStyle,children:[e.provider&&(0,D.FD)("div",{css:l.rowStyle,children:[(0,D.Y)(i.T.Text,{color:"secondary",css:l.labelStyle,children:(0,D.Y)(t.A,{id:"hJcrnh",defaultMessage:"Provider"})}),(0,D.Y)(i.T.Text,{children:(0,y.aU)(e.provider)})]}),(null===a||void 0===a?void 0:a.auth_mode)&&(0,D.FD)("div",{css:l.rowStyle,children:[(0,D.Y)(i.T.Text,{color:"secondary",css:l.labelStyle,children:(0,D.Y)(t.A,{id:"iN/n6b",defaultMessage:"Auth Type"})}),(0,D.Y)(i.T.Text,{children:(0,y.Qs)(String(a.auth_mode))})]}),(0,D.FD)("div",{css:l.rowStyleFlexStart,children:[(0,D.Y)(i.T.Text,{color:"secondary",css:l.labelStyle,children:(0,D.Y)(t.A,{id:"90097b",defaultMessage:"Masked Key"})}),(0,D.Y)(X.R,{maskedValue:e.masked_values})]}),a&&Object.keys(a).filter(e=>"auth_mode"!==e).length>0&&(0,D.FD)("div",{css:l.rowStyle,children:[(0,D.Y)(i.T.Text,{color:"secondary",css:l.labelStyle,children:(0,D.Y)(t.A,{id:"R2NKiZ",defaultMessage:"Config"})}),(0,D.Y)("div",{css:l.configColumnStyle,children:Object.entries(a).filter(([e])=>"auth_mode"!==e).map(([e,n])=>(0,D.FD)("div",{css:l.configRowStyle,children:[(0,D.FD)(i.T.Text,{color:"secondary",children:[(0,y.u3)(e),":"]}),(0,D.Y)(i.T.Text,{css:l.monoStyle,children:String(n)})]},e))})]}),(0,D.FD)("div",{css:l.rowStyle,children:[(0,D.Y)(i.T.Text,{color:"secondary",css:l.labelStyle,children:(0,D.Y)(t.A,{id:"rdrvCs",defaultMessage:"Created"})}),(0,D.FD)("div",{css:l.timestampRowStyle,children:[(0,D.Y)(C.f,{date:new Date(e.created_at)}),e.created_by&&(0,D.Y)(i.T.Text,{color:"secondary",children:(0,D.Y)(t.A,{id:"Z4cZMo",defaultMessage:"by {user}",values:{user:e.created_by}})})]})]}),(0,D.FD)("div",{css:l.rowStyle,children:[(0,D.Y)(i.T.Text,{color:"secondary",css:l.labelStyle,children:(0,D.Y)(t.A,{id:"/y0ZU4",defaultMessage:"Updated"})}),(0,D.FD)("div",{css:l.timestampRowStyle,children:[(0,D.Y)(C.f,{date:new Date(e.last_updated_at)}),e.last_updated_by&&(0,D.Y)(i.T.Text,{color:"secondary",children:(0,D.Y)(t.A,{id:"sSLvV0",defaultMessage:"by {user}",values:{user:e.last_updated_by}})})]})]})]})]});return n?(0,D.Y)("div",{css:l.cardStyle,children:s}):s};var ne=o(44341);const oe={name:"",authMode:"",secretFields:{},configFields:{}},le=({open:e,onClose:n,onSuccess:o})=>{const{theme:s}=(0,i.u)(),r=(0,c.A)(),[d,m]=(0,u.useState)(""),[p,g]=(0,u.useState)(oe),[f,h]=(0,u.useState)({}),{mutateAsync:v,isLoading:y,error:C,reset:b}=(0,ne.w)(),{data:k}=(0,G.D)({provider:d}),Y=(0,u.useCallback)(e=>{m(e),g(oe),h({}),b()},[b]),w=(0,u.useCallback)(e=>{g(e),h(n=>({...n,name:e.name?void 0:n.name})),b()},[b]),x=(0,u.useCallback)(()=>{const e={};d||(e.provider=r.formatMessage({id:"R7s1xC",defaultMessage:"Provider is required"})),p.name.trim()||(e.name=r.formatMessage({id:"OxQK9l",defaultMessage:"Key name is required"}));return Object.values(p.secretFields).some(e=>Boolean(e))||(e.secretFields={}),h(e),0===Object.keys(e).length},[d,p.name,p.secretFields,r]),A=(0,u.useCallback)(()=>{m(""),g(oe),h({}),b(),n()},[n,b]),S=(0,u.useCallback)(async()=>{if(!x())return;const e={...p.configFields};p.authMode&&(e.auth_mode=p.authMode),await v({secret_name:p.name,secret_value:p.secretFields,provider:d,auth_config:Object.keys(e).length>0?e:void 0}).then(()=>{A(),null===o||void 0===o||o()})},[x,p,d,v,A,o]),M=(0,u.useMemo)(()=>{if(!C)return null;const e=C.message;return e.toLowerCase().includes("unique constraint")||e.toLowerCase().includes("duplicate")?r.formatMessage({id:"tPUQUF",defaultMessage:"An API key with this name already exists. Please choose a different name."}):e.length>200?r.formatMessage({id:"r0mM8+",defaultMessage:"An error occurred while creating the API key. Please try again."}):e},[C,r]),_=(0,u.useMemo)(()=>{var e,n;if(null!==k&&void 0!==k&&null!==(e=k.auth_modes)&&void 0!==e&&e.length)return p.authMode?k.auth_modes.find(e=>e.mode===p.authMode):null!==(n=k.auth_modes.find(e=>e.mode===k.default_mode))&&void 0!==n?n:k.auth_modes[0]},[k,p.authMode]),F=(0,u.useMemo)(()=>{var e,n,o,l;if(!d)return!1;if(!p.name.trim())return!1;if(!(null!==(e=null===_||void 0===_||null===(n=_.secret_fields)||void 0===n?void 0:n.filter(e=>e.required))&&void 0!==e?e:[]).every(e=>{var n;return Boolean(null===(n=p.secretFields[e.name])||void 0===n?void 0:n.trim())}))return!1;return!!(null!==(o=null===_||void 0===_||null===(l=_.config_fields)||void 0===l?void 0:l.filter(e=>e.required))&&void 0!==o?o:[]).every(e=>{var n;return Boolean(null===(n=p.configFields[e.name])||void 0===n?void 0:n.trim())})},[d,p.name,p.secretFields,p.configFields,_]);return(0,D.Y)(j.d,{componentId:"mlflow.gateway.create-api-key-modal",title:r.formatMessage({id:"tCkDwC",defaultMessage:"Create API Key"}),visible:e,onCancel:A,onOk:S,okText:r.formatMessage({id:"UXdH8W",defaultMessage:"Create API Key"}),cancelText:r.formatMessage({id:"hHNj31",defaultMessage:"Cancel"}),confirmLoading:y,okButtonProps:{disabled:!F},size:"normal",children:(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:s.spacing.lg},""),children:[M&&(0,D.Y)(a.Alert,{componentId:"mlflow.gateway.create-api-key-modal.error",type:"error",message:M,closable:!1}),(0,D.Y)(q.U,{value:d,onChange:Y,error:f.provider,componentIdPrefix:"mlflow.gateway.create-api-key-modal.provider"}),d&&(0,D.Y)(Q,{provider:d,value:p,onChange:w,errors:f,componentIdPrefix:"mlflow.gateway.create-api-key-modal"}),!d&&(0,D.Y)("div",{css:(0,l.AH)({color:s.colors.textSecondary,textAlign:"center",padding:s.spacing.lg},""),children:(0,D.Y)(t.A,{id:"mMR/YQ",defaultMessage:"Select a provider to configure your API key"})})]})})};var ie=o(61060);const ae={name:"",authMode:"",secretFields:{},configFields:{}},te=({secret:e,onClose:n,onSuccess:o})=>{var l;const i=(0,c.A)(),[a,t]=(0,u.useState)(ae),[s,r]=(0,u.useState)({}),{mutateAsync:d,isLoading:m,error:p,reset:g}=(0,ie.n)({mutationFn:e=>h.t.updateSecret(e)}),f=null!==(l=null===e||void 0===e?void 0:e.provider)&&void 0!==l?l:"",{data:v}=(0,G.D)({provider:f}),y=(0,u.useRef)(g);y.current=g,(0,u.useEffect)(()=>{if(e){var n;let o="";null!==(n=e.auth_config)&&void 0!==n&&n.auth_mode&&(o=String(e.auth_config.auth_mode)),t({name:e.secret_name,authMode:o,secretFields:{},configFields:{}}),r({}),y.current()}},[e]);const C=(0,u.useCallback)(e=>{t(e),g()},[g]),b=(0,u.useCallback)(()=>{const e={};return Object.values(a.secretFields).some(e=>Boolean(e))||(e.secretFields={}),r(e),0===Object.keys(e).length},[a.secretFields]),D=(0,u.useCallback)(()=>{t(ae),r({}),g(),n()},[n,g]),k=(0,u.useMemo)(()=>{if(!p)return null;const e=p.message;return e.length>200?i.formatMessage({id:"zRwy1a",defaultMessage:"An error occurred while updating the API key. Please try again."}):e},[p,i]),Y=(0,u.useMemo)(()=>{var e,n;if(null!==v&&void 0!==v&&null!==(e=v.auth_modes)&&void 0!==e&&e.length)return a.authMode?v.auth_modes.find(e=>e.mode===a.authMode):null!==(n=v.auth_modes.find(e=>e.mode===v.default_mode))&&void 0!==n?n:v.auth_modes[0]},[v,a.authMode]),w=(0,u.useCallback)(async()=>{if(e&&b())try{const n=a.authMode||(null===Y||void 0===Y?void 0:Y.mode),l={...a.configFields};n&&(l.auth_mode=n),await d({secret_id:e.secret_id,secret_value:a.secretFields,auth_config:Object.keys(l).length>0?l:void 0}),D(),null===o||void 0===o||o()}catch{}},[e,b,a,Y,d,D,o]),x=(0,u.useMemo)(()=>{var e,n,o,l;if(!(null!==(e=null===Y||void 0===Y||null===(n=Y.secret_fields)||void 0===n?void 0:n.filter(e=>e.required))&&void 0!==e?e:[]).every(e=>{var n;return Boolean(null===(n=a.secretFields[e.name])||void 0===n?void 0:n.trim())}))return!1;return!!(null!==(o=null===Y||void 0===Y||null===(l=Y.config_fields)||void 0===l?void 0:l.filter(e=>e.required))&&void 0!==o?o:[]).every(e=>{var n;return Boolean(null===(n=a.configFields[e.name])||void 0===n?void 0:n.trim())})},[a.secretFields,a.configFields,Y]);return{formData:a,errors:s,isLoading:m,errorMessage:k,selectedAuthMode:Y,isFormValid:x,provider:f,handleFormDataChange:C,handleSubmit:w,handleClose:D}};var se={name:"4zleql",styles:"display:block"},re={name:"4zleql",styles:"display:block"};const de=({open:e,secret:n,onClose:o,onSuccess:s})=>{const{theme:r}=(0,i.u)(),u=(0,c.A)(),{formData:m,errors:p,isLoading:g,errorMessage:f,isFormValid:h,provider:v,handleFormDataChange:C,handleSubmit:b,handleClose:k}=te({secret:n,onClose:o,onSuccess:s});return n?(0,D.Y)(j.d,{componentId:"mlflow.gateway.edit-api-key-modal",title:u.formatMessage({id:"Lpz85i",defaultMessage:"Edit API Key"}),visible:e,onCancel:k,onOk:b,okText:u.formatMessage({id:"SMVe/s",defaultMessage:"Save Changes"}),cancelText:u.formatMessage({id:"hHNj31",defaultMessage:"Cancel"}),confirmLoading:g,okButtonProps:{disabled:!h},size:"normal",children:(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.lg},""),children:[f&&(0,D.Y)(a.Alert,{componentId:"mlflow.gateway.edit-api-key-modal.error",type:"error",message:f,closable:!1}),(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.xs},""),children:[(0,D.Y)(i.T.Text,{bold:!0,children:(0,D.Y)(t.A,{id:"sEheG0",defaultMessage:"Key Name"})}),(0,D.Y)(j.T,{componentId:"mlflow.gateway.edit-api-key-modal.name-tooltip",content:(0,D.FD)(D.FK,{children:[u.formatMessage({id:"2tQXw0",defaultMessage:"Key name cannot be changed."}),(0,D.Y)("br",{}),u.formatMessage({id:"Q5CR/y",defaultMessage:"Create a new key if a different name is needed."})]}),children:(0,D.Y)("span",{css:se,children:(0,D.Y)(d.I,{componentId:"mlflow.gateway.edit-api-key-modal.name",value:n.secret_name,disabled:!0,css:(0,l.AH)({backgroundColor:r.colors.actionDisabledBackground},"")})})})]}),v&&(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.xs},""),children:[(0,D.Y)(i.T.Text,{bold:!0,children:(0,D.Y)(t.A,{id:"R3TrL7",defaultMessage:"Provider"})}),(0,D.Y)(j.T,{componentId:"mlflow.gateway.edit-api-key-modal.provider-tooltip",content:(0,D.FD)(D.FK,{children:[u.formatMessage({id:"02+DX/",defaultMessage:"Provider cannot be changed."}),(0,D.Y)("br",{}),u.formatMessage({id:"tCC/M3",defaultMessage:"Create a new key if a different provider is needed."})]}),children:(0,D.Y)("span",{css:re,children:(0,D.Y)(d.I,{componentId:"mlflow.gateway.edit-api-key-modal.provider",value:(0,y.aU)(v),disabled:!0,css:(0,l.AH)({backgroundColor:r.colors.actionDisabledBackground},"")})})})]}),(0,D.Y)(Q,{provider:v,value:m,onChange:C,errors:p,componentIdPrefix:"mlflow.gateway.edit-api-key-modal",hideNameField:!0})]})}):null};var ce=o(39595);const ue=({open:e,secret:n,endpoints:o,onClose:a,onSuccess:s})=>{const{theme:r}=(0,i.u)(),{mutateAsync:d}=(()=>{const e=(0,ce.jE)();return(0,ie.n)({mutationFn:e=>h.t.deleteSecret(e),onSuccess:()=>{e.invalidateQueries(["gateway_secrets"])}})})(),c=o.length>0;if(!n)return null;return(0,D.Y)(W.A,{open:e,onClose:a,onConfirm:async()=>{n&&(await d(n.secret_id),null===s||void 0===s||s())},title:"Delete API Key",itemName:n.secret_name,itemType:"API key",componentIdPrefix:"mlflow.gateway.delete-api-key-modal",requireConfirmation:c,warningMessage:c?(0,D.Y)(t.A,{id:"jzNMBH",defaultMessage:"This key is currently in use. After deleting, you will need to attach a different API key to continue using the endpoints currently using this key."}):void 0,additionalContent:(()=>{if(c)return(0,D.FD)("div",{children:[(0,D.Y)(i.T.Text,{color:"secondary",children:(0,D.Y)(t.A,{id:"cAujuc",defaultMessage:"Endpoints using this key ({count})",values:{count:o.length}})}),(0,D.Y)("div",{css:(0,l.AH)({marginTop:r.spacing.xs,maxHeight:120,overflowY:"auto",border:`1px solid ${r.colors.borderDecorative}`,borderRadius:r.general.borderRadiusBase},""),children:o.map(e=>{var n;const o=null===(n=e.model_mappings)||void 0===n?void 0:n.map(e=>{var n;return null===(n=e.model_definition)||void 0===n?void 0:n.model_name}).filter(Boolean).join(", ");return(0,D.FD)("div",{css:(0,l.AH)({padding:`${r.spacing.xs}px ${r.spacing.sm}px`,borderBottom:`1px solid ${r.colors.borderDecorative}`,"&:last-child":{borderBottom:"none"}},""),children:[(0,D.Y)(i.T.Text,{css:(0,l.AH)({fontSize:r.typography.fontSizeSm},""),children:e.name||e.endpoint_id}),o&&(0,D.Y)(i.T.Text,{color:"secondary",css:(0,l.AH)({display:"block",fontSize:r.typography.fontSizeSm},""),children:o})]},e.endpoint_id)})})]})})()})};var me={name:"1fttcpj",styles:"display:flex;flex-direction:column"};const pe=({open:e,secret:n,onClose:o,onEdit:s,onDelete:r})=>{const{theme:d}=(0,i.u)(),{formatMessage:m}=(0,c.A)(),p=(0,u.useCallback)(e=>{e||o()},[o]),g=(0,u.useCallback)(()=>{n&&s&&(o(),s(n))},[n,s,o]),f=(0,u.useCallback)(()=>{n&&r&&(o(),r(n))},[n,r,o]);return(0,D.Y)(a.Drawer.Root,{modal:!0,open:e,onOpenChange:p,children:(0,D.FD)(a.Drawer.Content,{componentId:"mlflow.gateway.api-key-details.drawer",width:480,title:(0,D.FD)("span",{css:(0,l.AH)({display:"inline-flex",alignItems:"center",gap:d.spacing.sm},""),children:[(0,D.Y)("span",{css:(0,l.AH)({borderRadius:d.borders.borderRadiusSm,background:d.colors.actionDefaultBackgroundHover,padding:d.spacing.xs,color:d.colors.blue500,height:"min-content",display:"flex",alignItems:"center",justifyContent:"center"},""),children:(0,D.Y)(a.KeyIcon,{})}),(0,D.Y)(t.A,{id:"DMKCLJ",defaultMessage:"API Key Details"})]}),children:[(0,D.Y)(j.S,{size:"md"}),n&&(0,D.FD)("div",{css:me,children:[(0,D.Y)(ee,{secret:n,showCard:!1}),(0,D.FD)("div",{css:(0,l.AH)({marginTop:d.spacing.lg,display:"flex",gap:d.spacing.sm},""),children:[(0,D.Y)(i.B,{componentId:"mlflow.gateway.api-key-details.drawer.edit-button",icon:(0,D.Y)(a.PencilIcon,{}),onClick:g,"aria-label":m({id:"ZAqdq9",defaultMessage:"Edit API key"}),children:(0,D.Y)(t.A,{id:"8iJrii",defaultMessage:"Edit API Key"})}),(0,D.Y)(i.B,{componentId:"mlflow.gateway.api-key-details.drawer.delete-button",danger:!0,icon:(0,D.Y)(a.TrashIcon,{}),onClick:f,"aria-label":m({id:"cGGc0A",defaultMessage:"Delete API key"}),children:(0,D.Y)(t.A,{id:"T6s9Mi",defaultMessage:"Delete API Key"})})]})]})]})})};var ge=o(91105),fe=o(29447);var he={name:"ti75j2",styles:"margin:0"};const ve=({open:e,keyName:n,endpoints:o,onClose:s})=>{const{theme:r}=(0,i.u)(),d=(0,c.A)();return(0,D.Y)(a.Drawer.Root,{modal:!0,open:e,onOpenChange:e=>{e||s()},children:(0,D.FD)(a.Drawer.Content,{componentId:"mlflow.gateway.endpoints-using-key.drawer",width:480,title:(0,D.Y)(i.T.Title,{level:3,css:he,children:(0,D.Y)(t.A,{id:"KObL+y",defaultMessage:"Endpoints ({count})",values:{count:o.length}})}),children:[(0,D.Y)(j.S,{size:"md"}),0===o.length?(0,D.Y)(a.Empty,{description:(0,D.Y)(t.A,{id:"yQkV88",defaultMessage:"No endpoints are using this key"})}):(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.md},""),children:[(0,D.Y)(i.T.Text,{color:"secondary",children:(0,D.Y)(t.A,{id:"Hn1aOC",defaultMessage:"Endpoints using key: {name}",values:{name:n}})}),(0,D.Y)("div",{css:(0,l.AH)({border:`1px solid ${r.colors.borderDecorative}`,borderRadius:r.general.borderRadiusBase,overflow:"hidden"},""),children:o.map((e,n)=>(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.xs,padding:r.spacing.sm,borderBottom:n<o.length-1?`1px solid ${r.colors.borderDecorative}`:"none"},""),children:[(0,D.Y)(ge.N_,{to:fe.Ay.getEndpointDetailsRoute(e.endpoint_id),css:(0,l.AH)({color:r.colors.actionPrimaryBackgroundDefault,textDecoration:"none",fontWeight:r.typography.typographyBoldFontWeight,"&:hover":{textDecoration:"underline"}},""),children:e.name||e.endpoint_id}),e.model_mappings&&e.model_mappings.length>0&&(0,D.Y)("div",{css:(0,l.AH)({display:"flex",flexWrap:"wrap",gap:r.spacing.xs,color:r.colors.textSecondary,fontSize:r.typography.fontSizeSm},""),children:e.model_mappings.map((n,o)=>{var l,i;return(0,D.FD)("span",{children:[null!==(l=null===(i=n.model_definition)||void 0===i?void 0:i.model_name)&&void 0!==l?l:"Unknown model",o<e.model_mappings.length-1&&","]},n.mapping_id)})}),(0,D.Y)("span",{css:(0,l.AH)({color:r.colors.textSecondary,fontSize:r.typography.fontSizeSm},""),children:(0,D.Y)(t.A,{id:"NV7Fz+",defaultMessage:"Created {date}",values:{date:d.formatDate(new Date(e.created_at),{year:"numeric",month:"short",day:"numeric"})}})})]},e.endpoint_id))})]})]})})};const ye=e=>"scorer"===e?"Scorer":e;var Ce={name:"ti75j2",styles:"margin:0"};const be=({open:e,bindings:n,endpoints:o,onClose:s})=>{const{theme:r}=(0,i.u)(),d=(0,c.A)(),m=e=>{var n;return(null===(n=o.find(n=>n.endpoint_id===e))||void 0===n?void 0:n.name)||e},p=(0,u.useMemo)(()=>{const e=new Map;return n.forEach(n=>{const o=e.get(n.resource_type)||[];e.set(n.resource_type,[...o,n])}),e},[n]),g=e=>(0,D.FD)(i.T.Text,{bold:!0,children:[ye(e.resource_type)," ",e.resource_id]});return(0,D.Y)(a.Drawer.Root,{modal:!0,open:e,onOpenChange:e=>{e||s()},children:(0,D.FD)(a.Drawer.Content,{componentId:"mlflow.gateway.bindings-using-key.drawer",width:480,title:(0,D.Y)(i.T.Title,{level:3,css:Ce,children:(0,D.Y)(t.A,{id:"PMaJHI",defaultMessage:"Used by ({count})",values:{count:n.length}})}),children:[(0,D.Y)(j.S,{size:"md"}),0===n.length?(0,D.Y)(a.Empty,{description:(0,D.Y)(t.A,{id:"hvImg5",defaultMessage:"No resources are using this key"})}):(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.md},""),children:[(0,D.Y)(i.T.Text,{color:"secondary",children:(0,D.Y)(t.A,{id:"cHV5jh",defaultMessage:"Resources using this key via endpoints"})}),Array.from(p.entries()).map(([e,n])=>(0,D.FD)("div",{children:[(0,D.FD)(i.T.Text,{bold:!0,css:(0,l.AH)({marginBottom:r.spacing.sm,display:"block"},""),children:[ye(e),"s (",n.length,")"]}),(0,D.Y)("div",{css:(0,l.AH)({border:`1px solid ${r.colors.borderDecorative}`,borderRadius:r.general.borderRadiusBase,overflow:"hidden"},""),children:n.map((e,o)=>(0,D.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:r.spacing.xs,padding:r.spacing.sm,borderBottom:o<n.length-1?`1px solid ${r.colors.borderDecorative}`:"none"},""),children:[g(e),(0,D.FD)("div",{css:(0,l.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs},""),children:[(0,D.Y)(i.T.Text,{color:"secondary",css:(0,l.AH)({fontSize:r.typography.fontSizeSm},""),children:(0,D.Y)(t.A,{id:"pcn2Ff",defaultMessage:"via endpoint:"})}),(0,D.Y)(ge.N_,{to:fe.Ay.getEndpointDetailsRoute(e.endpoint_id),css:(0,l.AH)({fontSize:r.typography.fontSizeSm,color:r.colors.actionPrimaryBackgroundDefault,textDecoration:"none","&:hover":{textDecoration:"underline"}},""),children:m(e.endpoint_id)})]}),(0,D.Y)(i.T.Text,{color:"secondary",css:(0,l.AH)({fontSize:r.typography.fontSizeSm},""),children:(0,D.Y)(t.A,{id:"aW3CeS",defaultMessage:"Bound {date}",values:{date:d.formatDate(new Date(e.created_at),{year:"numeric",month:"short",day:"numeric"})}})})]},`${e.endpoint_id}-${e.resource_type}-${e.resource_id}`))})]},e))]})]})})};var De={name:"3z2sxu",styles:"display:flex;flex-direction:column;flex:1;overflow:hidden"};var ke=(0,s.X)(r.A.mlflowServices.EXPERIMENTS,()=>{var e,n,o,s,r;const{theme:d}=(0,i.u)(),{allEndpoints:c,isCreateModalOpen:f,isDetailsDrawerOpen:h,isEditModalOpen:y,isDeleteModalOpen:C,isEndpointsDrawerOpen:b,isBindingsDrawerOpen:k,selectedSecret:Y,editingSecret:w,deleteModalData:x,endpointsDrawerData:A,bindingsDrawerData:S,handleKeyClick:M,handleEditClick:_,handleDeleteClick:F,handleEndpointsClick:I,handleBindingsClick:T,handleCreateClick:E,handleCreateModalClose:P,handleCreateSuccess:H,handleDrawerClose:R,handleDeleteFromDrawer:B,handleEditModalClose:O,handleEditSuccess:L,handleDeleteModalClose:N,handleDeleteSuccess:z,handleEndpointsDrawerClose:K,handleBindingsDrawerClose:U}=function(){const{refetch:e}=(0,m.d)(),{data:n,refetch:o}=(0,p.c)(),{data:l}=(0,g.K)(),{data:i,refetch:a}=v(),[t,s]=(0,u.useState)(!1),[r,d]=(0,u.useState)(null),[c,f]=(0,u.useState)(null),[h,y]=(0,u.useState)(null),[C,b]=(0,u.useState)(null),[D,k]=(0,u.useState)(null),Y=(0,u.useCallback)(e=>i?i.filter(n=>n.secret_id===e):[],[i]),w=(0,u.useCallback)(e=>n?n.filter(n=>{var o;return null===(o=n.model_mappings)||void 0===o?void 0:o.some(n=>{var o;return(null===(o=n.model_definition)||void 0===o?void 0:o.secret_id)===e})}):[],[n]),x=(0,u.useCallback)(e=>{if(!l||!n)return 0;const o=new Set(n.filter(n=>{var o;return null===(o=n.model_mappings)||void 0===o?void 0:o.some(n=>{var o;return(null===(o=n.model_definition)||void 0===o?void 0:o.secret_id)===e})}).map(e=>e.endpoint_id));return l.filter(e=>o.has(e.endpoint_id)).length},[l,n]),A=(0,u.useCallback)(()=>{s(!0)},[]),S=(0,u.useCallback)(()=>{s(!1)},[]),M=(0,u.useCallback)(()=>{e()},[e]),_=(0,u.useCallback)(e=>{d(e)},[]),F=(0,u.useCallback)(()=>{d(null)},[]),I=(0,u.useCallback)(e=>{f(e)},[]),T=(0,u.useCallback)(()=>{f(null)},[]),E=(0,u.useCallback)(()=>{e(),r&&c&&r.secret_id===c.secret_id&&d(null)},[e,r,c]),P=(0,u.useCallback)((e,n,o,l)=>{y({secret:e,modelDefinitions:n,endpoints:o,bindingCount:l})},[]),H=(0,u.useCallback)(e=>{const n=Y(e.secret_id),o=w(e.secret_id),l=x(e.secret_id);y({secret:e,modelDefinitions:n,endpoints:o,bindingCount:l})},[Y,w,x]),R=(0,u.useCallback)(()=>{y(null)},[]),B=(0,u.useCallback)(async()=>{await e(),await Promise.allSettled([o(),a()])},[e,o,a]),O=(0,u.useCallback)((e,n)=>{b({secret:e,endpoints:n})},[]),L=(0,u.useCallback)(()=>{b(null)},[]),N=(0,u.useCallback)((e,n)=>{k({secret:e,bindings:n})},[]),z=(0,u.useCallback)(()=>{k(null)},[]);return{allEndpoints:n,isCreateModalOpen:t,isDetailsDrawerOpen:null!==r,isEditModalOpen:null!==c,isDeleteModalOpen:null!==h,isEndpointsDrawerOpen:null!==C,isBindingsDrawerOpen:null!==D,selectedSecret:r,editingSecret:c,deleteModalData:h,endpointsDrawerData:C,bindingsDrawerData:D,handleKeyClick:_,handleEditClick:I,handleDeleteClick:P,handleEndpointsClick:O,handleBindingsClick:N,handleCreateClick:A,handleCreateModalClose:S,handleCreateSuccess:M,handleDrawerClose:F,handleDeleteFromDrawer:H,handleEditModalClose:T,handleEditSuccess:E,handleDeleteModalClose:R,handleDeleteSuccess:B,handleEndpointsDrawerClose:L,handleBindingsDrawerClose:z}}();return(0,D.FD)("div",{css:De,children:[(0,D.FD)("div",{css:(0,l.AH)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:d.spacing.md,borderBottom:`1px solid ${d.colors.borderDecorative}`},""),children:[(0,D.FD)(i.T.Title,{level:3,css:(0,l.AH)({margin:0,display:"flex",alignItems:"center",gap:d.spacing.sm},""),children:[(0,D.Y)(a.KeyIcon,{}),(0,D.Y)(t.A,{id:"2PCNVS",defaultMessage:"API Keys"})]}),(0,D.Y)(i.B,{componentId:"mlflow.gateway.api-keys.create-button",type:"primary",icon:(0,D.Y)(a.PlusIcon,{}),onClick:E,children:(0,D.Y)(t.A,{id:"0sy/fq",defaultMessage:"Create API key"})})]}),(0,D.Y)("div",{css:(0,l.AH)({flex:1,overflow:"auto",padding:d.spacing.md},""),children:(0,D.Y)($,{onKeyClick:M,onEditClick:_,onDeleteClick:F,onEndpointsClick:I,onBindingsClick:T})}),(0,D.Y)(le,{open:f,onClose:P,onSuccess:H}),(0,D.Y)(de,{open:y,secret:w,onClose:O,onSuccess:L}),(0,D.Y)(pe,{open:h,secret:Y,onClose:R,onEdit:_,onDelete:B}),(0,D.Y)(ve,{open:b,keyName:null!==(e=null===A||void 0===A?void 0:A.secret.secret_name)&&void 0!==e?e:"",endpoints:null!==(n=null===A||void 0===A?void 0:A.endpoints)&&void 0!==n?n:[],onClose:K}),(0,D.Y)(be,{open:k,bindings:null!==(o=null===S||void 0===S?void 0:S.bindings)&&void 0!==o?o:[],endpoints:null!==c&&void 0!==c?c:[],onClose:U}),(0,D.Y)(ue,{open:C,secret:null!==(s=null===x||void 0===x?void 0:x.secret)&&void 0!==s?s:null,endpoints:null!==(r=null===x||void 0===x?void 0:x.endpoints)&&void 0!==r?r:[],onClose:N,onSuccess:z})]})})},89015:function(e,n,o){o.d(n,{K:function(){return a}});var l=o(49708),i=o(25117);const a=()=>{var e,n,o;const a=(0,l.I)(["gateway_bindings"],{queryFn:()=>i.t.listEndpointBindings(),retry:!1});return{data:null!==(e=null===(n=a.data)||void 0===n?void 0:n.bindings)&&void 0!==e?e:[],error:null!==(o=a.error)&&void 0!==o?o:void 0,isLoading:a.isLoading,refetch:a.refetch}}},91113:function(e,n,o){o.d(n,{h:function(){return s}});var l=o(36476),i=o(77153),a=o(24523);class t{}t.mlflowServices={MODEL_REGISTRY:"Model Registry",EXPERIMENTS:"Experiments",CHAT_SESSIONS:"Chat Sessions",MODEL_SERVING:"Model Serving",RUN_TRACKING:"Run Tracking"};const s=(e,n)=>{if(!(e instanceof i.s))return;const{status:o}=e;let t;const s={status:o};e.getErrorCode()===a.tG.RESOURCE_DOES_NOT_EXIST&&(t=new l.m_(s)),e.getErrorCode()===a.tG.PERMISSION_DENIED&&(t=new l.i_(s)),e.getErrorCode()===a.tG.INTERNAL_ERROR&&(t=new l.PO(s)),e.getErrorCode()===a.tG.INVALID_PARAMETER_VALUE&&(t=new l.v7(s));const r=e.getMessageField();return t&&r&&(t.message=r),t};n.A=t},93585:function(e,n,o){o.d(n,{E:function(){return m}});var l=o(68248),i=o(46709),a=o(82716),t=o(27757),s=o(66916),r=o(7655),d=o(40724),c=o(75329),u=o(73408);const m=({availableProviders:e,filter:n,onFilterChange:o,componentIdPrefix:m})=>{const{theme:p}=(0,t.u)(),g=(0,r.A)(),[f,h]=(0,i.useState)(!1),v=n.providers.length>0,y=n.providers.length,C=(0,i.useMemo)(()=>[...e].sort((e,n)=>(0,c.aU)(e).localeCompare((0,c.aU)(n))),[e]),b=(0,i.useCallback)(e=>{const l=n.providers.includes(e)?n.providers.filter(n=>n!==e):[...n.providers,e];o({...n,providers:l})},[n,o]),D=(0,i.useCallback)(e=>{e.stopPropagation(),o({providers:[]})},[o]);return(0,u.FD)(t.aw.Root,{componentId:`${m}.filter-popover`,open:f,onOpenChange:h,children:[(0,u.Y)(t.aw.Trigger,{asChild:!0,children:(0,u.Y)(t.B,{componentId:`${m}.filter-button`,endIcon:(0,u.Y)(a.ChevronDownIcon,{}),css:(0,l.AH)({border:v?`1px solid ${p.colors.actionDefaultBorderFocus} !important`:"",backgroundColor:v?`${p.colors.actionDefaultBackgroundHover} !important`:""},""),children:(0,u.FD)("div",{css:(0,l.AH)({display:"flex",gap:p.spacing.sm,alignItems:"center"},""),children:[(0,u.Y)(a.FilterIcon,{}),g.formatMessage({id:"NVsatz",defaultMessage:"Provider{count}"},{count:v?` (${y})`:""}),v&&(0,u.Y)(s.X,{css:(0,l.AH)({fontSize:12,cursor:"pointer",color:p.colors.grey400,"&:hover":{color:p.colors.grey600}},""),onClick:D})]})})}),(0,u.Y)(t.aw.Content,{align:"start",css:(0,l.AH)({padding:p.spacing.md,minWidth:200},""),children:(0,u.FD)("div",{css:(0,l.AH)({display:"flex",flexDirection:"column",gap:p.spacing.sm},""),children:[(0,u.Y)("div",{css:(0,l.AH)({fontWeight:p.typography.typographyBoldFontWeight,marginBottom:p.spacing.xs},""),children:(0,u.Y)(d.A,{id:"J7x8/9",defaultMessage:"Provider"})}),0===C.length?(0,u.Y)("div",{css:(0,l.AH)({color:p.colors.textSecondary,fontSize:p.typography.fontSizeSm},""),children:(0,u.Y)(d.A,{id:"9FaThs",defaultMessage:"No providers available"})}):C.map(e=>(0,u.Y)(a.Checkbox,{componentId:`${m}.filter.provider.${e}`,isChecked:n.providers.includes(e),onChange:()=>b(e),children:(0,c.aU)(e)},e))]})})]})}}}]);