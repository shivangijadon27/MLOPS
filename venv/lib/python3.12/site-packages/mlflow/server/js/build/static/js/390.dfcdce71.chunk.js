"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[390],{20390:function(e,n,r){r.r(n),r.d(n,{default:function(){return R}});var s=r(68248),o=r(46709),i=r(27757),t=r(82716),l=r(79081),a=r(40724),c=r(7655),d=r(89949),m=r(42747),p=r(884),g=r(39595),u=r(61060),_=r(37133),f=r(58275);var h=r(35556),x=r(73408);const Y=({isOpen:e,onClose:n,onConfirm:r,scorer:o,isLoading:a=!1,error:c})=>{const{theme:d}=(0,i.u)();return(0,x.Y)(l.f,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_deletescorermodalrenderer_28",title:(0,x.Y)(m.sA,{id:"BuykLs",defaultMessage:"Delete judge"}),visible:e,onCancel:n,onOk:r,confirmLoading:a,children:(0,x.FD)(x.FK,{children:[(0,x.Y)(m.sA,{id:"cJ9Nbp",defaultMessage:"Are you sure you want to delete the judge ''{scorerName}''? This action cannot be undone.",values:{scorerName:o.name}}),c&&(0,x.Y)(t.Alert,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_deletescorermodalrenderer_46",type:"error",message:c.message||c.displayMessage,closable:!1,css:(0,s.AH)({marginTop:d.spacing.md},"")})]})})};var y=r(76118),C=r(45765),v=r(46624),A=r(30518);const w=({onDelete:e})=>{const n=o.useCallback(n=>{n.stopPropagation(),e()},[e]);return(0,x.FD)(t.DropdownMenu.Root,{children:[(0,x.Y)(t.DropdownMenu.Trigger,{asChild:!0,children:(0,x.Y)(i.B,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scorercardrenderer_41",size:"small",icon:(0,x.Y)(t.OverflowIcon,{})})}),(0,x.Y)(t.DropdownMenu.Content,{align:"end",children:(0,x.FD)(t.DropdownMenu.Item,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scorercardrenderer_45",onClick:n,children:[(0,x.Y)(t.DropdownMenu.IconWrapper,{children:(0,x.Y)(t.TrashIcon,{})}),(0,x.Y)(m.sA,{id:"mILU5r",defaultMessage:"Delete"})]})})]})};var I={name:"1q3elfo",styles:"margin:0;margin-bottom:0 !important"};var k=({scorer:e,isExpanded:n,onCardClick:r,onExpandToggle:o,onEditClick:l,onDeleteClick:a,control:c,setValue:d,getValues:p})=>{const{theme:g}=(0,i.u)(),u=(0,m.tz)();return(0,x.FD)(t.Card,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scorercardrenderer_85",css:(0,s.AH)({padding:g.spacing.md,position:"relative",width:"100%",boxSizing:"border-box",cursor:"pointer"},""),onClick:r,children:[(0,x.FD)("div",{css:(0,s.AH)({display:"grid",gridTemplateColumns:"auto 1fr auto",gap:g.spacing.xs,alignItems:"flex-start"},""),children:[(0,x.Y)(i.B,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scorercardrenderer_106",icon:n?(0,x.Y)(t.ChevronDownIcon,{}):(0,x.Y)(i.o,{}),size:"small",type:"tertiary",onClick:o,css:(0,s.AH)({padding:g.spacing.xs},""),disabled:!1}),(0,x.FD)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",gap:g.spacing.xs},""),children:[(0,x.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"flex-start",gap:g.spacing.sm},""),children:[(0,x.Y)(i.T.Title,{level:4,css:I,children:e.name}),(0,x.Y)(t.Tag,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scorercardrenderer_123",color:(0,h.U6)(e),icon:(0,h.Cv)(e),children:(0,h.g5)(e,u)})]}),n||(0,y.isNil)(e.sampleRate)&&!e.filterString&&(0,y.isNil)(e.version)?null:(0,x.FD)("div",{css:(0,s.AH)({display:"flex",gap:g.spacing.sm,alignItems:"center"},""),children:[!e.disableMonitoring&&!(0,y.isNil)(e.sampleRate)&&(0,x.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:g.spacing.xs},""),children:[(0,x.Y)(i.T.Hint,{children:(0,x.Y)(m.sA,{id:"JfFfzy",defaultMessage:"Sample rate:"})}),(0,x.Y)(i.T.Hint,{children:(0,x.Y)(m.sA,{id:"0z3Ko0",defaultMessage:"{sampleRatePercent}%",values:{sampleRatePercent:e.sampleRate}})})]}),!e.disableMonitoring&&!(0,y.isNil)(e.sampleRate)&&e.filterString&&(0,x.Y)(t.CircleIcon,{css:(0,s.AH)({color:g.colors.textSecondary,fontSize:"6px"},"")}),!e.disableMonitoring&&e.filterString&&(0,x.Y)(i.T.Hint,{children:(0,x.Y)(m.sA,{id:"ULljUX",defaultMessage:"Filter: {filterString}",values:{filterString:e.filterString}})}),!(0,y.isNil)(e.version)&&(0,x.Y)(i.T.Hint,{children:(0,x.Y)(m.sA,{id:"EaH1E1",defaultMessage:"Version {version}",values:{version:e.version}})})]})]}),(0,x.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",gap:g.spacing.xs},""),children:[!e.disableMonitoring&&(0,x.Y)(t.Tag,{componentId:`${A.hU}.scorer-status-tag`,color:(0,h.t7)(e,u).color,icon:(0,h.t7)(e,u).icon,children:(0,h.t7)(e,u).text}),(0,x.Y)(i.B,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scorercardrenderer_179",size:"small",icon:(0,x.Y)(t.PencilIcon,{}),onClick:l,children:(0,x.Y)(m.sA,{id:"1i/Bac",defaultMessage:"Edit"})}),(0,x.Y)(w,{onDelete:a})]})]}),n&&(0,x.FD)("div",{css:(0,s.AH)({gridColumn:"2 / -1",marginTop:g.spacing.md,cursor:"auto"},""),onClick:e=>e.stopPropagation(),children:["llm"===e.type&&(0,x.Y)(C.A,{mode:A.U0.DISPLAY,control:c,setValue:d,getValues:p}),"custom-code"===e.type&&(0,x.Y)(v.A,{control:c,mode:A.U0.DISPLAY})]})]})},b=r(7448),M=r(54871);var D=({scorer:e,experimentId:n})=>{const[r,s]=(0,o.useState)(!1),[i,t]=(0,o.useState)(null);(0,M.qd)("selectedScorerName",r?e.name:void 0);const l=(()=>{const e=(0,g.jE)();return(0,u.n)({mutationFn:async({experimentId:e,scorerNames:n})=>await(0,f._v)(e,n),onSuccess:(n,r)=>{(0,_.H)(e,r.experimentId,r.scorerNames)}})})(),a=(0,p.mN)({defaultValues:(0,h.JH)(e)}),{control:c,reset:d,setValue:m,getValues:y}=a;(0,o.useEffect)(()=>{(0,h.cp)(e,d)},[e,d]);const C=(0,o.useCallback)(()=>{s(!r)},[r]),v=(0,o.useCallback)(e=>{e.stopPropagation(),s(!r)},[r]),w=(0,o.useCallback)(e=>{e.stopPropagation(),t("edit")},[]),I=(0,o.useCallback)(()=>{t(null)},[]),D=(0,o.useCallback)(()=>{t("delete")},[]),S=(0,o.useCallback)(()=>{l.mutate({experimentId:n,scorerNames:[e.name]},{onSuccess:()=>{t(null)}})},[l,n,e.name]),j=(0,o.useCallback)(()=>{t(null),l.reset()},[l]);return(0,x.FD)(p.Op,{...a,children:[(0,x.Y)(k,{scorer:e,isExpanded:r,onCardClick:C,onExpandToggle:v,onEditClick:w,onDeleteClick:D,control:c,setValue:m,getValues:y}),(0,x.Y)(b.A,{visible:"edit"===i,onClose:I,experimentId:n,mode:A.U0.EDIT,existingScorer:e}),(0,x.Y)(Y,{isOpen:"delete"===i,onClose:j,onConfirm:S,scorer:e,isLoading:l.isLoading,error:l.error})]})};var S={name:"7rufyv",styles:"max-width:600px;text-align:center"};var j=({onAddLLMScorerClick:e,onAddCustomCodeScorerClick:n})=>{const{theme:r}=(0,i.u)();return(0,x.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center",padding:r.spacing.lg},""),children:(0,x.Y)(t.Empty,{image:(0,x.Y)(t.GavelIcon,{css:(0,s.AH)({fontSize:48,color:r.colors.textSecondary},"")}),title:(0,x.Y)(m.sA,{id:"eYt1wE",defaultMessage:"Add a judge to your experiment to measure your GenAI app quality"}),description:(0,x.FD)("div",{css:S,children:[(0,x.Y)(l.S,{size:"sm"}),(0,x.Y)(m.sA,{id:"9wZidY",defaultMessage:"Choose from a selection of built-in LLM judges or create your own custom code based judge. {learnMore}",values:{learnMore:(0,x.Y)(i.T.Link,{componentId:"codegen_no_dynamic_mlflow_web_js_src_experiment_tracking_pages_experiment_scorers_scoreremptystaterenderer_59",href:"https://mlflow.org/docs/latest/genai/eval-monitor/",openInNewTab:!0,children:(0,x.Y)(m.sA,{id:"6sFPJF",defaultMessage:"Learn more"})})}})]}),button:(0,x.FD)("div",{css:(0,s.AH)({display:"flex",gap:r.spacing.sm},""),children:[(0,x.Y)(i.B,{type:"primary",icon:(0,x.Y)(t.PlusIcon,{}),componentId:`${A.hU}.empty-state-add-llm-scorer-button`,onClick:e,children:(0,x.Y)(m.sA,{id:"BefOVw",defaultMessage:"New LLM judge"})}),(0,x.Y)(i.B,{icon:(0,x.Y)(t.CodeIcon,{}),componentId:`${A.hU}.empty-state-add-custom-code-scorer-button`,onClick:n,children:(0,x.Y)(m.sA,{id:"Kyw/aU",defaultMessage:"New custom code judge"})})]})})})},H=r(43937);var L={name:"sidtwu",styles:"display:flex;flex-direction:column;height:100%;overflow:auto"},F={name:"1fttcpj",styles:"display:flex;flex-direction:column"};var T=({experimentId:e})=>{var n;const{theme:r}=(0,i.u)(),a=(0,m.tz)(),[c,d]=(0,o.useState)(!1),[p,g]=(0,o.useState)("llm"),u=(0,H.A)(e),_=(null===(n=u.data)||void 0===n?void 0:n.scheduledScorers)||[],f=()=>{g("llm"),d(!0)},h=()=>{g("custom-code"),d(!0)},Y=0===_.length&&!c&&!u.isLoading;if(u.isError&&u.error)throw u.error;return u.isLoading?(0,x.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",width:"100%",gap:r.spacing.sm,padding:r.spacing.lg},""),children:[...Array(3).keys()].map(e=>(0,x.Y)(t.ParagraphSkeleton,{label:a.formatMessage({id:"GogRws",defaultMessage:"Loading judges..."}),seed:`scorer-${e}`},e))}):Y?(0,x.Y)(j,{onAddLLMScorerClick:f,onAddCustomCodeScorerClick:h}):(0,x.FD)("div",{css:L,children:[(0,x.Y)("div",{css:(0,s.AH)({display:"flex",justifyContent:"flex-end",alignItems:"center",padding:r.spacing.sm},""),children:(0,x.Y)(t.SplitButton,{type:"primary",icon:(0,x.Y)(t.PlusIcon,{}),componentId:`${A.hU}.new-scorer-button`,onClick:f,menu:(0,x.Y)(t.DropdownMenu.Content,{children:(0,x.FD)(t.DropdownMenu.Item,{componentId:`${A.hU}.new-custom-code-scorer-menu-item`,onClick:h,css:(0,s.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs},""),children:[(0,x.Y)(t.CodeIcon,{}),(0,x.Y)(m.sA,{id:"o5AS8R",defaultMessage:"Custom code judge"})]})}),children:(0,x.Y)(m.sA,{id:"rMIdMr",defaultMessage:"New LLM judge"})})}),(0,x.Y)(l.S,{size:"sm"}),(0,x.Y)("div",{css:F,children:(0,x.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",gap:r.spacing.sm,width:"100%"},""),children:_.map(n=>(0,x.Y)(D,{scorer:n,experimentId:e},n.name))})}),(0,x.Y)(b.A,{visible:c,onClose:()=>{d(!1)},experimentId:e,mode:A.U0.CREATE,initialScorerType:p})]})},E=r(91105),N=r(31655),U=r(98277);const z=({error:e})=>{const{theme:n}=(0,i.u)();return(0,x.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center",padding:n.spacing.lg},""),children:(0,x.Y)(t.Empty,{title:(0,x.Y)(a.A,{id:"6WQ9yl",defaultMessage:"Unable to load experiment judges"}),description:e?(0,x.Y)("span",{children:e.message}):(0,x.Y)(a.A,{id:"lHJWJh",defaultMessage:"We encountered an issue loading the judges interface. Please refresh the page or contact support if the problem persists."})})})};var P={name:"7rufyv",styles:"max-width:600px;text-align:center"};var R=()=>{const{theme:e}=(0,i.u)(),{experimentId:n}=((0,c.A)(),(0,E.g)()),r=(0,N.J8)(),m=(0,o.useMemo)(()=>({traceCount:A.UD,locations:n?[{mlflow_experiment:{experiment_id:n},type:"MLFLOW_EXPERIMENT"}]:[]}),[n]);return(0,U.d)(m),(0,x.Y)(d.tH,{FallbackComponent:z,children:r?n?(0,x.Y)(T,{experimentId:n||""}):null:(0,x.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center",padding:e.spacing.lg},""),children:(0,x.Y)(t.Empty,{image:(0,x.Y)(t.SparkleIcon,{css:(0,s.AH)({fontSize:48,color:e.colors.textSecondary},"")}),title:(0,x.Y)(a.A,{id:"CRr6Tx",defaultMessage:"Create and manage judges"}),description:(0,x.FD)("div",{css:P,children:[(0,x.Y)(l.S,{size:"sm"}),(0,x.Y)(a.A,{id:"aE6zVg",defaultMessage:"Configure predefined judges, create guidelines-based LLM judges, or build custom judge functions to track your unique metrics. {link}",values:{link:(0,x.Y)(i.T.Link,{componentId:"mlflow.experiment-scorers.documentation-link",href:"https://mlflow.org/docs/latest/genai/eval-monitor/",target:"_blank",rel:"noreferrer",children:(0,x.Y)(a.A,{id:"d4foU0",defaultMessage:"Learn more about configuring judges"})})}})]})})})})}}}]);